(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1007:function(e,t,r){},1009:function(e,t,r){},1015:function(e,t,r){},1017:function(e,t,r){},1019:function(e,t,r){},1021:function(e,t,r){},1023:function(e,t,r){},1025:function(e,t,r){},1029:function(e,t,r){},1031:function(e,t,r){},1035:function(e,t,r){},1047:function(e,t,r){},1069:function(e,t,r){},1071:function(e,t,r){},1073:function(e,t,r){},1075:function(e,t,r){},1079:function(e,t,r){},1081:function(e,t,r){},1086:function(e,t,r){},1088:function(e,t,r){},1090:function(e,t,r){},1092:function(e,t,r){},1094:function(e,t,r){},1153:function(e,t,r){},1187:function(e,t,r){},1189:function(e,t,r){},1192:function(e,t,r){},1194:function(e,t,r){},1196:function(e,t,r){},1202:function(e,t,r){},1216:function(e,t,r){},1222:function(e,t,r){},1234:function(e,t,r){},1236:function(e,t,r){},1239:function(e,t,r){},1241:function(e,t,r){},1243:function(e,t,r){},1245:function(e,t,r){},1247:function(e,t,r){},1249:function(e,t,r){},1251:function(e,t,r){},1257:function(e,t,r){},1290:function(e,t,r){},1292:function(e,t,r){},1300:function(e,t,r){},1302:function(e,t,r){},1304:function(e,t,r){},1306:function(e,t,r){},1308:function(e,t,r){},1310:function(e,t,r){},1312:function(e,t,r){},1314:function(e,t,r){},1316:function(e,t,r){},1326:function(e,t,r){},1330:function(e,t,r){},1332:function(e,t,r){},1334:function(e,t,r){},1336:function(e,t,r){},1338:function(e,t,r){},1340:function(e,t,r){},1342:function(e,t,r){},1359:function(e,t,r){},1361:function(e,t,r){},1363:function(e,t,r){},1365:function(e,t,r){},1367:function(e,t,r){},1369:function(e,t,r){},1371:function(e,t,r){},1373:function(e,t,r){},1375:function(e,t,r){},1377:function(e,t,r){},1379:function(e,t,r){},1381:function(e,t,r){},1383:function(e,t,r){},1385:function(e,t,r){},1387:function(e,t,r){},1389:function(e,t,r){},1391:function(e,t,r){},1393:function(e,t,r){},1395:function(e,t,r){},1402:function(e,t,r){},1404:function(e,t,r){},1408:function(e,t,r){},1410:function(e,t,r){},1412:function(e,t,r){},1414:function(e,t,r){},1417:function(e,t,r){},1419:function(e,t,r){},1421:function(e,t,r){},1423:function(e,t,r){},1437:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"allSettled",function(){return Lr}),r.d(n,"fetchTrace",function(){return Ar}),r.d(n,"fetchMultipleTraces",function(){return Fr}),r.d(n,"archiveTrace",function(){return Br}),r.d(n,"searchTraces",function(){return Hr}),r.d(n,"fetchServices",function(){return Wr}),r.d(n,"fetchServiceOperations",function(){return Gr}),r.d(n,"fetchServiceServerOps",function(){return Ur}),r.d(n,"fetchDeepDependencyGraph",function(){return zr}),r.d(n,"fetchDependencies",function(){return qr}),r.d(n,"fetchAllServiceMetrics",function(){return Kr}),r.d(n,"fetchAggregatedServiceMetrics",function(){return Jr});var a={};r.r(a),r.d(a,"loadJsonTraces",function(){return Au});var o={};r.r(o),r.d(o,"trackMiddleware",function(){return _y}),r.d(o,"loadOperationsForServiceMiddleware",function(){return Iy}),r.d(o,"historyUpdateMiddleware",function(){return Py}),r.d(o,"promise",function(){return Cy});var i=r(348),c=r(0),s=r.n(c),l=r(1459),u=r(18),f=r.n(u),d=r(68),p=r(6),h=r(7),m=r(11),v=r(12),g=r(3),y=r(515),b=r.n(y),E=r(28),O=r(1458),w=r(1453),j=r(1456),k=r(158),N=r(1451);r(617);function S(e){var t=e.name,r=e.value;return c.createElement("tr",{className:"ErrorMessage--detailItem"},c.createElement("td",{className:"ErrorMessage--attr"},t),c.createElement("td",{className:"ErrorMessage--value"},r))}function D(e){var t=e.className,r=e.error,n=e.wrap,a=e.wrapperClassName,o="ErrorMessage--msg ".concat(t||""),i="string"===typeof r?c.createElement("h3",{className:o},r):c.createElement("h3",{className:o},r.message);return n?c.createElement("div",{className:"ErrorMessage ".concat(a||"")},i):i}function T(e){var t=e.className,r=e.error,n=e.wrap,a=e.wrapperClassName;if("string"===typeof r)return null;var o=r.httpStatus,i=r.httpStatusText,s=r.httpUrl,l=r.httpQuery,u=r.httpBody,f=u&&u.length>1024?"".concat(u.slice(0,1021).trim(),"..."):u,d=c.createElement("div",{className:"ErrorMessage--details ".concat(t||""," u-simple-scrollbars")},c.createElement("table",{className:"ErrorMessage--detailsTable"},c.createElement("tbody",null,o?c.createElement(S,{name:"Status",value:o}):null,i?c.createElement(S,{name:"Status text",value:i}):null,s?c.createElement(S,{name:"URL",value:s}):null,l?c.createElement(S,{name:"Query",value:l}):null,f?c.createElement(S,{name:"Response body",value:f}):null)));return n?c.createElement("div",{className:"ErrorMessage ".concat(a||"")},d):d}function x(e){var t=e.className,r=e.detailClassName,n=e.error,a=e.messageClassName;return n?"string"===typeof n?c.createElement(D,{className:a,error:n,wrapperClassName:t,wrap:!0}):c.createElement("div",{className:"ErrorMessage ".concat(t||"")},c.createElement(D,{error:n,className:a}),c.createElement(T,{error:n,className:r})):null}D.defaultProps={className:void 0,wrap:!1,wrapperClassName:void 0},T.defaultProps={className:void 0,wrap:!1,wrapperClassName:void 0},x.defaultProps={className:void 0,detailClassName:void 0,messageClassName:void 0},x.Message=D,x.Details=T;var R=function(e,t){var r=null==e?"":e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),n=null==t?"":t,a=new RegExp("^".concat(r,"|/$"),"ig");return n.replace(a,"")}(window.location.origin,i.a);function _(e){var t=null==e?"":String(e);return"".concat(R).concat(t)}function I(e){var t=e.error;return s.a.createElement("section",{className:"ub-m3"},s.a.createElement("h1",null,"Error"),t&&s.a.createElement(x,{error:t}),s.a.createElement(N.a,{to:_("/")},"Back home"))}r(619);var P=r(280),C=r.n(P),M=r(14),V=r.n(M),L=r(614),A=r(1457),F=(r(229),r(86)),B=r.n(F),H=(r(69),r(20)),W=r.n(H),G=(r(232),r(49)),U=r.n(G),z=r(234),q=r.n(z),K=(r(374),r(203)),J=r.n(K),Z=(r(125),r(82)),Y=r.n(Z),Q=r(30),$=r.n(Q),X=_("/trace/:id");function ee(e,t){var r=_("/trace/".concat(e));return t?"".concat(r,"?").concat($.a.stringify({uiFind:t})):r}function te(e,t,r){return{state:t,pathname:ee(e),search:r&&$.a.stringify({uiFind:r})}}r(669);function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var ne=function(e){Object(m.a)(r,e);var t=re(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).goToTrace=function(t){t.preventDefault();var r=t.target.elements.idInput.value;r&&e.props.history.push(ee(r))},e}return Object(h.a)(r,[{key:"render",value:function(){return c.createElement(J.a,{layout:"horizontal",onSubmit:this.goToTrace,className:"TraceIDSearchInput--form"},c.createElement(Y.a,{autosize:null,name:"idInput",placeholder:"Lookup by Trace ID...",prefix:c.createElement(W.a,{type:"search"})}))}}]),r}(c.PureComponent),ae=Object(A.a)(ne),oe=r(1452),ie=_("/dependencies"),ce={path:ie,strict:!0,exact:!0};var se,le=r(33),ue=r(4),fe=r(176),de=r.n(fe),pe=r(32);se=Symbol.toStringTag;var he,me,ve,ge,ye=function(){function e(t){var r=this,n=t.path,a=t.operation,o=t.memberIdx;Object(p.a)(this,e),this.memberIdx=void 0,this.memberOf=void 0,this.operation=void 0,this._visibilityIdx=void 0,this.toJSONHelper=function(){return{memberIdx:r.memberIdx,operation:r.operation.name,service:r.operation.service.name,visibilityIdx:r._visibilityIdx}},this.memberIdx=o,this.memberOf=n,this.operation=a}return Object(h.a)(e,[{key:"distance",get:function(){return this.memberIdx-this.memberOf.focalIdx}},{key:"externalPath",get:function(){for(var e=[],t=this;t;)e.push(t),t=t.externalSideNeighbor;return this.distance<0&&e.reverse(),e}},{key:"externalSideNeighbor",get:function(){return this.distance?this.memberOf.members[this.memberIdx+Math.sign(this.distance)]:null}},{key:"focalPath",get:function(){for(var e=[],t=this;t;)e.push(t),t=t.focalSideNeighbor;return this.distance>0&&e.reverse(),e}},{key:"focalSideNeighbor",get:function(){return this.distance?this.memberOf.members[this.memberIdx-Math.sign(this.distance)]:null}},{key:"isExternal",get:function(){return Boolean(this.distance)&&(0===this.memberIdx||this.memberIdx===this.memberOf.members.length-1)}},{key:"visibilityIdx",get:function(){if(null==this._visibilityIdx)throw new Error("Visibility Index was never set for this PathElem");return this._visibilityIdx},set:function(e){if(null!=this._visibilityIdx)throw new Error("Visibility Index cannot be changed once set");this._visibilityIdx=e}},{key:"toJSON",value:function(){return Object(ue.a)({},this.toJSONHelper(),{memberOf:{focalIdx:this.memberOf.focalIdx,members:this.memberOf.members.map(function(e){return e.toJSONHelper()})}})}},{key:"toString",value:function(){return JSON.stringify(this.toJSON(),null,2)}},{key:se,get:function(){return"PathElem ".concat(this._visibilityIdx)}}]),e}();!function(e){e[e.None=0]="None",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected",e[e.Emphasized=4]="Emphasized",e[e.PathHovered=8]="PathHovered"}(he||(he={})),function(e){e.ExternalVsInternal="ext-vs-int",e.MostConcise="mc",e.OnePerLevel="per-level",e.PreventPathEntanglement="ppe",e.UpstreamVsDownstream="up-vs-down"}(me||(me={})),function(e){e.Empty="Empty",e.Full="Full",e.Partial="Partial"}(ve||(ve={})),function(e){e[e.Upstream=-1]="Upstream",e[e.Downstream=1]="Downstream"}(ge||(ge={}));var be=_("/deep-dependencies"),Ee={path:be,strict:!0,exact:!0};function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:be;if(e&&!de()(e)){var r=Reflect.has(e,"showOp")&&void 0!==e.showOp?Object(ue.a)({},e,{showOp:e.showOp?1:0}):e;return"".concat(t,"?").concat($.a.stringify(r))}return t}function we(e){if(Array.isArray(e)){var t=e[0];return console.warn('Found multiple query parameters: "'.concat(e,'", using "').concat(t,'"')),t}return e}var je=Object(pe.default)(function(e){var t=$.a.parse(e),r=t.density,n=void 0===r?me.PreventPathEntanglement:r,a=t.decoration,o=t.end,i=t.hash,c=t.operation,s=t.service,l=t.showOp,u=t.start,f=t.visEncoding,d={density:we(n)};return a&&(d.decoration=we(a)),o&&(d.end=Number.parseInt(we(o),10)),i&&(d.hash=we(i)),c&&(d.operation=we(c)),s&&(d.service=we(s)),l&&(d.showOp=Boolean(+we(l))),u&&(d.start=Number.parseInt(we(u),10)),f&&(d.visEncoding=we(f)),d}),ke=Object(pe.default)(function(e,t){if(t&&e.hash===t)return e;e.visEncoding;return Object(le.a)(e,["visEncoding"])}),Ne=_("/quality-metrics"),Se={path:Ne,strict:!0,exact:!0};function De(e){return e?"".concat(Ne,"?").concat($.a.stringify(e)):Ne}var Te=Object(pe.default)(function(e){var t=$.a.parse(e),r=t.lookback,n=t.service,a=Array.isArray(n)?n[0]:n,o=Array.isArray(r)?r[0]:r,i=o&&Number.parseInt(o,10),c={lookback:48};return a&&(c.service=a),i&&(c.lookback=i),c}),xe=r(34),Re=r(19),_e=14,Ie="".concat(_e,"px Helvetica Nueue"),Pe=1.5,Ce=5,Me=15,Ve=75,Le=/\W*\w+\W*/g,Ae=7e3,Fe=35,Be=ze().length,He="&traceID=".length;function We(e,t){return null==e&&null==t||String(e)===String(t)}var Ge=_("/search"),Ue={path:Ge,strict:!0,exact:!0};function ze(e){var t=_("/search");if(!e)return t;var r=e.traceID,n=e.spanLinks,a=Object(le.a)(e,["traceID","spanLinks"]),o=r;n&&r&&(o=(Array.isArray(r)?r:[r]).filter(function(e){return!n[e]}));var i=Object(ue.a)({},a,{span:n&&Object.keys(n).reduce(function(e,t){return[].concat(Object(Re.a)(e),["".concat(n[t],"@").concat(t)])},[]),traceID:o&&o.length?o:void 0}),c="".concat(t,"?").concat($.a.stringify(i));if(c.length<=Ae)return c;var s=c.slice(0,Ae+1);return"&"===s[Ae]?s.slice(0,-1):s.slice(0,s.lastIndexOf("&"))}var qe=Object(pe.default)(function(e){var t=$.a.parse(e),r=t.traceID,n=t.span,a=Object(le.a)(t,["traceID","span"]),o=Object(ue.a)({},a),i=new Set(!r||Array.isArray(r)?r:[r]),c={};return n&&n.length&&((Array.isArray(n)?n:[n]).forEach(function(e){var t=e.split("@"),r=Object(xe.a)(t,2),n=r[0],a=r[1];i.add(a),n&&(c[a]?c[a]=c[a].concat(" ",n):c[a]=n)}),o.spanLinks=c),i.size&&(o.traceID=Object(Re.a)(i)),o});var Ke=_("/trace/:a?\\.\\.\\.:b?"),Je={path:Ke,strict:!0,exact:!0};function Ze(e){var t=function(e){var t=e.a,r=e.b,n=e.cohort,a=new Set([].concat(t,r,n).filter(function(e){return Boolean(e)})),o=Array.from(a);return{a:o[0],b:o[1],cohort:o}}(e),r=t.a,n=void 0===r?void 0:r,a=t.b,o=void 0===a?void 0:a,i=t.cohort,c=$.a.stringify({cohort:i});return _("/trace/".concat(n||"","...").concat(o||"").concat(c?"?":"").concat(c))}var Ye=_("/monitor"),Qe={path:Ye,strict:!0,exact:!0};var $e=r(23),Xe=r.n($e),et=r(259),tt=r.n(et),rt=r(520),nt=r.n(rt);var at=r(521),ot=r.n(at),it=46,ct="<trace-without-root-span>",st={DONE:"FETCH_DONE",ERROR:"FETCH_ERROR",LOADING:"FETCH_LOADING"},lt=Object.freeze({gitCommit:"",gitVersion:"",buildDate:""}),ut=!1;function ft(){var e=window.getJaegerVersion;if("function"!==typeof e)return ut||(console.warn("Embedded version information not available"),ut=!0),Object(ue.a)({},lt);var t=e();return t?Object(ue.a)({},t):Object(ue.a)({},lt)}var dt=r(769).version,pt=ot()(Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},menu:[{label:"About Jaeger",items:[{label:"Website/Docs",url:"https://www.jaegertracing.io/"},{label:"Blog",url:"https://medium.com/jaegertracing/"},{label:"Twitter",url:"https://twitter.com/JaegerTracing"},{label:"Discussion Group",url:"https://groups.google.com/forum/#!forum/jaeger-tracing"},{label:"Online Chat",url:"https://cloud-native.slack.com/archives/CGG7NFUJ3"},{label:"GitHub",url:"https://github.com/jaegertracing/"},{label:"Jaeger ".concat(ft().gitVersion)},{label:"Commit ".concat(ft().gitCommit.substring(0,7))},{label:"Build ".concat(ft().buildDate)},{label:"Jaeger UI v".concat(dt)}]}],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0,customWebAnalytics:null},linkPatterns:[],monitor:{menuEnabled:!0,emptyState:{mainTitle:"Get started with Service Performance Monitoring",subTitle:"A high-level monitoring dashboard that helps you cut down the time to identify and resolve anomalies and issues.",description:"Service Performance Monitoring aggregates tracing data into RED metrics and visualizes them in service and operation level dashboards.",button:{text:"Read the Documentation",onClick:function(){return window.open("https://www.jaegertracing.io/docs/latest/spm/")}},alert:{message:"Service Performance Monitoring requires a Prometheus-compatible time series database.",type:"info"}},docsLink:"https://www.jaegertracing.io/docs/latest/spm/"},deepDependencies:{menuEnabled:!1},qualityMetrics:{menuEnabled:!1,menuLabel:"Trace Quality"}},"__mergeFields",{value:["dependencies","search","tracking"]})),ht=[{formerKey:"dependenciesMenuEnabled",currentKey:"dependencies.menuEnabled"},{formerKey:"gaTrackingID",currentKey:"tracking.gaID"}],mt=!1,vt=!1,gt=Object(pe.default)(function(){var e=window.getJaegerUiConfig;if("function"!==typeof e)return mt||(console.warn("Embedded config not available"),mt=!0),Object(ue.a)({},pt);var t=e();if(!t)return Object(ue.a)({},pt);Array.isArray(ht)&&(ht.forEach(function(e){return function(e,t,r){var n=t.formerKey,a=t.currentKey;if(q()(e,n)){var o=!1,i=!1;if(q()(e,a))i=!0;else{var c=Xe()(e,n);tt()(e,a,c),o=!0}if(nt()(e,n),r){var s=['"'.concat(n,'" is deprecated, instead use "').concat(a,'"')];o&&s.push('The value at "'.concat(n,'" has been moved to "').concat(a,'"')),i&&s.push('The value at "'.concat(n,'" is being ignored in favor of the value at "').concat(a,'"')),console.warn(s.join("\n"))}}}(t,e,!vt)}),vt=!0);for(var r=Object(ue.a)({},pt,t),n=pt.__mergeFields||[],a=0;a<n.length;a++){var o=n[a];"object"===typeof t[o]&&null!==t[o]&&(r[o]=Object(ue.a)({},pt[o],t[o]))}return r}),yt=gt;function bt(e){return Xe()(gt(),e)}var Et=[{to:ze(),matches:function(e){return Boolean(Object(oe.a)(e,Ue))},text:"Search"},{to:function(e){return Ze(e.traceDiff)},matches:function(e){return Boolean(Object(oe.a)(e,Je))},text:"Compare"}];function Ot(e){var t=e.label,r=e.anchorTarget,n=e.url,a=s.a.createElement("a",{href:n,target:r||"_blank",rel:"noopener noreferrer"},t);return s.a.createElement(U.a.Item,{key:t,disabled:!n},n?a:t)}function wt(e){var t=e.label,r=e.items,n=s.a.createElement(U.a,null,r.map(Ot));return s.a.createElement(B.a,{overlay:n,placement:"bottomRight"},s.a.createElement("a",null,t," ",s.a.createElement(W.a,{type:"down"})))}function jt(e){var t=e.config,r=e.router.location.pathname,n=Array.isArray(t.menu)?t.menu:[];return s.a.createElement("div",null,s.a.createElement(U.a,{theme:"dark",mode:"horizontal",selectable:!1,className:"ub-right",selectedKeys:[r]},s.a.createElement(U.a.Item,null,s.a.createElement(ae,null)),n.map(function(e){return t=e,q()(t,"items")?s.a.createElement(U.a.Item,{key:e.label},s.a.createElement(wt,Object.assign({key:e.label},e))):Ot(e);var t})),s.a.createElement(U.a,{theme:"dark",mode:"horizontal",selectable:!1,selectedKeys:[r]},s.a.createElement(U.a.Item,null,s.a.createElement(N.a,{to:_("/"),style:{fontSize:"14px",fontWeight:500}},"JAEGER UI")),Et.map(function(t){var n=t.matches,a=t.to,o=t.text,i="string"===typeof a?a:a(e),c=n(r)?r:i;return s.a.createElement(U.a.Item,{key:c},s.a.createElement(N.a,{to:i},o))})))}bt("dependencies.menuEnabled")&&Et.push({to:ie,matches:function(e){return Boolean(Object(oe.a)(e,ce))},text:"System Architecture"}),bt("deepDependencies.menuEnabled")&&Et.push({to:Oe(),matches:function(e){return Boolean(Object(oe.a)(e,Ee))},text:"Service Dependencies"}),bt("qualityMetrics.menuEnabled")&&Et.push({to:De(),matches:function(e){return Boolean(Object(oe.a)(e,Se))},text:bt("qualityMetrics.menuLabel")}),bt("monitor.menuEnabled")&&Et.push({to:Ye,matches:function(e){return Boolean(Object(oe.a)(e,Qe))},text:"Monitor"}),jt.CustomNavDropdown=wt;var kt=Object(A.a)(Object(E.b)(function(e){return e})(jt)),Nt=r(10),St=r(122),Dt=r(279),Tt=r.n(Dt),xt={sym:"??",word:"??"},Rt=[{sym:"dp",word:"dependencies",rx:/^\/dep/i},{sym:"tr",word:"trace",rx:/^\/trace/i},{sym:"sd",word:"search",rx:/^\/search\?./i},{sym:"sr",word:"search",rx:/^\/search/i},{sym:"rt",word:"home",rx:/^\/$/}],_t=[{sym:"svc",word:"",rx:/^\/api\/services$/i},{sym:"op",word:"",rx:/^\/api\/.*?operations$/i},{sym:"sr",word:"",rx:/^\/api\/traces\?/i},{sym:"tr",word:"",rx:/^\/api\/traces\/./i},{sym:"dp",word:"",rx:/^\/api\/dep/i},{sym:"__IGNORE__",word:"",rx:/\.js(\.map)?$/i}],It=console.warn.bind(console),Pt=window.location.origin+_("");function Ct(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.length>t?r?"~".concat(e.slice(1-t)):"".concat(e.slice(0,t-1),"~"):e}function Mt(e){return e.trim().replace(/\n/g,"|").replace(/\s\s+/g," ").trim()}function Vt(e,t){for(var r=0;r<e.length;r++){if(e[r].rx.test(t))return e[r]}return It('Unable to find symbol for: "'.concat(t,'"')),xt}function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Mt(e),n=["! "],a=r.indexOf(":");if(a>-1){var o=r.slice(0,a).replace(/error/i,"").trim();o&&n.push(o,"! "),r=r.slice(a+1)}n.push(r.trim());var i=n.join("");return t?Ct(i,t):n.join("")}function At(e){var t=e.url,r=e.status_code,n=200===r?"":"|".concat(r),a=Vt(_t,t);return"__IGNORE__"===a.sym?null:"[".concat(a.sym).concat(n,"]")}function Ft(e){return e.replace(/\.(?=\s|$)/g,"").replace(/\.ub-[^. [:]+/g,"").replace(/^(\w+ > )+/,"").replace(/(^| )\w+?(?=\.)/g,"$1").replace(/ > /g," >")}function Bt(e,t,r,n,a){var o=[e,t,r,n,""].filter(function(e){return null!=e}).join("\n"),i=function(e){if(!Array.isArray(e)||!e.length)return"";for(var t=-1,r=e.length-1;r>=0;r--)if("ui"===e[r].category.slice(0,2)){t=r;break}for(var n,a=[],o=!0,i=0;i<e.length;i++){var c=e[i];switch(c.category.split(".")[0]){case"fetch":var s=At(c.data);s&&(a.push(s),o=!1);break;case"navigation":var l="".concat(o?"":"\n","\n").concat((n=c.data.to,Vt(Rt,n).sym),"\n");a.push(l),o=!0;break;case"ui":if(i===t){var u=Ft(c.message);a.push("".concat(c.category[3],"{").concat(u,"}"))}else a.push(c.category[3]);o=!1;break;case"sentry":var f=Lt(c.message,58);a.push("".concat(o?"":"\n").concat(f,"\n")),o=!0}}a=a.filter(Boolean);var d="",p=-1,h=a.reduce(function(e,t,r){return t===d?e:(d&&(r-p>1&&e.push(String(r-p)),d="",p=-1),e.push(t),1===t.length&&(d=t,p=r),e)},[]);return d&&p!==a.length-1&&h.push(String(a.length-p)),h.join("").trim().replace(/\n\n\n/g,"\n")}(a);return"".concat(o,"\n").concat(Ct(i,498-o.length,!0))}function Ht(e){var t=e.data,r=t.breadcrumbs,n=t.exception,a=t.extra,o=t.request,i=t.tags,c=function(e){for(var t=Lt("".concat(e.type,": ").concat(e.value),149),r=e.stacktrace.frames.map(function(e){return{filename:e.filename.replace(Pt,"").replace(/^\/static\/js\//i,""),fn:Mt(e.function||"??")}}),n=[],a="",o=r.length-1;o>=0;o--){var i=r[o],c=i.filename,s=i.fn;a!==c&&(n.push("> ".concat(c)),a=c),n.push(s)}return{message:t,stack:n.join("\n")}}(n.values[0]),s=c.message,l=c.stack,u=Ct(o.url.replace(Pt,""),50),f=Vt(Rt,u).word,d=Math.round(a["session:duration"]/1e3),p="jaeger/".concat(f,"/error"),h=[s,i&&i.git,u,"",l].filter(function(e){return null!=e}).join("\n");return{message:s,category:p,action:h=Ct(h,499),label:Bt(s,f,d,i&&i.git,r&&r.values),value:d}}var Wt=function(){for(var e=St.a.testModeAPI.calls,t=0;t<e.length;t++){var r;(r=console).log.apply(r,["[react-ga]"].concat(Object(Re.a)(e[t])))}e.length=0},Gt=function(e){return Boolean(e)&&"0"!==e&&"false"!==e},Ut=function(e,t,r){var n=Gt($.a.parse(Xe()(window,"location.search"))["ga-debug"]),a=Xe()(e,"tracking.gaID"),o=n||Boolean(Xe()(e,"tracking.trackErrors")),i=Xe()(e,"tracking.cookiesToDimensions"),c=o?Tt.a:null,s=499,l=149,u=function(){return n||Boolean(a)},f=function(e){var t=e;/^jaeger/i.test(t)||(t="jaeger/".concat(t)),t=t.slice(0,149),St.a.exception({description:t,fatal:!1}),n&&Wt()},d=function(e,t,r,a){var o={category:/^jaeger/i.test(e)?e.slice(0,l):"jaeger/".concat(e).slice(0,l),action:t.slice(0,s)};null!=r&&("string"===typeof r?o.label=r.slice(0,s):o.value=Math.round(r)),null!=a&&(o.value=Math.round(a)),St.a.event(o),n&&Wt()},p=function(e){var t=Ht(e),r=t.message,n=t.category,a=t.action,o=t.label,i=t.value;f(r),d(n,a,o,i)};return{isEnabled:u,init:function(){if(u()){var e={testMode:n,titleCase:!1,debug:!0};if(St.a.initialize(a||"debug-mode",e),St.a.set({appId:"github.com/jaegertracing/jaeger-ui",appName:"Jaeger UI",appVersion:r}),void 0!==i&&i.forEach(function(e){var t=e.cookie,r=e.dimension,n=" ".concat(document.cookie).match(new RegExp("[; ]".concat(t,"=([^\\s;]*)")));n?St.a.set(Object(Nt.a)({},r,n[1])):console.warn("".concat(t," not present in cookies, could not set dimension: ").concat(r))}),o){var c={autoBreadcrumbs:{xhr:!0,console:!1,dom:!0,location:!0},environment:"production",transport:p};t&&"unknown"!==t&&(c.tags={git:t}),Tt.a.config("https://fakedsn@omg.com/1",c).install(),window.onunhandledrejection=function(e){Tt.a.captureException(e.reason)}}n&&Wt()}},context:c,trackPageView:function(e,t){var r=t?"".concat(e).concat(t):e;St.a.pageview(r),n&&Wt()},trackError:f,trackEvent:d}},zt=function(){return{init:function(){},trackPageView:function(){},trackError:function(){},trackEvent:function(){},context:null,isEnabled:function(){return!1}}},qt=function(){var e,t,r=yt();try{var n=JSON.parse('{"version":"0.0.1","remote":"github.com/jaegertracing/jaeger-ui","objName":"5db57f5","changed":{"hasChanged":false,"files":0,"insertions":0,"deletions":0,"untracked":0,"pretty":""},"refName":"(detached)","pretty":"0.0.1 | github.com/jaegertracing/jaeger-ui | 5db57f5 | (detached)"}'),a=[n.objName];n.changed.hasChanged&&a.push(n.changed.pretty),e=a.join(" "),t=n.pretty}catch(c){e='{"version":"0.0.1","remote":"github.com/jaegertracing/jaeger-ui","objName":"5db57f5","changed":{"hasChanged":false,"files":0,"insertions":0,"deletions":0,"untracked":0,"pretty":""},"refName":"(detached)","pretty":"0.0.1 | github.com/jaegertracing/jaeger-ui | 5db57f5 | (detached)"}',t='{"version":"0.0.1","remote":"github.com/jaegertracing/jaeger-ui","objName":"5db57f5","changed":{"hasChanged":false,"files":0,"insertions":0,"deletions":0,"untracked":0,"pretty":""},"refName":"(detached)","pretty":"0.0.1 | github.com/jaegertracing/jaeger-ui | 5db57f5 | (detached)"}'}t=t.length>99?"".concat(t.slice(0,96),"..."):t;var o=zt;r.tracking&&r.tracking.customWebAnalytics?o=r.tracking.customWebAnalytics:r.tracking&&r.tracking.gaID&&(o=Ut);var i=o(r,e,t);return i.init(),i}();function Kt(e,t){return qt.trackPageView(e,t)}function Jt(e,t,r,n){return qt.trackEvent(e,t,r,n)}var Zt=qt.context,Yt=qt.isEnabled();r(787);function Qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var $t=C.a.Header,Xt=C.a.Content,er=function(e){Object(m.a)(r,e);var t=Qt(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this.props;Kt(e.pathname,e.search)}},{key:"componentDidUpdate",value:function(e){var t=e.pathname,r=e.search,n=this.props,a=n.pathname,o=n.search;t===a&&r===o||Kt(a,o)}},{key:"render",value:function(){var e=this.props.embedded,t=V()({"Page--content":!0,"Page--content--no-embedded":!e});return c.createElement("div",null,c.createElement(L.a,{title:"Jaeger UI"}),c.createElement(C.a,null,!e&&c.createElement($t,{className:"Page--topNav"},c.createElement(kt,null)),c.createElement(Xt,{className:t},this.props.children)))}}]),r}(c.Component);var tr=Object(A.a)(Object(E.b)(function(e){var t=e.embedded,r=e.router.location;return{embedded:t,pathname:r.pathname,search:r.search}})(er)),rr=(r(316),r(157)),nr=r.n(rr),ar=r(21),or=r(356),ir=r.n(or),cr=r(522),sr=r.n(cr),lr=r(352),ur=r.n(lr);function fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}sr()(ir.a,ur.a);var dr=function(e){Object(m.a)(r,e);var t=fr(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).cytoscapeRef=s.a.createRef(),n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.serviceCalls,t={},r=[],n=[];e.forEach(function(e){0!==e.parent.trim().length&&0!==e.child.trim().length&&(t[e.parent]||(r.push({data:{id:e.parent}}),t[e.parent]=!0),t[e.child]||(r.push({data:{id:e.child}}),t[e.child]=!0),n.push({data:{source:e.parent,target:e.child,label:"".concat(e.callCount)}}))}),ir()({container:this.cytoscapeRef.current,boxSelectionEnabled:!1,autounselectify:!0,layout:{name:"dagre"},minZoom:.5,style:[{selector:"node",style:{content:"data(id)","text-opacity":.5,"text-valign":"center","text-halign":"right","background-color":"#11939A"}},{selector:"edge",style:{width:4,label:"data(label)","target-arrow-shape":"triangle","line-color":"gray","target-arrow-color":"gray","curve-style":"bezier"}}],elements:{nodes:r,edges:n}})}},{key:"render",value:function(){return s.a.createElement("div",{id:"cy",style:{width:"100%",height:"100%",position:"absolute",left:0,top:0},ref:this.cytoscapeRef})}}]),r}(s.a.Component);dr.defaultProps={serviceCalls:[]};var pr=r(205),hr=r(37),mr=r.n(hr);function vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var gr=function(e){Object(m.a)(r,e);var t=vr(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.link,r=e.targetRadius,n=(e.edgeOffset,Object(le.a)(e,["link","targetRadius","edgeOffset"])),a="arrow-".concat(function(e){var t=e.source,r=e.target,n="string"===typeof t?t:t.id,a="string"===typeof r?r:r.id;return"".concat(n,"=>").concat(a)}(t));return c.createElement("g",null,c.createElement("defs",null,c.createElement("marker",{id:a,markerWidth:6,markerHeight:4,refX:5+(r||0),refY:2,orient:"auto",markerUnits:"strokeWidth"},Number(r)>0&&c.createElement("path",{d:"M0,0 L0,4 L6,2 z",fill:n.stroke||n.color}))),c.createElement(pr.ForceGraphLink,Object.assign({},n,{link:t,markerEnd:"url(#".concat(a,")")})))}}]),r}(c.PureComponent);gr.defaultProps={className:"",edgeOffset:2,opacity:.6,stroke:"#999",strokeWidth:1,targetRadius:2};var yr=r(101),br=r.n(yr);br.a.arrayOf(br.a.shape({id:br.a.string.isRequired,radius:br.a.number.isRequired})),br.a.arrayOf(br.a.shape({source:br.a.string.isRequired,target:br.a.string.isRequired,target_node_size:br.a.number,value:br.a.number.isRequired}));function Er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Or=function(e){var t=e.radius,r=void 0===t?5:t;return e.orphan?-20*r:-12*r},wr=function(e){Object(m.a)(r,e);var t=Er(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state={width:d.window.innerWidth,height:d.window.innerHeight},n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.onResize(),this.debouncedResize=Object(hr.debounce)(function(){return e.onResize.apply(e,arguments)},50),d.window.addEventListener("resize",this.debouncedResize)}},{key:"componentWillUnmount",value:function(){d.window.removeEventListener("resize",this.debouncedResize)}},{key:"onResize",value:function(){var e=d.window.innerWidth,t=d.window.innerHeight;this.container&&(t-=this.container.offsetTop),this.setState({width:e,height:t})}},{key:"render",value:function(){var e=this,t=this.props,r=t.nodes,n=t.links,a=this.state,o=a.width,i=a.height,c=new Map(r.map(function(e){return[e.id,e]}));return s.a.createElement("div",{ref:function(t){e.container=t},style:{position:"relative"}},s.a.createElement(pr.InteractiveForceGraph,{zoom:!0,minScale:.5,maxScale:4,panLimit:2,simulationOptions:{width:o,height:i,strength:{charge:Or,x:o/i>1?.1:.12,y:o/i<1?.1:.12}},labelOffset:{x:function(e){return e.radius+2},y:function(e){return e.radius/2}},nodeAttrs:["orphan"],highlightDependencies:!0},r.map(function(e){var t=e.labelStyle,r=e.labelClass,n=e.showLabel,a=e.opacity,o=e.fill,i=Object(le.a)(e,["labelStyle","labelClass","showLabel","opacity","fill"]);return s.a.createElement(pr.ForceGraphNode,{key:i.id,node:i,labelStyle:t,labelClass:r,showLabel:n,opacity:a,fill:o})}),n.map(function(e){var t=e.opacity,r=Object(le.a)(e,["opacity"]);return s.a.createElement(gr,{key:"".concat(r.source,"=>").concat(r.target),opacity:t,link:r,targetRadius:c.get(r.target).radius})})))}}]),r}(c.Component);r(939);function jr(e){var t=e.centered,r=e.vcentered,n=e.className,a=e.small,o=Object(le.a)(e,["centered","vcentered","className","small"]),i="\n    LoadingIndicator\n    ".concat(t?"is-centered":"","\n    ").concat(r?"is-vcentered":"","\n    ").concat(a?"is-small":"","\n    ").concat(n||"","\n  ");return s.a.createElement(W.a,Object.assign({type:"loading",className:i},o))}jr.defaultProps={centered:!1,className:void 0,small:!1};var kr=r(1450),Nr=r(523),Sr=r.n(Nr),Dr=r(43),Tr=r.n(Dr);function xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query,n=void 0===r?null:r,a=Object(le.a)(t,["query"]);a.credentials="same-origin";var o="";return n&&(o="?".concat("string"===typeof n?n:$.a.stringify(n))),Sr()("".concat(e).concat(o),a).then(function(t){return t.status<400?t.json():t.text().then(function(r){var a,o,i;try{a=JSON.parse(r),o=JSON.stringify(a,null,2)}catch(s){a=null,o=null}"string"===typeof(i=a&&Array.isArray(a.errors)&&a.errors.length?a.errors.map(function(e){return function(e,t){if(null!=e.code&&null!=e.msg)return e.code===t?e.msg:"".concat(e.code," - ").concat(e.msg);try{return JSON.stringify(e)}catch(s){return String(e)}}(e,t.status)}).join("; "):r||"".concat(t.status," - ").concat(t.statusText))&&(i=i.trim());var c=new Error("HTTP Error: ".concat(i));throw c.httpStatus=t.status,c.httpStatusText=t.statusText,c.httpBody=o||r,c.httpUrl=e,c.httpQuery="string"===typeof n?n:$.a.stringify(n),c})})}var Rr=_("/api/"),_r=_("/analytics/"),Ir=Tr.a.duration(1,"weeks").asMilliseconds(),Pr={apiRoot:Rr,archiveTrace:function(e){return xr("".concat(this.apiRoot,"archive/").concat(e),{method:"POST"})},fetchDecoration:function(e){return xr(e)},fetchDeepDependencyGraph:function(e){return xr("".concat(_r,"v1/dependencies"),{query:e})},fetchDependencies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ir;return xr("".concat(this.apiRoot,"dependencies"),{query:{endTs:e,lookback:t}})},fetchQualityMetrics:function(e,t){return xr("/qualitymetrics-v2",{query:{hours:t,service:e}})},fetchServiceOperations:function(e){return xr("".concat(this.apiRoot,"services/").concat(encodeURIComponent(e),"/operations"))},fetchServiceServerOps:function(e){return xr("".concat(this.apiRoot,"operations"),{query:{service:e,spanKind:"server"}})},fetchServices:function(){return xr("".concat(this.apiRoot,"services"))},fetchTrace:function(e){return xr("".concat(this.apiRoot,"traces/").concat(e))},searchTraces:function(e){return xr("".concat(this.apiRoot,"traces"),{query:e})},fetchMetrics:function(e,t,r){var n=t.map(function(e){return"service=".concat(e)}).join(",");return xr("".concat(this.apiRoot,"metrics/").concat(e),{query:"".concat(n,"&").concat($.a.stringify(r))}).then(function(e){return Object(ue.a)({},e,{quantile:r.quantile})})}},Cr="latencies",Mr="calls",Vr="errors";function Lr(e){var t=e.map(function(e){return Promise.resolve(e).then(function(e){return{status:"fulfilled",value:e}},function(e){return{status:"rejected",reason:e}})});return Promise.all(t)}var Ar=Object(kr.a)("@JAEGER_API/FETCH_TRACE",function(e){return Pr.fetchTrace(e)},function(e){return{id:e}}),Fr=Object(kr.a)("@JAEGER_API/FETCH_MULTIPLE_TRACES",function(e){return Pr.searchTraces({traceID:e})},function(e){return{ids:e}}),Br=Object(kr.a)("@JAEGER_API/ARCHIVE_TRACE",function(e){return Pr.archiveTrace(e)},function(e){return{id:e}}),Hr=Object(kr.a)("@JAEGER_API/SEARCH_TRACES",function(e){return Pr.searchTraces(e)},function(e){return{query:e}}),Wr=Object(kr.a)("@JAEGER_API/FETCH_SERVICES",function(){return Pr.fetchServices()}),Gr=Object(kr.a)("@JAEGER_API/FETCH_SERVICE_OPERATIONS",function(e){return Pr.fetchServiceOperations(e)},function(e){return{serviceName:e}}),Ur=Object(kr.a)("@JAEGER_API/FETCH_SERVICE_SERVER_OP",function(e){return Pr.fetchServiceServerOps(e)},function(e){return{serviceName:e}}),zr=Object(kr.a)("@JAEGER_API/FETCH_DEEP_DEPENDENCY_GRAPH",function(e){return Pr.fetchDeepDependencyGraph(e)},function(e){return{query:e}}),qr=Object(kr.a)("@JAEGER_API/FETCH_DEPENDENCIES",function(){return Pr.fetchDependencies()}),Kr=Object(kr.a)("@JAEGER_API/FETCH_ALL_SERVICE_METRICS",function(e,t){return Lr([Pr.fetchMetrics(Cr,[e],Object(ue.a)({},t,{quantile:.5})),Pr.fetchMetrics(Cr,[e],Object(ue.a)({},t,{quantile:.75})),Pr.fetchMetrics(Cr,[e],t),Pr.fetchMetrics(Mr,[e],t),Pr.fetchMetrics(Vr,[e],t)])}),Jr=Object(kr.a)("@JAEGER_API/FETCH_AGGREGATED_SERVICE_METRICS",function(e,t){var r=Object(ue.a)({},t,{groupByOperation:!0});return Lr([Pr.fetchMetrics(Cr,[e],r),Pr.fetchMetrics(Mr,[e],r),Pr.fetchMetrics(Vr,[e],r)])}),Zr=r(25),Yr=Object(Zr.a)(function(e){return e.dependencies},function(e){var t=e.reduce(function(e,t){var r=e.nodeMap,n=e.links;return r[t.parent]=r[t.parent]?r[t.parent]+t.callCount:t.callCount,r[t.child]=r[t.child]?e.nodeMap[t.child]+t.callCount:t.callCount,t.parent!==t.child&&(n=n.concat([{source:t.parent,target:t.child,callCount:t.callCount,value:Math.max(Math.sqrt(t.callCount/1e4),1),target_node_size:Math.max(Math.log(r[t.child]/1e3),3)}])),{nodeMap:r,links:n}},{nodeMap:{},links:[]});return t.nodes=Object.keys(t.nodeMap).map(function(e){return{callCount:t.nodeMap[e],radius:Math.max(Math.log(t.nodeMap[e]/1e3),3),orphan:-1===t.links.findIndex(function(t){return e===t.source||e===t.target}),id:e}}),{nodes:t.nodes,links:t.links}});r(942);function Qr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var $r=nr.a.TabPane,Xr={FORCE_DIRECTED:{type:"FORCE_DIRECTED",name:"Force Directed Graph"},DAG:{type:"DAG",name:"DAG"}},en=bt("dependencies.dagMaxNumServices")||100,tn=function(e){Object(m.a)(r,e);var t=Qr(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).handleGraphTypeChange=function(e){return n.setState({graphType:e})},n.state={graphType:"FORCE_DIRECTED"},n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchDependencies()}},{key:"render",value:function(){var e=this.props,t=e.nodes,r=e.links,n=e.error,a=e.dependencies,o=e.loading,i=this.state.graphType;if(o)return s.a.createElement(jr,{className:"u-mt-vast",centered:!0});if(n)return s.a.createElement(x,{className:"ub-m3",error:n});if(!t||!r)return s.a.createElement("div",{className:"u-simple-card ub-m3"},"No service dependencies found.");var c=[Xr.FORCE_DIRECTED];return a.length<=en&&c.push(Xr.DAG),s.a.createElement(nr.a,{onChange:this.handleGraphTypeChange,activeKey:i,type:"card",tabBarStyle:{background:"#f5f5f5",padding:"1rem 1rem 0 1rem"}},c.map(function(e){return s.a.createElement($r,{className:"ub-relelative",tab:e.name,key:e.type},s.a.createElement("div",{className:"DependencyGraph--graphWrapper"},"FORCE_DIRECTED"===e.type&&s.a.createElement(wr,{nodes:t,links:r}),"DAG"===e.type&&s.a.createElement(dr,{serviceCalls:a})))}))}}]),r}(c.Component);tn.defaultProps={nodes:null,links:null,error:null};var rn=Object(E.b)(function(e){var t,r,n=e.dependencies,a=n.dependencies,o=n.error,i=n.loading;if(a&&a.length>0){var c=Yr({dependencies:a});t=c.links,r=c.nodes}return{loading:i,error:o,nodes:r,links:t,dependencies:a}},function(e){return{fetchDependencies:Object(ar.b)(n,e).fetchDependencies}})(tn),nn=r(357),an=r.n(nn),on=function(e){return an()(Jt.bind(null,e,"set"),750,{leading:!1})},cn=function(e){return an()(Jt.bind(null,e,"clear"),750,{leading:!1})};function sn(e){var t=on(e),r=cn(e);return function(e){return e?t():r()}}var ln="jaeger/ux/ddg/density-change",un="jaeger/ux/ddg/density-selection",fn="jaeger/ux/ddg/downstream-hops-change",dn="jaeger/ux/ddg/downstream-hops-selection",pn="jaeger/ux/ddg/match-interactions",hn="jaeger/ux/ddg/search",mn="jaeger/ux/ddg/toggle-show-op",vn="jaeger/ux/ddg/upstream-hops-change",gn="jaeger/ux/ddg/upstream-hops-selection",yn="jaeger/ux/ddg/vertex-interactions",bn="clear-operation",En="decrease",On="focus-paths",wn="hide",jn="hide-children",kn="hide-parents",Nn="increase",Sn="set-focus",Dn="set-operation",Tn="set-service",xn="show",Rn="show-children",_n="show-parents",In="view-traces";var Pn=sn("jaeger/ux/ddg/filter");function Cn(e){e?e===ge.Upstream?Jt(yn,kn):Jt(yn,jn):Jt(yn,wn)}function Mn(){Jt(yn,Sn)}var Vn,Ln,An=r(78),Fn=(r(150),r(71)),Bn=r.n(Fn),Hn=(r(105),r(52)),Wn=r.n(Hn),Gn=r(264),Un=r.n(Gn),zn=r(265),qn=r.n(zn),Kn=r(106),Jn=r.n(Kn);function Zn(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.reduce(function(e,t){return t+e},0);if(1===t)return n;var a=Math.max(r,n/t),o=0,i=0;do{o+=e[i++]}while(o+e[i]<a);for(var c=[{width:o,start:i}];e.length-i>=t&&c[c.length-1].width<n/2;)c.push({width:c[c.length-1].width+e[i++],start:i});return Math.min.apply(Math,Object(Re.a)(c.map(function(n){var a=n.width,o=n.start;return Math.max(Zn(e.slice(o),t-1,Math.max(r,a)),a)})))}var Yn=Jn()(function(e,t){for(var r=(Array.isArray(e)?["".concat(e.length," Operations}")]:e.match(Le)||[e]).map(function(e){return t.innerHTML=e,t.getClientRects()[0].width}),n=[],a=1;a<=r.length;a++){var o=Zn(r,a),i=a*_e*Pe;if((!n.length||o<n[n.length-1].width)&&n.push({height:i,width:o}),i>o)break}return n},function(e,t){return"".concat(e,"\t").concat(t.style.fontWeight)}),Qn=function(e){return Math.pow(e,2)},$n=function(e){return Math.sqrt(Qn(e.height)+Qn(e.width))};var Xn=Jn()(function(e,t){return function(e,t){if(!t){for(var r=$n(e[0]),n=e[0],a=n.height,o=n.width,i=1;i<e.length;i++){var c=$n(e[i]);c<r&&(r=c,o=e[i].width,a=e[i].height)}return{radius:r/2,svcWidth:o,svcMarginTop:(r-a)/2}}var s;if(e.forEach(function(e){t.forEach(function(t){var r,n,a=e.height+t.height+Ce,o=(Qn(e.width/2)-Qn(t.width/2))/(2*a)+a/2;n=o<t.height/2?(r=$n(t)/2)-Ce-t.height/2-e.height:o>a-e.height/2?(r=$n(e)/2)-e.height/2:(r=Math.sqrt(Qn(t.width/2)+Qn(o)))-a+o,(!s||s.radius>r)&&(s={radius:r,svcWidth:e.width,opWidth:t.width,svcMarginTop:n})})}),!s)throw new Error("Given 0 svcRects and/or 0 opRects");return s}(Yn(e,Vn||((Vn=document.createElement("span")).style.position="absolute",Vn.style.top="-".concat(_e*Pe,"px"),Vn.style.fontFamily=Ie,Vn.style.fontWeight="500",document.body.appendChild(Vn),Vn)),t?Yn(t,Ln||((Ln=document.createElement("span")).style.position="absolute",Ln.style.top="-".concat(_e*Pe,"px"),Ln.style.fontFamily=Ie,Ln.style.fontWeight="500",document.body.appendChild(Ln),Ln)):void 0)},function(e,t){return"".concat(e,"\t").concat(t)}),ea=(r(995),c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"DdgNode--SetFocusIcon",width:"100",height:"100",viewBox:"0 0 100 100"},c.createElement("g",null,c.createElement("path",{d:"M50.0001 -1L61.0557 22.1383H38.9444L50.0001 -1Z",fill:"currentColor"}),c.createElement("path",{d:"M49.9999 99L38.9443 75.8617L61.0556 75.8617L49.9999 99Z",fill:"currentColor"}),c.createElement("path",{d:"M100 49L76.8617 60.0556L76.8617 37.9444L100 49Z",fill:"currentColor"}),c.createElement("path",{d:"M1.57361e-06 49L23.1383 37.9444L23.1383 60.0556L1.57361e-06 49Z",fill:"currentColor"})))),ta=(r(997),/\W*\w+\W*/g);function ra(e){var t=e.className,r=e.text,n=e.wordRegexp,a=void 0===n?ta:n;if(!r)return"string"===typeof r?r:null;var o=[];a.exec("");for(var i=a.exec(r)||[r];i;)o.push(c.createElement("span",{key:"".concat(r,"-").concat(o.length),className:t},i[0])),i=a.exec(r);return o}ra.defaultProps={className:"BreakableText",wordRegexp:ta};r(84);var na=r(39),aa=r.n(na),oa=r(107),ia=r.n(oa),ca=r(524),sa=r(525),la=r.n(sa),ua=r(576),fa=r(159),da=r(73);function pa(e,t){var r=t.map(function(t,r){return 0!==r&&t?e(r)?c.createElement("mark",{key:"".concat(t+r)},t):t:null}).filter(Boolean);return c.createElement("span",null,r)}var ha=pa.bind(null,function(e){return e%2===0}),ma=pa.bind(null,function(e){return 1===e}),va="(.*?)",ga="(.*)";function ya(e){return"[".concat(e).concat(e.toUpperCase(),"]")}var ba=function(){function e(t){if(Object(p.a)(this,e),this.query=t,this.matchers=void 0,t){var r=t.toLowerCase(),n="".concat(r[0].toUpperCase()).concat(r.slice(1)),a=r.split(""),o="^(".concat(r,")"),i="(\\b".concat(a.map(ya).join(""),"|").concat(n,")"),c=a.map(function(e){return"(\\b".concat(t=e,"|").concat(t.toUpperCase(),")");var t}).join(va),s="(".concat(r,")"),l=a.map(function(e){return"(".concat(e,")")}).join(va);this.matchers=[[new RegExp("".concat(o).concat(ga),"i"),ma],[new RegExp("".concat(va).concat(i).concat(ga)),ha],[new RegExp("".concat(va).concat(c).concat(ga)),ha],[new RegExp("".concat(va).concat(s).concat(ga),"i"),ha],[new RegExp("".concat(va).concat(l).concat(ga),"i"),ha]]}else this.matchers=[]}return Object(h.a)(e,[{key:"highlightMatches",value:function(e){if(!e)return e;for(var t=0;t<this.matchers.length;t++){var r=Object(xe.a)(this.matchers[t],2),n=r[0],a=r[1],o=e.match(n);if(o)return a(o)}return e}}],[{key:"make",value:function(t){return new e(t)}}]),e}(),Ea=Object(da.a)(30)(ba.make);var Oa=Object(da.a)(200)(function(e,t){return e?Ea(e).highlightMatches(t):t});r(999);function wa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var ja=function(e){Object(m.a)(r,e);var t=wa(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isSelected=function(){var t=e.props,r=t.data,n=t.index,a=r.options,o=r.selectedValue;return"string"!==typeof o&&o?o.has(a[n]):a[n]===o},e.onClicked=function(){var t=e.props,r=t.data,n=t.index,a=r.addValues,o=r.multi,i=r.options,c=r.removeValues,s=r.setValue,l=i[n];o&&a&&c?e.isSelected()?c([l]):a([l]):s(l)},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.data,r=e.index,n=e.style,a=(n.width,Object(le.a)(n,["width"])),o=t.focusedIndex,i=t.highlightQuery,s=t.multi,l=t.options,u=this.isSelected(),f=V()("FilteredList--ListItem",{"is-focused":r===o,"is-selected":u,"is-striped":r%2});return c.createElement("div",{className:f,style:a,onClick:this.onClicked,role:"switch","aria-checked":r===o?"true":"false"},s&&c.createElement(Bn.a,{className:"FilteredList--ListItem--Checkbox",checked:u}),Oa(i,l[r]))}}]),r}(c.PureComponent);r(1007);function ka(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Na=function(e){Object(m.a)(r,e);var t=ka(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).inputRef=c.createRef(),e.vlistRef=c.createRef(),e.wrapperRef=c.createRef(),e.state={filterText:"",focusedIndex:null,visibleStartIndex:0,visibleStopIndex:0},e.focusInput=function(){var t=e.inputRef.current;t&&t.focus()},e.getFilteredOptions=function(){var t=e.props.options,r=e.state.filterText;return r?Object(ca.a)(t,r):t},e.setValue=function(t){e.props.setValue(t),e.setState({filterText:"",focusedIndex:null})},e.onKeyDown=function(t){var r=e.state.focusedIndex;switch(t.key){case fa.Key.Escape:var n=e.props.cancel;e.setState({filterText:"",focusedIndex:null}),n&&n();break;case fa.Key.ArrowUp:case fa.Key.ArrowDown:var a,o=e.state,i=o.visibleStartIndex,c=o.visibleStopIndex;if(null==r)a=t.key===fa.Key.ArrowDown?i:c,e.setState({focusedIndex:a});else{var s=t.key===fa.Key.ArrowDown?1:-1,l=e.getFilteredOptions(),u=r+s;a=u>-1?u%l.length:l.length+u,e.setState({focusedIndex:a})}var f=e.vlistRef.current;f&&(a<i+1||a>c-1)&&f.scrollToItem(a);break;case fa.Key.Enter:var d=e.getFilteredOptions();null!==r?e.setValue(d[r]):1===d.length&&e.setValue(d[0])}},e.onListScrolled=ia()(function(t){t.scrollUpdateWasRequested||e.setState({focusedIndex:null})},80),e.onListItemsRendered=ia()(function(t){var r=t.visibleStartIndex,n=t.visibleStopIndex;e.setState({visibleStartIndex:r,visibleStopIndex:n})},80),e.onFilterChanged=function(t){e.setState({filterText:t.target.value,focusedIndex:null})},e}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(){this.focusInput()}},{key:"isMouseWithin",value:function(){var e=this.wrapperRef.current;return null!=e&&e.matches(":hover")}},{key:"getFilteredCheckbox",value:function(e){var t=this.props,r=t.addValues,n=t.removeValues,a=t.options,o=t.value;if(!r||!n)return null;for(var i="string"!==typeof o&&o?o:new Set([o]),s=0,l=!1,u=0;u<e.length;u++){if(i.has(e[u])&&s++,s&&s<=u){l=!0;break}}var f=Boolean(s)&&s===e.length,d="Click to ".concat(f?"unselect":"select"," all ").concat(e.length<a.length?"filtered ":"","options");return c.createElement(aa.a,{title:d},c.createElement(Bn.a,{className:"FilteredList--filterCheckbox",checked:f,disabled:!e.length,onChange:function(t){t.target.checked?r(e.filter(function(e){return!i.has(e)})):n(e)},indeterminate:l}))}},{key:"render",value:function(){var e=this.props,t=e.addValues,r=e.multi,n=e.options,a=e.removeValues,o=e.value,i=this.state,s=i.filterText,l=i.focusedIndex,u=this.getFilteredOptions(),f=r&&this.getFilteredCheckbox(u),d={addValues:t,focusedIndex:l,highlightQuery:s,multi:r,options:u,removeValues:a,selectedValue:o,setValue:this.setValue};return c.createElement("div",{ref:this.wrapperRef},c.createElement("div",{className:"FilteredList--filterWrapper"},f,c.createElement("label",{className:"FilteredList--inputWrapper"},c.createElement(la.a,{className:"FilteredList--filterIcon"}),c.createElement("input",{className:"FilteredList--filterInput",placeholder:"Filter...",onChange:this.onFilterChanged,onKeyDown:this.onKeyDown,ref:this.inputRef,type:"text",value:s}))),c.createElement(ua.a,{key:s,className:"FilteredList--list u-simple-scrollbars",height:Math.min(35*n.length,375),itemCount:u.length,itemData:d,itemSize:35,width:650,overscanCount:25,onItemsRendered:this.onListItemsRendered,onScroll:this.onListScrolled,ref:this.vlistRef},ja))}}]),r}(c.PureComponent),Sa=r(527),Da=r.n(Sa);r(1009);function Ta(e){var t=e.isLarge,r=Object(le.a)(e,["isLarge"]),n=V()("NewWindowIcon",{"is-large":t});return s.a.createElement(Da.a,Object.assign({className:n},r))}Ta.defaultProps={isLarge:!1};var xa=r(1454);function Ra(e,t){var r={};return t.forEach(function(t){var n="".concat(e,"/").concat(t);r[t]=n}),r}var _a=/#\{([^{}]*)\}/g;function Ia(e,t,r){return e.replace(_a,function(e,n){var a=r[n],o=null!=a&&t?t(a):a;return null==o?"":"".concat(o)})}function Pa(e,t){return Ia(e,null,t)}function Ca(e){var t=new Set;return e.replace(_a,function(e,r){return t.add(r),e}),Array.from(t)}var Ma,Va,La,Aa,Fa,Ba=Object(da.a)(10)(function(e){return Pr.fetchDecoration(e)}),Ha=Ra("@jaeger-ui/PATH_AGNOSTIC_DECORATIONS",["GET_DECORATION"]),Wa=Jn()(function(e){var t=bt("pathAgnosticDecorations");if(t)return t.find(function(t){return t.id===e})}),Ga=new Map;var Ua=Object(xa.a)(Object(Nt.a)({},Ha.GET_DECORATION,function(e,t,r){var n=Ga.get(e);if(n){var a=n.get(t);if(a){if(a.has(r))return;a.add(r)}else n.set(t,new Set([r]))}else Ga.set(e,new Map([[t,new Set([r])]]));var o=Wa(e);if(o){var i=!Fa||!Aa;i&&(Aa=new Promise(function(e){Fa=e})),Va=Va?Va+1:1;var c,s,l,u=o.summaryUrl,f=o.opSummaryUrl,d=o.summaryPath,p=o.opSummaryPath;return p&&f&&r?(c=Ba(Pa(f,{service:t,operation:r})),s=Pa(p,{service:t,operation:r}),l="".concat(e,".withOp.").concat(t,".").concat(r)):(c=Ba(Pa(u,{service:t})),s=Pa(d,{service:t}),l="".concat(e,".withoutOp.").concat(t)),c.then(function(e){return Xe()(e,s,"`".concat(s,"` not found in response"))}).catch(function(e){return"Unable to fetch decoration: ".concat(e.message||e)}).then(function(e){if(La||(La={}),tt()(La,l,e),(Ma=Ma?Ma+1:1)===Va){if(!Fa)throw new Error("`resolve` unexpectedly undefined");Fa(La),Ma=Va=La=Aa=Fa=void 0}}),i?Aa:void 0}})).jaegerUi.pathAgnosticDecorations,za=r(528);r(1013);function qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ka=function(e){Object(m.a)(r,e);var t=qa(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.backgroundHue,r=e.decorationHue,n=void 0===r?0:r,a=e.maxValue,o=e.strokeWidth,i=e.text,s=e.value,l=Math.pow(s/a,.25),u=20+Math.ceil(80*l),f=50+Math.ceil(30*(1-l)),d="hsl(".concat(n,", ").concat(u,"%, ").concat(f,"%)"),p=Math.pow((a-s)/a,.25),h=20+Math.ceil(80*p),m=50+Math.ceil(30*(1-p)),v="hsl(".concat(t,", ").concat(h,"%, ").concat(m,"%)");return c.createElement(za.a,{styles:{path:{stroke:d,strokeLinecap:"butt"},text:{fill:d},trail:{stroke:void 0!==t?v:"transparent",strokeLinecap:"butt"}},maxValue:a,strokeWidth:o,text:i,value:s})}}]),r}(c.PureComponent);function Ja(e,t){var r=t.service,n=t.operation,a=$.a.parse(e.router.location.search).decoration,o=Array.isArray(a)?a[0]:a;if(!o)return{};var i=Xe()(e,"pathAgnosticDecorations.".concat(o,".withOp.").concat(r,".").concat(n)),s=Xe()(e,"pathAgnosticDecorations.".concat(o,".withOpMax"));return i||(i=Xe()(e,"pathAgnosticDecorations.".concat(o,".withoutOp.").concat(r)),s=Xe()(e,"pathAgnosticDecorations.".concat(o,".withoutOpMax"))),{decorationProgressbar:"number"===typeof i?c.createElement(Ka,{key:"".concat(r,"\t").concat(n),backgroundHue:120,decorationHue:0,maxValue:s,strokeWidth:Me/Ve*50,text:"".concat(i),value:i}):void 0,decorationID:o,decorationValue:i}}r(1015);function Za(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function Ya(e){var t=e.baseUrl,r=e.density,n=e.extraUrlArgs,a=e.focusPathsThroughVertex,o=e.getGenerationVisibility,i=e.getVisiblePathElems,s=e.hideVertex,l=e.selectVertex,u=e.setOperation,f=e.setViewModifier,d=e.updateGenerationVisibility;return function(e,p,h){var m=e.isFocalNode,v=e.key,g=e.operation,y=e.service;return c.createElement(Xa,{focalNodeUrl:m?null:Oe(Object(ue.a)({density:r,operation:g,service:y},n),t),focusPathsThroughVertex:a,getGenerationVisibility:o,getVisiblePathElems:i,hideVertex:s,isFocalNode:m,isPositioned:Boolean(h),operation:g,selectVertex:l,setOperation:u,setViewModifier:f,service:y,updateGenerationVisibility:d,vertex:e,vertexKey:v})}}function Qa(){var e=2*(Ve+1);return{height:e,width:e}}var $a=function(e){Object(m.a)(r,e);var t=Za(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state={},n.hoveredIndices=new Set,n.focusPaths=function(){var e=n.props;(0,e.focusPathsThroughVertex)(e.vertexKey)},n.handleClick=function(){var e=n.props,t=e.decorationValue,r=e.selectVertex,a=e.vertex;t&&r(a)},n.hideVertex=function(){var e=n.props;(0,e.hideVertex)(e.vertexKey)},n.setOperation=function(e){Jt(yn,Dn),n.props.setOperation(e)},n.updateChildren=function(){var e=n.props;(0,e.updateGenerationVisibility)(e.vertexKey,ge.Downstream)},n.updateParents=function(){var e=n.props;(0,e.updateGenerationVisibility)(e.vertexKey,ge.Upstream)},n.viewTraces=function(){Jt(yn,In);var e=n.props,t=e.vertexKey,r=(0,e.getVisiblePathElems)(t);if(r){for(var a=new Set,o=Be,i=r.map(function(e){return e.memberOf.traceIDs.slice()});i.length;){var c=i.shift();if(c&&c.length){var s=c.pop();if(s&&!a.has(s)){if((o+=He+s.length)>Ae)break;if(a.add(s),a.size>=Fe)break}i.push(c)}}window.open(ze({traceID:Array.from(a)}),"_blank")}},n.onMouseUx=function(e){var t=n.props,r=t.getGenerationVisibility,a=t.getVisiblePathElems,o=t.setViewModifier,i=t.vertexKey,c="mouseover"===e.type;o(c?(a(i)||[]).map(function(e){var t=e.visibilityIdx;return n.hoveredIndices.add(t),t}):Array.from(n.hoveredIndices),he.Hovered,c),c?n.setState({childrenVisibility:r(i,ge.Downstream),parentVisibility:r(i,ge.Upstream)}):n.hoveredIndices.clear()},n.getDecoration(),n}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e){e.decorationID!==this.props.decorationID&&this.getDecoration()}},{key:"componentWillUnmount",value:function(){this.hoveredIndices.size&&(this.props.setViewModifier(Array.from(this.hoveredIndices),he.Hovered,!1),this.hoveredIndices.clear())}},{key:"getDecoration",value:function(){var e=this.props,t=e.decorationID,r=e.getDecoration,n=e.operation,a=e.service;t&&r(t,a,"string"===typeof n?n:void 0)}},{key:"render",value:function(){var e=this.state,t=e.childrenVisibility,r=e.parentVisibility,n=this.props,a=n.decorationProgressbar,o=n.decorationValue,i=n.focalNodeUrl,s=n.isFocalNode,l=n.isPositioned,u=n.operation,f=n.service,d=Xn(f,u),p=d.radius,h=d.svcWidth,m=d.opWidth,v=d.svcMarginTop,g=(a?Ve-Me:Ve)/p,y="translate(".concat(Ve-p,"px, ").concat(Ve-p,"px) scale(").concat(g,")");return c.createElement("div",{className:"DdgNodeContent",onMouseOver:this.onMouseUx,onMouseOut:this.onMouseUx},a,c.createElement("div",{className:V()("DdgNodeContent--core",{"is-decorated":o,"is-focalNode":s,"is-missingDecoration":"string"===typeof o,"is-positioned":l}),onClick:this.handleClick,role:"button",style:{width:"".concat(2*p,"px"),height:"".concat(2*p,"px"),transform:y}},c.createElement("div",{className:"DdgNodeContent--labelWrapper"},c.createElement("h4",{className:"DdgNodeContent--label",style:{marginTop:"".concat(v,"px"),width:"".concat(h,"px")}},c.createElement(ra,{text:f,wordRegexp:Le})),u&&c.createElement("div",{className:"DdgNodeContent--label",style:{paddingTop:"".concat(Ce,"px"),width:"".concat(m,"px")}},Array.isArray(u)?c.createElement(Wn.a,{content:c.createElement(Na,{options:u,value:null,setValue:this.setOperation}),placement:"bottom",title:"Select Operation to Filter Graph"},c.createElement("span",null,"".concat(u.length," Operations"))):c.createElement(ra,{text:u,wordRegexp:Le})))),c.createElement("div",{className:"DdgNodeContent--actionsWrapper"},i&&c.createElement("a",{href:i,className:"DdgNodeContent--actionsItem",onClick:Mn},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},ea),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"Set focus")),c.createElement("a",{className:"DdgNodeContent--actionsItem",onClick:this.viewTraces,role:"button"},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},c.createElement(Ta,null)),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"View traces")),!s&&c.createElement("a",{className:"DdgNodeContent--actionsItem",onClick:this.focusPaths,role:"button"},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},c.createElement(Un.a,null)),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"Focus paths through this node")),!s&&c.createElement("a",{className:"DdgNodeContent--actionsItem",onClick:this.hideVertex,role:"button"},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},c.createElement(qn.a,null)),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"Hide node")),r&&c.createElement("a",{className:"DdgNodeContent--actionsItem",onClick:this.updateParents,role:"button"},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},c.createElement(Bn.a,{checked:r===ve.Full,indeterminate:r===ve.Partial})),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"View Parents")),t&&c.createElement("a",{className:"DdgNodeContent--actionsItem",onClick:this.updateChildren,role:"button"},c.createElement("span",{className:"DdgNodeContent--actionsItemIconWrapper"},c.createElement(Bn.a,{checked:t===ve.Full,indeterminate:t===ve.Partial})),c.createElement("span",{className:"DdgNodeContent--actionsItemText"},"View Children"))))}}]),r}(c.PureComponent);var Xa=Object(E.b)(Ja,function(e){return{getDecoration:Object(ar.b)(Ua,e).getDecoration}})($a);r(1017);function eo(e,t){function r(r){var n=(t.get(r.vertex.key)||0)&he.Hovered,a=(t.get(r.vertex.key)||0)&he.PathHovered,o=V()("DdgNode--VectorBorder",{"is-findMatch":e.has(r.vertex.key),"is-hovered":n,"is-pathHovered":a,"is-focalNode":r.vertex.isFocalNode});return c.createElement("circle",{className:o,vectorEffect:"non-scaling-stroke",r:r.width/2-1,cx:r.width/2,cy:r.width/2})}function n(t){var r=V()({"is-findMatch":e.has(t.vertex.key),"is-focalNode":t.vertex.isFocalNode});return r?c.createElement("div",{className:"DdgNode--HtmlEmphasis ".concat(r)}):null}if(!e.size)return{vectorBorder:r,htmlEmphasis:n,vectorFindColorBand:null};return{htmlEmphasis:n,vectorBorder:r,vectorFindColorBand:function(t){return e.has(t.vertex.key)?c.createElement("circle",{className:"DdgNode--VectorFindEmphasis--colorBand",vectorEffect:"non-scaling-stroke",r:t.width/2-1,cx:t.width/2,cy:t.width/2}):null}}}function to(e,t){return"".concat(e,"\v").concat(t)}function ro(e,t){var r=e.visIdxToPathElem[t];if(!r)throw new Error("Invalid vis ids: ".concat(t));var n=e.pathElemToVertex.get(r);if(!n)throw new Error("Path elem without vertex: ".concat(r));return n.key}var no="focalKey";function ao(e){return 0===e.distance?no:"".concat(e.operation.service.name,"\t").concat(e.operation.name)}function oo(e){return 0===e.distance?no:e.operation.service.name}function io(e){return function(t){return t.focalPath.map(e).join("\n")}}function co(){var e=this,t=this.showOp?ao:oo;switch(this.density){case me.MostConcise:return function(r){var n=r.memberOf,a=n.members[n.focalIdx];if(r.operation.service.name===a.operation.service.name){if(r===a||!e.showOp)return no;var o=e.vertices.get(no);if(!o)throw new Error("No focal vertex found");var i=e.vertexToPathElems.get(o);if(!i)throw new Error("No focal elems found");if(new Set(Array.from(i).map(function(e){return e.operation.name})).has(r.operation.name))return no}return t(r)};case me.UpstreamVsDownstream:return function(e){return e.distance?"".concat(t(e),"; direction=").concat(Math.sign(e.distance)):no};case me.OnePerLevel:return function(e){return e.distance?"".concat(t(e),"; distance=").concat(e.distance):no};case me.PreventPathEntanglement:return io(t);case me.ExternalVsInternal:return function(e){return function(t){return"".concat(io(e)(t)).concat(t.isExternal?"; is-external":"")}}(t);default:throw new Error("Density: ".concat(this.density," has not been implemented, try one of these: ").concat(JSON.stringify(me,null,2)))}}var so=31,lo=Object(da.a)(10)(function(e){var t=[],r=0;return e.split(".").forEach(function(e){for(var n=e.split("~"),a=Object(xe.a)(n,2),o=a[0],i=a[1],c=parseInt(void 0===i?"1":i,36),s=o?parseInt(o,36):0,l=0;s>=1<<l&&l<so;l+=1)if(1<<l&s)for(var u=0;u<c;u+=1)t.push((r+u)*so+l);r+=c}),t});var uo=function(e){var t=[];e.forEach(function(e){var r,n=(r=e,{csvIdx:Math.floor(r/so),visibilityValue:1<<r%so}),a=n.visibilityValue;t[n.csvIdx]|=a});for(var r=[],n=0;n<t.length;n++){var a=t[n],o=r[r.length-1];o&&o[0]===a?o[1]+=1:r.push([a,1])}return r.map(function(e){var t=Object(xe.a)(e,2),r=t[0],n=t[1],a=r?r.toString(36):"",o=1!==n?"".concat("~").concat(n.toString(36)):"";return"".concat(a).concat(o)}).join(".")},fo=function(e){var t=e.ddgModel,r=e.direction,n=e.distance,a=e.prevVisEncoding;if(Math.sign(n)===-1*Math.sign(r))throw new Error("Distance (".concat(n,") and direction (").concat(r,") cannot have opposite signs"));var o,i=t.distanceToPathElems,c=t.visIdxToPathElem;o=a?lo(a).filter(function(e){return c[e]&&Math.sign(c[e].distance)!==r}):[].concat(Object(Re.a)(i.get(-1*r)||[]),Object(Re.a)(i.get(-2*r)||[])).map(function(e){return e.visibilityIdx});for(var s=0;s!==n+r;s+=r){var l,u=i.get(s);if(u)(l=o).push.apply(l,Object(Re.a)(u.map(function(e){return e.visibilityIdx})))}return uo(o)},po=function(){function e(t){var r=this,n=t.ddgModel,a=t.density,o=t.showOp;Object(p.a)(this,e),this.getDerivedViewModifiers=Object(da.a)(3)(function(e,t){var r=this,n=new Map,a=new Map,o=this.getVisibleIndices(e),i=function(e,t){a.set(t,(a.get(t)||0)|e)},c=function(e,t,r){var a=to(t,r);n.set(a,(n.get(a)||0)|e)};return t.forEach(function(e,t){if(o.has(t)&&(i(e,ro(r,t)),e===he.Hovered)){var n=r.visIdxToPathElem[t];if(!n)throw new Error("Invalid vis index: ".concat(t));for(var a=n.memberOf.members,s=null,l=0;l<a.length;l++){var u=a[l];if(o.has(u.visibilityIdx)){var f=ro(r,a[l].visibilityIdx);i(he.PathHovered,f),s&&c(he.PathHovered,s,f),s=f}else s=null}}}),{edges:n,vertices:a}}.bind(this)),this.getPathElemHasher=co,this.density=void 0,this.distanceToPathElems=void 0,this.pathElemToEdge=void 0,this.pathElemToVertex=void 0,this.showOp=void 0,this.vertexToPathElems=void 0,this.vertices=void 0,this.visIdxToPathElem=void 0,this.getGeneration=function(e,t,n){var a=[],o=r.getVertexVisiblePathElems(e,n);return o?(o.forEach(function(e){var r=e.focalSideNeighbor,n=e.memberIdx,o=e.memberOf.members[n+t];o&&o!==r&&a.push(o)}),a):a},this.getGenerationVisibility=function(e,t,n){var a=r.getGeneration(e,t,n);if(!a.length)return null;var o=r.getVisibleIndices(n),i=a.filter(function(e){var t=e.visibilityIdx;return o.has(t)});return i.length===a.length?ve.Full:i.length?ve.Partial:ve.Empty},this.getVisible=Object(da.a)(10)(function(e){var t=new Set,n=new Set;if(r.getVisiblePathElems(e).forEach(function(e){var a=r.pathElemToEdge.get(e);a&&t.add(a);var o=r.pathElemToVertex.get(e);o&&!o.isFocalNode&&n.add(o)}),r.visIdxToPathElem.length){var a=r.vertices.get(no);if(!a)throw new Error("No focal vertex found");var o=r.getVertexVisiblePathElems(no,e);if(o&&o.length)if(r.showOp){var i=Array.from(new Set(o.map(function(e){return e.operation.name}))),c=Object(ue.a)({},a,{operation:1===i.length?i[0]:i});n.add(c)}else n.add(a)}return{edges:Array.from(t),vertices:Array.from(n)}}),this.getHiddenUiFindMatches=Object(da.a)(10)(function(t,n){var a=new Set(r.getVisible(n).vertices),o=Array.from(r.vertices.values()).filter(function(e){return!a.has(e)&&!e.isFocalNode});if(r.visIdxToPathElem.length){var i=r.vertices.get(no);if(!i)throw new Error("No focal vertex found");var c=r.vertexToPathElems.get(i);if(!c)throw new Error("No focal elems found");var s=new Set(r.getVertexVisiblePathElems(no,n)),l=Array.from(c).filter(function(e){return!s.has(e)}).map(function(e){return e.operation.name});l.length&&o.push(Object(ue.a)({},i,{operation:l}))}return e.getUiFindMatches(o,t)}),this.getVisibleUiFindMatches=Object(da.a)(10)(function(t,n){var a=r.getVisible(n).vertices;return e.getUiFindMatches(a,t)}),this.density=a,this.distanceToPathElems=new Map(n.distanceToPathElems),this.pathElemToEdge=new Map,this.pathElemToVertex=new Map,this.showOp=o,this.vertexToPathElems=new Map,this.vertices=new Map,this.visIdxToPathElem=n.visIdxToPathElem.slice();var i=new Set,c=this.getPathElemHasher(),s=new Map;if(this.visIdxToPathElem.forEach(function(e){var t=c(e),n=!e.distance,a=r.showOp?e.operation.name:null;n&&a&&i.add(a);var o=r.vertices.get(t);if(o){var l=r.vertexToPathElems.get(o);if(!l)throw new Error("Vertex exists without pathElems, vertex: ".concat(o));l.add(e)}else o={key:t,isFocalNode:n,service:e.operation.service.name,operation:a},r.vertices.set(t,o),r.vertexToPathElems.set(o,new Set([e]));r.pathElemToVertex.set(e,o);var u=e.focalSideNeighbor;if(u){var f=r.pathElemToVertex.get(u);if(!f)throw new Error("Non-focal pathElem cannot be connected to graph. PathElem: ".concat(e));var d=e.distance>0?f.key:o.key,p=e.distance>0?o.key:f.key,h=to(d,p),m=s.get(h);m||(m={from:d,to:p},s.set(h,m)),r.pathElemToEdge.set(e,m)}}),i.size>1){var l=this.vertices.get(no);l&&(l.operation=Array.from(i))}Object.freeze(this.distanceToPathElems),Object.freeze(this.pathElemToEdge),Object.freeze(this.pathElemToVertex),Object.freeze(this.vertexToPathElems),Object.freeze(this.vertices),Object.freeze(this.visIdxToPathElem)}return Object(h.a)(e,[{key:"getDefaultVisiblePathElems",value:function(){return[].concat(this.distanceToPathElems.get(-2)||[],this.distanceToPathElems.get(-1)||[],this.distanceToPathElems.get(0)||[],this.distanceToPathElems.get(1)||[],this.distanceToPathElems.get(2)||[])}},{key:"getVisiblePathElems",value:function(e){var t=this;return null==e?this.getDefaultVisiblePathElems():lo(e).map(function(e){return t.visIdxToPathElem[e]}).filter(Boolean)}},{key:"getVisibleIndices",value:function(e){return new Set(this.getVisiblePathElems(e).map(function(e){return e.visibilityIdx}))}},{key:"getVisWithoutElems",value:function(e,t){var r=this.getVisibleIndices(t);return e.forEach(function(e){e.externalPath.forEach(function(e){var t=e.visibilityIdx;r.delete(t)})}),uo(Array.from(r))}},{key:"getVisWithoutVertex",value:function(e,t){var r=this.getVertexVisiblePathElems(e,t);if(r&&r.length)return this.getVisWithoutElems(r,t)}},{key:"getVisWithElems",value:function(e,t){var r=this.getVisibleIndices(t);return e.forEach(function(e){return e.focalPath.forEach(function(e){var t=e.visibilityIdx;r.add(t)})}),uo(Array.from(r))}},{key:"getVisWithUpdatedGeneration",value:function(e,t,r){var n=this.getGeneration(e,t,r),a=this.getGenerationVisibility(e,t,r);return n.length&&a?a===ve.Full?{visEncoding:this.getVisWithoutElems(n,r),update:ve.Empty}:{visEncoding:this.getVisWithElems(n,r),update:ve.Full}:null}},{key:"getVisWithVertices",value:function(e,t){var r=this,n=[];return e.forEach(function(e){var t=r.vertices.get(e);if(!t)throw new Error("".concat(e," does not exist in graph"));var a=r.vertexToPathElems.get(t);if(!a)throw new Error("".concat(e," does not exist in graph"));n.push.apply(n,Object(Re.a)(a))}),this.getVisWithElems(n,t)}},{key:"getVertexVisiblePathElems",value:function(e,t){var r=this.vertices.get(e);if(r){var n=this.vertexToPathElems.get(r);if(n&&n.size){var a=this.getVisibleIndices(t);return Array.from(n).filter(function(e){return a.has(e.visibilityIdx)})}}}}],[{key:"getUiFindMatches",value:function(e,t){var r=new Set;if(!t||/^\s+$/.test(t))return r;for(var n=t.trim().toLowerCase().split(/\s+/),a=0;a<e.length;a++)for(var o=e[a],i=o.service,c=o.operation,s=i.toLowerCase(),l=c&&(Array.isArray(c)?c:[c]).map(function(e){return e.toLowerCase()}),u=function(t){if(s.includes(n[t])||l&&l.some(function(e){return e.includes(n[t])}))return r.add(e[a].key),"break"},f=0;f<n.length;f++){if("break"===u(f))break}return r}}]),e}(),ho=Object(da.a)(10)(function(e,t,r){return new po({ddgModel:e,density:r,showOp:t})}),mo={className:"Ddg--Edge"},vo={className:"Ddg--Edge",markerEnd:null};function go(e){return e.size?function(t,r){var n=to(t.edge.from,t.edge.to);return(e.get(n)||0)&he.PathHovered?{markerEnd:"url(#".concat(r.getGlobalId("arrow-hovered"),")"),className:"Ddg--Edge is-pathHovered"}:vo}:mo}r(1019);function yo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var bo={withViewModifiers:[{className:"Ddg--Edges is-withViewModifiers"}],withoutViewModifiers:[An.Digraph.propsFactories.scaleStrokeOpacityStrongest,{className:"Ddg--Edges"}]},Eo={className:"DdgVectorBorders is-withViewModifiers"},Oo=[{localId:"arrow"},{localId:"arrow-hovered",setOnEntry:{className:"Ddg--Arrow is-pathHovered"}}],wo=function(e){Object(m.a)(r,e);var t=yo(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getNodeRenderers=Object(pe.default)(eo),e.getNodeContentRenderer=Object(pe.default)(Ya),e.getSetOnEdge=Object(pe.default)(go),e.layoutManager=new An.LayoutManager({nodesep:.55,ranksep:1.5,rankdir:"TB",shape:"circle",splines:"polyline",useDotEdges:!0}),e.emptyFindSet=new Set,e}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){this.layoutManager.stopAndRelease()}},{key:"render",value:function(){var e=this.props,t=e.baseUrl,r=e.density,n=e.edges,a=e.edgesViewModifiers,o=e.extraUrlArgs,i=e.focusPathsThroughVertex,c=e.getGenerationVisibility,l=e.getVisiblePathElems,u=e.hideVertex,f=e.selectVertex,d=e.setOperation,p=e.setViewModifier,h=e.uiFindMatches,m=e.updateGenerationVisibility,v=e.vertices,g=e.verticesViewModifiers,y=this.getNodeRenderers(h||this.emptyFindSet,g);return s.a.createElement(An.Digraph,{minimap:!0,zoom:!0,minimapClassName:"u-miniMap",layoutManager:this.layoutManager,edges:n,vertices:v,measurableNodesKey:"nodes/content",layers:[{key:"nodes/find-emphasis/vector-color-band",layerType:"svg",renderNode:y.vectorFindColorBand},{key:"nodes/find-emphasis/html",layerType:"html",renderNode:y.htmlEmphasis},{key:"nodes/vector-border",layerType:"svg",renderNode:y.vectorBorder,setOnContainer:g.size?Eo:An.Digraph.propsFactories.scaleStrokeOpacityStrongest},{key:"edges",layerType:"svg",edges:!0,defs:Oo,markerEndId:"arrow",setOnContainer:a.size?bo.withViewModifiers:bo.withoutViewModifiers,setOnEdge:this.getSetOnEdge(a)},{key:"nodes/content",layerType:"html",measurable:!0,measureNode:Qa,renderNode:this.getNodeContentRenderer({baseUrl:t,density:r,extraUrlArgs:o,focusPathsThroughVertex:i,getGenerationVisibility:c,getVisiblePathElems:l,hideVertex:u,selectVertex:f,setOperation:d,setViewModifier:p,updateGenerationVisibility:m})}]})}}]),r}(c.PureComponent),jo=r(529),ko=r.n(jo),No=r(530),So=r.n(No),Do=r(269),To=r.n(Do),xo=r(179),Ro=r.n(xo);r(1021);var _o=c.memo(function(e){var t=e.className,r=e.style,n="Ddg--Header--ChevronDown ".concat(t||"");return c.createElement(Ro.a,{className:n,style:r})});r(1023);function Io(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Po="HopsSelector--Selector",Co=function(e){Object(m.a)(r,e);var t=Io(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).makeBtn=function(t,r){var n=t.distance,a=t.fullness,o=t.suffix,i=void 0===o?"popover-content":o,c=e.props.direction;return s.a.createElement(s.a.Fragment,{key:"".concat(n," ").concat(c," ").concat(i)},Boolean(r)&&s.a.createElement(To.a,{className:"".concat(Po,"--ChevronRight is-").concat(a)}),s.a.createElement("button",{className:"".concat(Po,"--btn is-").concat(a," ").concat(Po,"--").concat(i),type:"button",onClick:function(){return e.handleClick(n)}},Math.abs(n)))},e}return Object(h.a)(r,[{key:"handleClick",value:function(e){var t=this.props,r=t.direction,n=t.furthestFullDistance,a=t.handleClick;a(e,r),function(e,t,r){if(e!==t){var n=Math.abs(t)>Math.abs(e)?Nn:En,a=r===ge.Upstream?[gn,vn]:[dn,fn],o=Object(xe.a)(a,2),i=o[0],c=o[1];Jt(i,"".concat(t)),Jt(c,n)}}(n,e,r)}},{key:"render",value:function(){var e=this.props,t=e.direction,r=e.furthestDistance,n=e.furthestFullness,a=e.handleClick,o=e.hops,i=t===ge.Downstream?"Down":"Up",c="".concat(i,"stream hops"),l=c.toLowerCase();if(o.length<=1)return s.a.createElement("span",{className:Po},"No ",l);var u=s.a.createElement("button",{key:"decrement ".concat(t),disabled:0===r,className:"".concat(Po,"--decrement"),type:"button",onClick:function(){return a(r-t,t)}},"-"),f=s.a.createElement("button",{key:"increment ".concat(t),disabled:r===o[o.length-1].distance,className:"".concat(Po,"--increment"),type:"button",onClick:function(){return a(r+t,t)}},"+"),d=this.makeBtn(Object(ue.a)({},o[o.length-1],{suffix:"delimiter"})),p=this.makeBtn({distance:r,fullness:n,suffix:"furthest"});return s.a.createElement(Wn.a,{arrowPointAtCenter:!0,content:[u].concat(Object(Re.a)(o.map(this.makeBtn)),[f]),placement:"bottom",title:"Visible ".concat(l)},s.a.createElement("span",{className:Po},s.a.createElement(So.a,{className:"".concat(Po,"--AscIcon is-").concat(i)}),c,p,s.a.createElement("span",{className:"".concat(Po,"--delimiter")},"/"),d,s.a.createElement(_o,{className:"ub-ml1"})))}}]),r}(c.PureComponent),Mo=Object(c.memo)(function(e){var t=e.distanceToPathElems,r=e.handleClick,n=e.visEncoding;if(!t)return s.a.createElement("div",null);var a=[],o=[],i=0,c=0,l=ve.Empty,u=0,f=0,d=ve.Empty,p=n&&new Set(lo(n));return t.forEach(function(e,t){var r;if(p){var n=e.filter(function(e){var t=e.visibilityIdx;return p.has(t)});r=n.length===e.length?ve.Full:n.length?ve.Partial:ve.Empty}else r=Math.abs(t)<=2?ve.Full:ve.Empty;t>=0&&a.push({distance:t,fullness:r}),t<=0&&o.push({distance:t,fullness:r}),r!==ve.Empty&&(t>=f&&(f=t,d=r),t<=c&&(c=t,l=r)),r===ve.Full&&(t>=u&&(u=t),t<=i&&(i=t))}),a.sort(function(e,t){return e.distance-t.distance}),o.sort(function(e,t){var r=e.distance;return t.distance-r}),s.a.createElement("div",null,s.a.createElement(Co,{direction:ge.Upstream,handleClick:r,hops:o,furthestDistance:c,furthestFullDistance:i,furthestFullness:l}),s.a.createElement(Co,{direction:ge.Downstream,handleClick:r,hops:a,furthestDistance:f,furthestFullDistance:u,furthestFullness:d}))});r(1025);function Vo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Lo=function(e){Object(m.a)(r,e);var t=Vo(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).listRef=c.createRef(),e.state={popoverVisible:!1},e.clearValue=function(t){if(e.props.required)throw new Error("Cannot clear value of required NameSelector");t.stopPropagation(),e.props.clearValue()},e.setValue=function(t){e.props.setValue(t),e.changeVisible(!1)},e.onBodyClicked=function(){e.listRef.current&&!e.listRef.current.isMouseWithin()&&e.changeVisible(!1)},e.onFilterCancelled=function(){e.changeVisible(!1)},e.onPopoverVisibleChanged=function(t){e.changeVisible(t)},e}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(){this.listRef.current&&this.state.popoverVisible&&this.listRef.current.focusInput()}},{key:"changeVisible",value:function(e){e?window.document.body.addEventListener("click",this.onBodyClicked):window.document.body.removeEventListener("click",this.onBodyClicked),this.setState({popoverVisible:e})}},{key:"render",value:function(){var e=this.props,t=e.label,r=e.options,n=e.placeholder,a=void 0!==n&&n,o=e.required,i=void 0!==o&&o,s=e.value,l=this.state.popoverVisible,u=V()("NameSelector",{"is-active":l,"is-invalid":i&&!s}),f=!0,d=s||"";return!s&&a&&(f=!1,d="string"===typeof a?a:"Select a value\u2026"),c.createElement(Wn.a,{overlayClassName:"NameSelector--overlay u-rm-popover-content-padding",onVisibleChange:this.onPopoverVisibleChanged,placement:"bottomLeft",content:c.createElement(Na,{ref:this.listRef,cancel:this.onFilterCancelled,options:r,value:s,setValue:this.setValue}),trigger:"click",visible:l},c.createElement("h2",{className:u},f&&c.createElement("span",{className:"NameSelector--label"},t,":"),c.createElement(ra,{className:"NameSelector--value",text:d}),c.createElement(Ro.a,{className:"NameSelector--chevron"}),!i&&s&&c.createElement(W.a,{className:"NameSelector--clearIcon",type:"close",onClick:this.clearValue})))}}]),r}(c.PureComponent),Ao=(r(474),r(255)),Fo=r.n(Ao),Bo=(r(1029),c.createElement("svg",{className:"Ddg--LayoutSettings--SettingsIcon",viewBox:"0 0 24 24"},c.createElement("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"})));r(1031);function Ho(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Wo=function(e){return e?"".concat("Ddg--LayoutSettings","--").concat(e):"Ddg--LayoutSettings"},Go=[{option:me.MostConcise,title:"One node per resource",note:"Most conscise",description:"This setting represents each resource one time in the graph, regardless of whether or not it's upstream or downstream of the focal node. This results in the most dense graph layout, possible."},{option:me.UpstreamVsDownstream,title:"Separate upstream from downstream nodes",description:"This setting differentiates upstream nodes from downstream nodes. And, within the each section, a given resource is represented by only one node."},{option:me.OnePerLevel,title:"One resource per level",description:"Represents each resource at most one time for any given level, or number of hops, from the focal node."},{option:me.PreventPathEntanglement,title:"Show paths to the focal node",description:"Each unique path to the focal node, both upstream and downstream, is represented. A resource (e.g. a service or service:operation) can be represented more than once if it is present in more than one path to the focal node."},{option:me.ExternalVsInternal,title:"Separate internal from external nodes",note:"Most detailed",description:"This is similar to the setting, above, but this setting also differentiates internal from external nodes."}],Uo=function(e){Object(m.a)(r,e);var t=Ho(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).updateDensity=function(t){var r=e.props.density,n=t.target.value;r!==n&&(!function(e,t,r){var n,a;e!==t&&(r.forEach(function(r,o){var i=r.option;i===e&&(n=o),i===t&&(a=o)}),void 0===n&&console.warn("Received unknown density ".concat(e)),void 0!==a?void 0!==n&&(Jt(ln,n>a?Nn:En),Jt(un,t)):console.warn("Received unknown density ".concat(t)))}(r,n,Go),e.props.setDensity(n))},e.toggleShowOperations=function(t){var r=t.target.checked;Jt(mn,r?xn:wn),e.props.toggleShowOperations(r)},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.density,n=t.showOperations,a=c.createElement("table",{className:Wo("optionsTable")},c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",{className:Wo("optionGroupTitle")},"Aggregations"),c.createElement("td",null,c.createElement(Bn.a,{className:Wo("option"),checked:n,onChange:this.toggleShowOperations},c.createElement("div",{className:Wo("optionDescription")},c.createElement("h4",null,"Show operations"),c.createElement("p",null,"Controls whether or not the operations are considered when creating nodes for the graph.")))))),c.createElement("tbody",null,Go.map(function(t,n){return c.createElement("tr",{key:t.option},0===n&&c.createElement("td",{className:Wo("optionGroupTitle"),rowSpan:Go.length},"Graph density"),c.createElement("td",null,c.createElement(Fo.a,{className:Wo("option"),onChange:e.updateDensity,value:t.option,checked:r===t.option},c.createElement("div",{className:Wo("optionDescription")},c.createElement("h4",null,t.title),c.createElement("p",null,t.note&&c.createElement("em",{className:Wo("optionNote")},t.note),t.note&&" \u2013 ",t.description)))))})));return c.createElement(Wn.a,{arrowPointAtCenter:!0,content:a,placement:"bottomLeft",title:"Layout settings"},c.createElement("div",{className:Wo()},Bo,"Layout",c.createElement(_o,{className:"ub-ml2"})))}}]),r}(c.PureComponent),zo=r(531),qo=r.n(zo);function Ko(e){var t=e.history,r=e.location,n=e.trackFindFunction,a=e.uiFind,o=$.a.parse(r.search),i=(o.uiFind,Object(le.a)(o,["uiFind"]));n&&n(a),a&&(i.uiFind=a),t.replace(Object(ue.a)({},r,{search:"?".concat($.a.stringify(i))}))}function Jo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Zo=function(e){Object(m.a)(r,e);var t=Jo(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={ownInputValue:void 0},e.updateUiFindQueryParam=ia()(function(t){var r=e.props,n=r.history,a=r.location,o=r.uiFind,i=r.trackFindFunction;t!==o&&(o||t)&&Ko({location:a,history:n,trackFindFunction:i,uiFind:t})},250),e.clearUiFind=function(){e.updateUiFindQueryParam(),e.updateUiFindQueryParam.flush()},e.handleInputBlur=function(){e.updateUiFindQueryParam.flush(),e.setState({ownInputValue:void 0})},e.handleInputChange=function(t){var r=t.target.value;e.updateUiFindQueryParam(r),e.setState({ownInputValue:r})},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.allowClear,r=e.forwardedRef,n=e.inputProps,a=qo()(this.state.ownInputValue)?this.state.ownInputValue:this.props.uiFind,o=c.createElement(c.Fragment,null,t&&a&&a.length&&c.createElement(W.a,{type:"close",onClick:this.clearUiFind}),n.suffix);return c.createElement(Y.a,Object.assign({autosize:null,placeholder:"Find..."},n,{onBlur:this.handleInputBlur,onChange:this.handleInputChange,ref:r,suffix:o,value:a}))}}]),r}(c.PureComponent);function Yo(e){var t=$.a.parse(e.router.location.search).uiFind;return{uiFind:Array.isArray(t)?t.join(" "):t}}Zo.defaultProps={forwardedRef:void 0,inputProps:{},trackFindFunction:void 0,uiFind:void 0};var Qo=Object(A.a)(Object(E.b)(Yo)(Zo));r(1035);function $o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Xo=function(e){Object(m.a)(r,e);var t=$o(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._uiFindInput=c.createRef(),e.focusUiFindInput=function(){e._uiFindInput.current&&e._uiFindInput.current.focus()},e.getUiFindInfo=function(){var t=e.props,r=t.hiddenUiFindMatches,n=t.uiFindCount;if(void 0===n)return null;var a=!1,o=null,i=n?"All matches are visible":"No matches";if(r&&r.size){var s=r.size;a=!0,i="Click to view ".concat(s," hidden match").concat(1!==s?"es":""),o=c.createElement("span",{className:"DdgHeader--uiFindInfo--hidden"},s,c.createElement(qn.a,{className:"DdgHeader--uiFindInfo--icon"}))}return c.createElement(aa.a,{overlayClassName:"DdgHeader--uiFindInfo--tooltip",placement:"topRight",title:i},c.createElement("span",null,c.createElement("button",{className:"DdgHeader--uiFindInfo",disabled:!a,onClick:e.handleInfoClick,type:"button"},n,(0!==n||a)&&c.createElement(ko.a,{className:"DdgHeader--uiFindInfo--icon"}),o)))},e.setOperation=function(t){Jt(hn,Dn),e.props.setOperation(t)},e.handleInfoClick=function(){Jt(pn,xn);var t=e.props,r=t.hiddenUiFindMatches,n=t.showVertices;r&&n(Array.from(r))},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.clearOperation,r=e.density,n=e.distanceToPathElems,a=e.operation,o=e.operations,i=e.service,s=e.services,l=e.setDensity,u=e.setDistance,f=e.setService,d=e.showOperations,p=e.showParameters,h=e.toggleShowOperations,m=e.visEncoding;return c.createElement("header",{className:"DdgHeader"},p&&c.createElement("div",{className:"DdgHeader--paramsHeader"},c.createElement(Lo,{label:"Service",placeholder:"Select a service\u2026",value:i||null,setValue:f,required:!0,options:s||[]}),i&&c.createElement(Lo,{clearValue:t,label:"Operation",placeholder:"Filter by operation\u2026",value:a||null,setValue:this.setOperation,options:o||[]})),c.createElement("div",{className:"DdgHeader--controlHeader"},c.createElement(Uo,{density:r,setDensity:l,showOperations:d,toggleShowOperations:h}),c.createElement(Mo,{distanceToPathElems:n,handleClick:u,visEncoding:m}),c.createElement("div",{className:"DdgHeader--findWrapper"},c.createElement("div",{className:"DdgHeader--uiFind",role:"button",onClick:this.focusUiFindInput},c.createElement(W.a,{className:"DdgHeader--uiFindSearchIcon",type:"search"}),c.createElement(Qo,{allowClear:!0,forwardedRef:this._uiFindInput,inputProps:{className:"DdgHeader--uiFindInput"},trackFindFunction:Pn}),this.getUiFindInfo()))))}}]),r}(c.PureComponent);Xo.defaultProps={showParameters:!0};r(169);var ei=r(77),ti=r.n(ei),ri=(r(477),r(270)),ni=r.n(ri),ai=r(532),oi=r.n(ai),ii=r(533),ci=r.n(ii),si=r(534),li=r.n(si),ui=r(535),fi=r.n(ui);function di(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function pi(e){var t={},r=[];return e.forEach(function(e){!function(e){return Boolean(e.spanIDs&&e.spanIDs.length)}(e)?r.push(e.traceID):t[e.traceID]=e.spanIDs.join(" ")}),{spanLinks:t,traceID:r}}var hi=function(e){Object(m.a)(r,e);var t=di(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.examples,r=e.includeText;return t&&t.length?c.createElement("a",{href:ze(pi(t)),target:"_blank",rel:"noopener noreferrer"},r&&"Examples ",c.createElement(Ta,null)):null}}]),r}(c.PureComponent),mi=(r(67),r(27)),vi=r.n(mi),gi=r(536),yi=r.n(gi),bi=r(537),Ei=r.n(bi),Oi=r(538),wi=r.n(Oi);r(1047);function ji(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var ki=function(e){Object(m.a)(r,e);var t=ji(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).cancelled=!1,e.selected=[],e.cancel=function(){e.cancelled=!0,e.props.setSelectedKeys(e.selected)},e}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.confirm,n=t.selectedKeys;if(n.length===e.selectedKeys.length){var a=new Set(e.selectedKeys);n.every(function(e){return a.has(e)})&&(this.selected=n)}this.cancelled&&(this.cancelled=!1,r())}},{key:"render",value:function(){var e=this.props,t=e.clearFilters,r=void 0===t?function(){}:t,n=e.confirm,a=e.options,o=e.selectedKeys,i=e.setSelectedKeys,s=new Set;return o.forEach(function(e){"string"===typeof e&&s.add(e)}),c.createElement("div",null,c.createElement(Na,{addValues:function(e){i([].concat(Object(Re.a)(o),Object(Re.a)(e)))},multi:!0,options:Array.from(a),removeValues:function(e){var t=new Set(e);i(o.filter(function(e){return!t.has(e)}))},setValue:function(e){i([e])},value:s}),c.createElement("div",{className:"DetailTableDropdown--Footer"},c.createElement(aa.a,{overlayClassName:"DetailTableDropdown--Tooltip",title:"Remove filter from this column"},c.createElement(vi.a,{className:"DetailTableDropdown--Btn Clear",onClick:r},c.createElement(Ei.a,{size:18}),"Clear Filter")),c.createElement("div",{className:"DetailTableDropdown--Footer--CancelConfirm"},c.createElement(aa.a,{overlayClassName:"DetailTableDropdown--Tooltip",title:"Cancel changes to this column's filter"},c.createElement(vi.a,{className:"DetailTableDropdown--Btn Cancel",onClick:this.cancel},c.createElement(wi.a,{size:20}),"Cancel")),c.createElement(aa.a,{overlayClassName:"DetailTableDropdown--Tooltip",title:c.createElement("div",{className:"DetailTableDropdown--Tooltip--Body"},c.createElement("span",null,"Apply changes to this column","'","s filter"),c.createElement("span",null,"Same effect as clicking outside the dropdown"))},c.createElement(vi.a,{className:"DetailTableDropdown--Btn Apply",onClick:n},c.createElement(yi.a,{size:18}),"Apply")))))}}]),r}(c.PureComponent),Ni=function(e,t){return function(r){return c.createElement(ki,Object.assign({},r,{key:e,options:t}))}},Si=function(e){return function(t){var r=t[e];if(!r||"object"!==typeof r||Array.isArray(r))return null;var n=r.styling;return de()(n)?null:{style:n}}},Di=function(e){return function(t,r){var n=r[e];return"object"!==typeof n||Array.isArray(n)||"string"!==typeof n.value?n===t:n.value===t}},Ti=function(e){return e&&"object"===typeof e?Array.isArray(e)?c.createElement(hi,{examples:e}):e.linkTo?c.createElement("a",{href:e.linkTo,target:"_blank",rel:"noopener noreferrer"},e.value):e.value:e},xi=function(e){return function(t,r){var n,a=t[e];n=Array.isArray(a)?a.length:"object"===typeof a&&"string"===typeof a.value?a.value:a;var o,i=r[e];return n<(o=Array.isArray(i)?i.length:"object"===typeof i&&"string"===typeof i.value?i.value:i)?-1:o<n?1:0}},Ri=function(e){var t=e.defs,r=e.rows;return t.map(function(e){var t,n,a,o,i=!0;"string"===typeof e?n=o=t=e:(n=o=t=e.key,e.label&&(o=e.label),e.styling&&(a=e.styling),e.preventSort&&(i=!1));var s=new Set;return r.forEach(function(e){var r=e[t];"string"===typeof r&&r?s.add(r):"object"!==typeof r||Array.isArray(r)||"string"!==typeof r.value||s.add(r.value)}),{dataIndex:t,key:n,title:o,filterDropdown:Boolean(s.size)&&Ni(t,s),filterIcon:function(e){return e?c.createElement(fi.a,null):c.createElement(W.a,{type:"filter"})},onCell:Si(t),onHeaderCell:function(){return{style:a}},onFilter:Di(t),render:Ti,sorter:i&&xi(t)}})},_i=function(e){return JSON.stringify(e,function(t,r){return r===e?r:Array.isArray(r)?JSON.stringify(r):"object"===typeof r?"string"===typeof r.value?JSON.stringify(r):r.value.key||"Unknown":r})};function Ii(e){var t=e.columnDefs,r=e.details,n=t?t.slice():[],a=new Set(n.map(function(e){return"string"===typeof e?e:e.key}));return r.forEach(function(e){Object.keys(e).forEach(function(e){a.has(e)||(a.add(e),n.push(e))})}),c.createElement(ti.a,{key:"table",size:"middle",columns:Ri({defs:n,rows:r}),dataSource:r,pagination:!1,rowKey:_i})}r(1065);var Pi=r(359),Ci=r.n(Pi),Mi=Ci.a.Item;function Vi(e){var t=e.details;return c.createElement(Ci.a,{dataSource:t,renderItem:function(e){return c.createElement(Mi,null,c.createElement("span",null,e))}})}r(1069);function Li(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ai,Fi=function(e){Object(m.a)(r,e);var t=Li(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state=void 0,n.toggleCollapse=function(){n.setState(function(e){return{collapsed:!e.collapsed}})},n.state={collapsed:Boolean(e.collapsible)},n}return Object(h.a)(r,[{key:"renderDetails",value:function(){var e=this.props,t=e.columnDefs,r=e.details;return Array.isArray(r)?0===r.length?null:"string"===typeof r[0]?c.createElement(Vi,{details:r}):c.createElement(Ii,{columnDefs:t,details:r}):c.createElement("span",null,r)}},{key:"render",value:function(){var e=this.state.collapsed,t=this.props,r=t.className,n=t.collapsible,a=t.description,o=t.header;return c.createElement("div",{className:V()("DetailsCard",r)},c.createElement("div",{className:"DetailsCard--ButtonHeaderWrapper"},n&&c.createElement("button",{onClick:this.toggleCollapse,type:"button",className:V()("DetailsCard--Collapser",{"is-collapsed":e})},c.createElement(li.a,null)),c.createElement("div",{className:"DetailsCard--HeaderWrapper"},c.createElement("span",{className:"DetailsCard--Header"},o),a&&c.createElement("p",{className:"DetailsCard--Description"},a))),c.createElement("div",{className:V()("DetailsCard--DetailsWrapper",{"is-collapsed":e})},this.renderDetails()))}}]),r}(c.PureComponent);!function(e){e.DragEnd="DragEnd",e.DragMove="DragMove",e.DragStart="DragStart",e.MouseEnter="MouseEnter",e.MouseLeave="MouseLeave",e.MouseMove="MouseMove"}(Ai||(Ai={}));var Bi=Ai,Hi=0,Wi=function(){function e(t){var r=this,n=t.getBounds,a=t.tag,o=t.resetBoundsOnResize,i=void 0===o||o,c=Object(le.a)(t,["getBounds","tag","resetBoundsOnResize"]);Object(p.a)(this,e),this._bounds=void 0,this._isDragging=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0,this._resetBoundsOnResize=void 0,this.getBounds=void 0,this.tag=void 0,this.handleMouseEnter=void 0,this.handleMouseMove=void 0,this.handleMouseLeave=void 0,this.handleMouseDown=void 0,this.resetBounds=function(){r._bounds=void 0},this._handleMinorMouseEvent=function(e){var t=e.button,n=e.clientX,a=e.type;if(!r._isDragging&&t===Hi){var o,i=null;if("mouseenter"===a)i=Bi.MouseEnter,o=r._onMouseEnter;else if("mouseleave"===a)i=Bi.MouseLeave,o=r._onMouseLeave;else{if("mousemove"!==a)throw new Error("invalid event type: ".concat(a));i=Bi.MouseMove,o=r._onMouseMove}if(o){var c=r._getPosition(n);o({event:e,type:i,value:c.value,x:c.x,manager:r,tag:r.tag})}}},this._handleDragEvent=function(e){var t,n=e.button,a=e.clientX,o=e.type,i=null;if("mousedown"===o){if(r._isDragging||n!==Hi)return;window.addEventListener("mousemove",r._handleDragEvent),window.addEventListener("mouseup",r._handleDragEvent);var c=Xe()(document,"body.style");c&&(c.userSelect="none"),r._isDragging=!0,i=Bi.DragStart,t=r._onDragStart}else if("mousemove"===o){if(!r._isDragging)return;i=Bi.DragMove,t=r._onDragMove}else{if("mouseup"!==o)throw new Error("invalid event type: ".concat(o));if(!r._isDragging)return;r._stopDragging(),i=Bi.DragEnd,t=r._onDragEnd}if(t){var s=r._getPosition(a);t({event:e,type:i,value:s.value,x:s.x,manager:r,tag:r.tag})}},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=n,this.tag=a,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(i),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=c.onMouseEnter,this._onMouseLeave=c.onMouseLeave,this._onMouseMove=c.onMouseMove,this._onDragStart=c.onDragStart,this._onDragMove=c.onDragMove,this._onDragEnd=c.onDragEnd}return Object(h.a)(e,[{key:"_getBounds",value:function(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}},{key:"_getPosition",value:function(e){var t=this._getBounds(),r=t.clientXLeft,n=t.maxValue,a=t.minValue,o=t.width,i=e-r,c=i/o;return null!=a&&c<a?(c=a,i=a*o):null!=n&&c>n&&(c=n,i=n*o),{value:c,x:i}}},{key:"_stopDragging",value:function(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);var e=Xe()(document,"body.style");e&&(e.userSelect=null),this._isDragging=!1}},{key:"isDragging",value:function(){return this._isDragging}},{key:"dispose",value:function(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}]),e}();r(1071);function Gi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ui=function(e){Object(m.a)(r,e);var t=Gi(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state=void 0,n._dragManager=void 0,n._rootElm=void 0,n._setRootElm=function(e){n._rootElm=e},n._getDraggingBounds=function(){if(!n._rootElm)throw new Error("invalid state");var e=n._rootElm.getBoundingClientRect(),t=e.left,r=e.width,a=n.props.rightSide,o=n.props,i=o.min,c=o.max;if(a){var s=[1-c,1-i];i=s[0],c=s[1]}return{clientXLeft:t,width:r,maxValue:c,minValue:i}},n._handleDragUpdate=function(e){var t=e.value,r=n.props.rightSide?1-t:t;n.setState({dragPosition:r})},n._handleDragEnd=function(e){var t=e.manager,r=e.value;t.resetBounds(),n.setState({dragPosition:null});var a=n.props.rightSide?1-r:r;n.props.onChange(a)},n._dragManager=new Wi({getBounds:n._getDraggingBounds,onDragEnd:n._handleDragEnd,onDragMove:n._handleDragUpdate,onDragStart:n._handleDragUpdate}),n._rootElm=void 0,n.state={dragPosition:null},n}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){this._dragManager.dispose()}},{key:"render",value:function(){var e,t="",r=this.props,n=r.position,a=r.rightSide,o=this.state.dragPosition,i={left:"".concat(100*n,"%")};this._dragManager.isDragging()&&this._rootElm&&null!=o?(t=V()({isDraggingLeft:o<n,isDraggingRight:o>n}),"".concat(100*o,"%"),e={left:"".concat(100*Math.min(n,o),"%"),right:"calc(".concat(100*(1-Math.max(n,o)),"% - 1px)")}):e=i;return c.createElement("div",{className:"VerticalResizer ".concat(t," ").concat(a?"is-flipped":""),ref:this._setRootElm},c.createElement("div",{className:"VerticalResizer--gripIcon",style:i}),c.createElement("div",{"aria-hidden":!0,className:"VerticalResizer--dragger",onMouseDown:this._dragManager.handleMouseDown,style:e}))}}]),r}(c.PureComponent);r(1073);function zi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var qi=function(e){Object(m.a)(r,e);var t=zi(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.onResize=function(t){e.setState({width:t})},e}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this.fetchDetails()}},{key:"componentDidUpdate",value:function(e){e.operation===this.props.operation&&e.service===this.props.service&&e.decorationSchema===this.props.decorationSchema||(this.setState({details:void 0,detailsErred:!1,detailsLoading:!1}),this.fetchDetails())}},{key:"fetchDetails",value:function(){var e,t,r,n=this,a=this.props,o=a.decorationSchema,i=o.detailUrl,c=o.detailPath,s=o.detailColumnDefPath,l=o.opDetailUrl,u=o.opDetailPath,f=o.opDetailColumnDefPath,d=a.operation,p=a.service,h=d&&!Array.isArray(d)?d:void 0;l&&u&&h?(e=Pa(l,{service:p,operation:h}),t=Pa(u,{service:p,operation:h}),r=f&&Pa(f,{service:p,operation:h})):i&&c&&(e=Pa(i,{service:p}),t=Pa(c,{service:p}),r=s&&Pa(s,{service:p})),e&&t&&(this.setState({detailsLoading:!0}),Pr.fetchDecoration(e).then(function(e){var a=!1,o=Xe()(e,t);void 0===o&&(o="`".concat(t,"` not found in response"),a=!0);var i=r?Xe()(e,r,[]):[];n.setState({columnDefs:i,details:o,detailsErred:a,detailsLoading:!1})}).catch(function(e){n.setState({details:"Unable to fetch decoration: ".concat(e.message||e),detailsErred:!0,detailsLoading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.decorationProgressbar,r=e.decorationSchema,n=e.decorationValue,a=e.operation,o=e.service,i=r.detailLink,s=this.state.width,l=void 0===s?.3:s,u=a&&!Array.isArray(a)?a:void 0;return c.createElement("div",{className:"Ddg--DetailsPanel",style:{width:"".concat(100*l,"vw")}},c.createElement("div",{className:"Ddg--DetailsPanel--SvcOpHeader"},c.createElement(ra,{text:o}),u&&c.createElement(ra,{text:"::".concat(u)})),c.createElement("div",{className:"Ddg--DetailsPanel--DecorationHeader"},c.createElement("span",null,Pa(r.name,{service:o,operation:u})),i&&c.createElement(aa.a,{arrowPointAtCenter:!0,title:"More Info"},c.createElement("a",{className:"Ddg--DetailsPanel--DetailLink",href:Pa(i,{service:o,operation:u}),target:"_blank",rel:"noreferrer noopener"},c.createElement(Ta,null)))),t?c.createElement("div",{className:"Ddg--DetailsPanel--PercentCircleWrapper"},t):c.createElement("span",{className:"Ddg--DetailsPanel--errorMsg"},n),this.state.detailsLoading&&c.createElement("div",{className:"Ddg--DetailsPanel--LoadingWrapper"},c.createElement(jr,{className:"Ddg--DetailsPanel--LoadingIndicator"})),this.state.details&&c.createElement(Fi,{className:"Ddg--DetailsPanel--DetailsCard ".concat(this.state.detailsErred?"is-error":""),columnDefs:this.state.columnDefs,details:this.state.details,header:"Details"}),c.createElement(Ui,{max:.8,min:.1,onChange:this.onResize,position:l,rightSide:!0}))}}]),r}(c.PureComponent),Ki=Object(E.b)(Ja)(qi),Ji="jaeger/ux/ddg/decoration-selection",Zi="jaeger/ux/ddg/decoration-view-details",Yi="clear",Qi="set";function $i(e){e?Jt(Ji,Qi,e):Jt(Ji,Yi)}function Xi(e){Jt(Zi,e?Qi:Yi)}r(1075);function ec(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var tc,rc=function(e){Object(m.a)(r,e);var t=ec(r);function r(e){var n;Object(p.a)(this,r),(n=t.call(this,e)).decorations=void 0,n.clearSelected=function(){Xi(),n.props.clearSelected()},n.selectDecoration=function(e){$i(e),n.props.selectDecoration(e)},n.openInfoModal=function(){ni.a.info({content:c.createElement(ti.a,{columns:[{dataIndex:"acronym",key:"acronym",title:"Acronym"},{dataIndex:"name",key:"name",title:"Name"}],dataSource:n.decorations,rowKey:function(e){return e.id}}),maskClosable:!0,title:"Decoration Options",width:"60vw"})};var a=e.selectedDecoration,o=e.selectedVertex;return a&&$i(a),o&&Xi(o),n.decorations=bt("pathAgnosticDecorations"),n}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e){e.selectedVertex!==this.props.selectedVertex&&Xi(this.props.selectedVertex)}},{key:"render",value:function(){var e=this;if(!this.decorations)return null;var t=this.props,r=t.selectedDecoration,n=t.selectedVertex,a=this.decorations.find(function(e){return e.id===r});return c.createElement("div",{className:"Ddg--SidePanel"},c.createElement("div",{className:"Ddg--SidePanel--Btns"},c.createElement("button",{className:"Ddg--SidePanel--closeBtn ".concat(n&&a?"":"is-hidden"),type:"button",onClick:this.clearSelected},c.createElement(oi.a,null)),c.createElement("div",{className:"Ddg--SidePanel--DecorationBtns"},this.decorations.map(function(t){var n=t.acronym,a=t.id;return c.createElement("button",{key:a,className:"Ddg--SidePanel--decorationBtn ".concat(a===r?"is-selected":""),type:"button",onClick:function(){return e.selectDecoration(a)}},n)}),c.createElement("button",{key:"clearBtn",className:"Ddg--SidePanel--decorationBtn",type:"button",onClick:function(){return e.selectDecoration()}},"Clear")),c.createElement("button",{className:"Ddg--SidePanel--infoBtn",onClick:this.openInfoModal,type:"button"},c.createElement(ci.a,null))),c.createElement("div",{className:"Ddg--SidePanel--Details ".concat(n&&a?".is-expanded":"")},n&&a&&c.createElement(Ki,{decorationSchema:a,operation:n.operation,service:n.service})))}}]),r}(c.PureComponent),nc=r(118),ac=r.n(nc),oc=Ra("@jaeger-ui/DEEP-DEPENDENCY-GRAPH",["ADD_VIEW_MODIFIER","CLEAR_VIEW_MODIFIERS_FROM_INDICES","REMOVE_VIEW_MODIFIER","REMOVE_VIEW_MODIFIER_FROM_INDICES"]),ic=ac.a,cc=ac.a,sc=ac.a,lc=ac.a,uc=Object(xa.a)((tc={},Object(Nt.a)(tc,oc.ADD_VIEW_MODIFIER,ic),Object(Nt.a)(tc,oc.CLEAR_VIEW_MODIFIERS_FROM_INDICES,cc),Object(Nt.a)(tc,oc.REMOVE_VIEW_MODIFIER,sc),Object(Nt.a)(tc,oc.REMOVE_VIEW_MODIFIER_FROM_INDICES,lc),tc)).jaegerUi.deepDependencyGraph;function fc(e){var t=e.service,r=e.operation,n=void 0===r?"*":r,a=e.start,o=e.end;return"".concat(t,"\n").concat(n,"\n").concat(a,"\n").concat(o)}r(1079);function dc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var pc=function(e){Object(m.a)(r,e);var t=dc(r);function r(e){var n;Object(p.a)(this,r),(n=t.call(this,e)).state={},n.clearOperation=function(){Jt(hn,bn),n.updateUrlState({operation:void 0})},n.focusPathsThroughVertex=function(e){var t,r=n.getVisiblePathElems(e);if(r){Jt(yn,On);var a=(t=[]).concat.apply(t,Object(Re.a)(r.map(function(e){return e.memberOf.members.map(function(e){return e.visibilityIdx})})));n.updateUrlState({visEncoding:uo(a)})}},n.getGenerationVisibility=function(e,t){var r=n.props,a=r.graph,o=r.urlState;return a?a.getGenerationVisibility(e,t,o.visEncoding):null},n.getVisiblePathElems=function(e){var t=n.props,r=t.graph,a=t.urlState;if(r)return r.getVertexVisiblePathElems(e,a.visEncoding)},n.hideVertex=function(e){var t=n.props,r=t.graph,a=t.urlState;if(r){var o=r.getVisWithoutVertex(e,a.visEncoding);o&&(Cn(),n.updateUrlState({visEncoding:o}))}},n.setDecoration=function(e){return n.updateUrlState({decoration:e})},n.setDensity=function(e){return n.updateUrlState({density:e})},n.setDistance=function(e,t){var r=n.props.graphState,a=n.props.urlState.visEncoding;if(r&&r.state===st.DONE){var o=r.model;n.updateUrlState({visEncoding:fo({ddgModel:o,direction:t,distance:e,prevVisEncoding:a})})}},n.setOperation=function(e){n.updateUrlState({operation:e,visEncoding:void 0})},n.setService=function(e){var t=n.props,r=t.fetchServiceServerOps,a=t.serverOpsForService;a&&!Reflect.has(a,e)&&r&&r(e),n.updateUrlState({operation:void 0,service:e,visEncoding:void 0}),Jt(hn,Tn)},n.setViewModifier=function(e,t,r){var a=n.props,o=a.addViewModifier,i=a.graph,c=a.removeViewModifierFromIndices,s=a.urlState,l=r?o:c,u=s.service,f=s.operation;l&&i&&u&&l({operation:f,service:u,viewModifier:t,visibilityIndices:e,end:0,start:0})},n.selectVertex=function(e){n.setState({selectedVertex:e})},n.showVertices=function(e){var t=n.props,r=t.graph,a=t.urlState.visEncoding;r&&n.updateUrlState({visEncoding:r.getVisWithVertices(e,a)})},n.toggleShowOperations=function(e){return n.updateUrlState({showOp:e})},n.updateGenerationVisibility=function(e,t){var r=n.props,a=r.graph,o=r.urlState;if(a){var i=a.getVisWithUpdatedGeneration(e,t,o.visEncoding);if(i){var c=i.visEncoding;i.update===ve.Empty?Cn(t):function(e){e===ge.Upstream?Jt(yn,_n):Jt(yn,Rn)}(t),n.updateUrlState({visEncoding:c})}}},n.updateUrlState=function(e){var t=n.props,r=t.baseUrl,a=t.extraUrlArgs,o=t.graphState,i=t.history,c=t.uiFind,s=t.urlState,l=Object(ue.a)({uiFind:c},s,e,a),u=Xe()(o,"model.hash");u&&(l.hash=u),i.push(Oe(l,r))},r.fetchModelIfStale(e);var a=e.fetchServices,o=e.fetchServiceServerOps,i=e.serverOpsForService,c=e.services,s=e.urlState.service;return!c&&a&&a(),s&&i&&!Reflect.has(i,s)&&o&&o(s),n}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(){r.fetchModelIfStale(this.props)}},{key:"render",value:function(){var e=this.state.selectedVertex,t=this.props,r=t.baseUrl,n=t.extraUrlArgs,a=t.graph,o=t.graphState,i=t.serverOpsForService,s=t.services,l=t.showOp,u=t.uiFind,f=t.urlState,d=t.showSvcOpsHeader,p=f.density,h=f.operation,m=f.service,v=f.visEncoding,g=o&&o.state===st.DONE?o.model.distanceToPathElems:void 0,y=a&&a.getVisibleUiFindMatches(u,v),b=a&&a.getHiddenUiFindMatches(u,v),E=null,O="";if(o)if(o.state===st.DONE&&a){var w=a.getVisible(v),j=w.edges,k=w.vertices,N=o.viewModifiers,S=a.getDerivedViewModifiers(v,N),D=S.edges,T=S.vertices;if(k.length>1)O="is-horizontal",E=c.createElement(c.Fragment,null,c.createElement(wo,{key:JSON.stringify({density:p,showOp:l,service:m,operation:h,visEncoding:v}),baseUrl:r,density:p,edges:j,edgesViewModifiers:D,extraUrlArgs:n,focusPathsThroughVertex:this.focusPathsThroughVertex,getGenerationVisibility:this.getGenerationVisibility,getVisiblePathElems:this.getVisiblePathElems,hideVertex:this.hideVertex,selectVertex:this.selectVertex,setOperation:this.setOperation,setViewModifier:this.setViewModifier,uiFindMatches:y,updateGenerationVisibility:this.updateGenerationVisibility,vertices:k,verticesViewModifiers:T}),c.createElement(rc,{clearSelected:this.selectVertex,selectDecoration:this.setDecoration,selectedDecoration:f.decoration,selectedVertex:e}));else if(o.model.distanceToPathElems.has(-1)||o.model.distanceToPathElems.has(1))E=c.createElement(c.Fragment,null,c.createElement("h1",{className:"Ddg--center"},"There is nothing visible to show"),c.createElement("p",{className:"Ddg--center"},"Select at least one hop to view"));else{var R=ze({lookback:bt("search.maxLookback.value"),minDuration:"0ms",operation:h,service:m,tags:'{"span.kind":"server"}'});E=c.createElement(c.Fragment,null,c.createElement("h1",{className:"Ddg--center"},"There are no dependencies"),c.createElement("p",{className:"Ddg--center"},"No traces were found that contain ",m,h&&":".concat(h)," and any other service where span.kind is \u2018server\u2019."),c.createElement("p",{className:"Ddg--center"},c.createElement("a",{href:R},"Confirm by searching")))}}else E=o.state===st.LOADING?c.createElement(jr,{centered:!0,className:"u-mt-vast"}):o.state===st.ERROR?c.createElement(c.Fragment,null,c.createElement(x,{error:o.error,className:"ub-m4"}),c.createElement("p",{className:"Ddg--center"},"If you are using an adblocker, whitelist Jaeger and retry.")):c.createElement(c.Fragment,null,c.createElement("h1",{className:"Ddg--center"},"Unknown graphState:"),c.createElement("p",{className:"Ddg--center"},JSON.stringify(o,null,2)));else E=c.createElement("h1",null,"Enter query above");return c.createElement("div",{className:"Ddg"},c.createElement("div",null,c.createElement(Xo,{clearOperation:this.clearOperation,density:p,distanceToPathElems:g,hiddenUiFindMatches:b,operation:h,operations:i&&i[m||""],service:m,services:s,setDensity:this.setDensity,setDistance:this.setDistance,setOperation:this.setOperation,setService:this.setService,showOperations:l,showParameters:d,showVertices:this.showVertices,toggleShowOperations:this.toggleShowOperations,uiFindCount:u?y&&y.size:void 0,visEncoding:v})),c.createElement("div",{className:"Ddg--graphWrapper ".concat(O)},E))}}],[{key:"fetchModelIfStale",value:function(e){var t=e.fetchDeepDependencyGraph,r=e.graphState,n=void 0===r?null:r,a=e.urlState,o=a.service,i=a.operation;!n&&o&&t&&t({service:o,operation:i,start:0,end:0})}}]),r}(c.PureComponent);pc.defaultProps={showSvcOpsHeader:!0,baseUrl:be};var hc=Object(E.b)(function(e,t){var r,n,a=e.services,o=a.services,i=a.serverOpsForService,c=je(t.location.search),s=c.density,l=c.operation,u=c.service,f=c.showOp,d=void 0!==f?f:void 0!==l;return u&&(r=Xe()(e.ddg,fc({service:u,operation:l,start:0,end:0}))),r&&r.state===st.DONE&&(n=ho(r.model,d,s)),Object(ue.a)({graph:n,graphState:r,serverOpsForService:i,services:o,showOp:d,urlState:ke(c,Xe()(r,"model.hash"))},Yo(e))},function(e){var t=Object(ar.b)(n,e),r=t.fetchDeepDependencyGraph,a=t.fetchServiceServerOps,o=t.fetchServices,i=Object(ar.b)(uc,e);return{addViewModifier:i.addViewModifier,fetchDeepDependencyGraph:r,fetchServiceServerOps:a,fetchServices:o,removeViewModifierFromIndices:i.removeViewModifierFromIndices}})(pc);r(1081);function mc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var vc=function(e){Object(m.a)(r,e);var t=mc(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.bannerText;if(!e)return null;var t="object"===typeof e?e:{value:e},r=t.styling,n=void 0===r?void 0:r,a=t.value;return c.createElement("div",{className:"BannerText",style:n},a)}}]),r}(c.PureComponent),gc=(r(1083),r(541)),yc=r.n(gc);r(1086);function bc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ec=function(e){Object(m.a)(r,e);var t=bc(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={ownInputValue:void 0},e.setLookback=ia()(function(t){e.setState({ownInputValue:void 0}),e.props.setLookback(t)},350),e.handleInputChange=function(t){"string"!==typeof t&&(e.setState({ownInputValue:t}),e.setLookback(t))},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.lookback,r=e.service,n=e.services,a=e.setService,o=this.state.ownInputValue,i=void 0!==o?o:t;return c.createElement("header",{className:"QualityMetrics--Header"},c.createElement(Lo,{label:"Service",placeholder:"Select a service\u2026",value:r||null,setValue:a,required:!0,options:n||[]}),c.createElement("label",{className:"QualityMetrics--Header--LookbackLabel",htmlFor:"inputNumber"},"Lookback:"),c.createElement(yc.a,{id:"inputNumber",onChange:this.handleInputChange,min:1,value:i}),c.createElement("span",{className:"QualityMetrics--Header--LookbackSuffix"},"(in hours)"))}}]),r}(c.PureComponent);r(1088);function Oc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var wc=function(e){Object(m.a)(r,e);var t=Oc(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.count,r=e.title,n=e.examples;return void 0===t||void 0===r?null:c.createElement("div",{className:"CountCard"},c.createElement("span",{className:"CountCard--TitleHeader"},r),c.createElement("span",{className:"CountCard--Count"},t),c.createElement(hi,{examples:n,includeText:!0}))}}]),r}(c.PureComponent);r(1090);function jc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var kc=function(e,t){var r="".concat(e/(e+t)*100,".0");return"".concat(r.substring(0,r.indexOf(".")+2),"%")},Nc=function(e){Object(m.a)(r,e);var t=jc(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.metric,t=e.name,r=e.description,n=e.metricDocumentationLink,a=e.passCount,o=e.passExamples,i=e.failureCount,s=e.failureExamples,l=e.exemptionCount,u=e.exemptionExamples,f=e.details;return c.createElement("div",{className:"MetricCard"},c.createElement("div",{className:"MetricCard--CircularProgressbarWrapper"},c.createElement(Ka,{backgroundHue:0===a?0:void 0,decorationHue:0===a?0:120,maxValue:a+i,text:kc(a,i),value:a})),c.createElement("div",{className:"MetricCard--Body"},c.createElement("span",{className:"MetricCard--TitleHeader"},t," ",c.createElement(aa.a,{arrowPointAtCenter:!0,title:"Metric Documentation"},c.createElement("a",{href:n,target:"_blank",rel:"noreferrer noopener"},c.createElement(Ta,null)))),c.createElement("p",{className:"MetricCard--Description"},r),c.createElement("div",{className:"MetricCard--CountsWrapper"},c.createElement(wc,{count:a,examples:o,title:"Passing"}),c.createElement(wc,{count:i,examples:s,title:"Failing"}),c.createElement(wc,{count:l,examples:u,title:"Exemptions"})),f&&f.map(function(e){return Boolean(e.rows&&e.rows.length)&&c.createElement(Fi,{key:"".concat(e.description).concat(JSON.stringify(e.columns)),className:"MetricCard--Details",collapsible:!0,columnDefs:e.columns,description:e.description,details:e.rows,header:e.header||"Details"})})))}}]),r}(c.PureComponent);r(1092);function Sc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Dc=function(e){Object(m.a)(r,e);var t=Sc(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.link,r=e.score,n=r.label,a=r.max,o=r.value,i=o<a?"How to improve ":"Great! What does this mean ";return c.createElement("div",{className:"ScoreCard"},c.createElement("span",{className:"ScoreCard--TitleHeader"},n),c.createElement("div",{className:"ScoreCard--CircularProgressbarWrapper"},c.createElement(Ka,{backgroundHue:0===o?0:void 0,decorationHue:120,maxValue:a,text:"".concat((o/a*100).toFixed(1),"%"),value:o})),c.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener"},i,c.createElement(Ta,null)))}}]),r}(c.PureComponent);r(1094);function Tc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var xc=function(e){Object(m.a)(r,e);var t=Tc(r);function r(e){var n;Object(p.a)(this,r),(n=t.call(this,e)).state={},n.setLookback=function(e){if(e&&"string"!==typeof e&&!(e<1||e!==Math.floor(e))){var t=n.props,r=t.history,a=t.service,o=void 0===a?"":a;r.push(De({lookback:e,service:o}))}},n.setService=function(e){var t=n.props,r=t.history,a=t.lookback;r.push(De({lookback:a,service:e}))};var a=e.fetchServices;return e.services||a(),n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this.fetchQualityMetrics()}},{key:"componentDidUpdate",value:function(e){e.service===this.props.service&&e.lookback===this.props.lookback||(this.setState({qualityMetrics:void 0,error:void 0,loading:!1}),this.fetchQualityMetrics())}},{key:"fetchQualityMetrics",value:function(){var e=this,t=this.props,r=t.lookback,n=t.service;n&&(this.setState({loading:!0}),Pr.fetchQualityMetrics(n,r).then(function(t){e.setState({qualityMetrics:t,loading:!1})}).catch(function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.lookback,r=e.service,n=e.services,a=this.state,o=a.qualityMetrics,i=a.error,s=a.loading;return c.createElement("div",{className:"QualityMetrics"},c.createElement(Ec,{lookback:t,service:r,services:n,setService:this.setService,setLookback:this.setLookback}),o&&c.createElement(c.Fragment,null,c.createElement(vc,{bannerText:o.bannerText}),c.createElement("div",{className:"QualityMetrics--Body"},c.createElement("div",{className:"QualityMetrics--ScoreCards"},o.scores.map(function(e){return c.createElement(Dc,{key:e.key,score:e,link:o.traceQualityDocumentationLink})})),c.createElement("div",{className:"QualityMetrics--MetricCards"},o.metrics.map(function(e){return c.createElement(Nc,{key:e.name,metric:e})})),o.clients&&c.createElement(Fi,{className:"QualityMetrics--ClientVersions",columnDefs:[{key:"version",label:"Version"},{key:"minVersion",label:"Minimum Version"},{key:"count",label:"Count"},{key:"examples",label:"Examples",preventSort:!0}],details:o.clients&&o.clients.map(function(e){return Object(ue.a)({},e,{examples:{value:c.createElement(hi,{examples:e.examples,key:"".concat(e.version,"--examples")})}})}),header:"Client Versions"}))),s&&c.createElement(jr,{centered:!0}),i&&c.createElement("div",{className:"QualityMetrics--Error"},i.message))}}]),r}(c.PureComponent);var Rc=Object(E.b)(function(e,t){var r=e.services.services;return Object(ue.a)({},Te(t.location.search),{services:r})},function(e){return{fetchServices:Object(ar.b)(n,e).fetchServices}})(xc),_c=(r(151),r(48)),Ic=r.n(_c),Pc=(r(171),r(36)),Cc=r.n(Pc),Mc=r(100),Vc=r.n(Mc),Lc=(r(252),r(88)),Ac=r.n(Lc),Fc=r(543),Bc=r.n(Fc),Hc=r(360),Wc=r(281),Gc=r.n(Wc),Uc=r(274),zc=r(277),qc=r(275),Kc="all",Jc="1h",Zc=20,Yc="set",Qc="clear",$c="default",Xc="".concat("jaeger/ux/search/form","/operation"),es="".concat("jaeger/ux/search/form","/lookback"),ts="".concat("jaeger/ux/search/form","/tags"),rs="".concat("jaeger/ux/search/form","/min_duration"),ns="".concat("jaeger/ux/search/form","/max_duration"),as="".concat("jaeger/ux/search/form","/limit"),os="".concat("jaeger/ux/search/form","/serviceName");var is=Object(Nt.a)({},"@@redux-form/CHANGE",function(e,t){"sortBy"===t.meta.form&&Jt("jaeger/ux/search/results/sortby",t.payload)}),cs=r(544),ss=r.n(cs);r(1147),r(1149),r(1151),r(1153);function ls(e){var t=e.focusedOption,r=e.focusOption,n=e.key,a=e.labelKey,o=e.option,i=e.selectValue,s=e.style,l=e.valueArray,u=["VirtSelect--option"];o===t&&u.push("is-focused"),o.disabled&&u.push("is-disabled"),l&&l.indexOf(o)>=0&&u.push("is-selected"),o.className&&u.push(o.className);var f=o.disabled?{}:{onClick:function(){return i(o)},onMouseEnter:function(){return r(o)}};return c.createElement("div",Object.assign({className:u.join(" "),key:n,style:s,title:o.title},f),o[a])}function us(e){var t=e.isOpen;return c.createElement(W.a,{className:"VirtSelect--arrow ".concat(t?"is-open":""),type:"down"})}function fs(e){return c.createElement(ss.a,Object.assign({className:"VirtSelect",arrowRenderer:us,optionRenderer:ls},e))}var ds=r(546),ps=r.n(ds),hs=r(547),ms=r.n(hs);var vs="Today",gs="Yesterday",ys="YYYY-MM-DD",bs="HH:mm",Es="MMMM D YYYY, HH:mm:ss.SSS",Os=1e3,ws=1e3*Os,js=60*ws,ks=60*js,Ns=24*ks,Ss=Math.log10(Os),Ds=[{unit:"d",microseconds:Ns,ofPrevious:24},{unit:"h",microseconds:ks,ofPrevious:60},{unit:"m",microseconds:js,ofPrevious:60},{unit:"s",microseconds:ws,ofPrevious:1e3},{unit:"ms",microseconds:Os,ofPrevious:1e3},{unit:"\u03bcs",microseconds:1,ofPrevious:1e3}],Ts={milliseconds:"ms",seconds:"s",minutes:"m",hours:"h",days:"d"};var xs=function(e,t,r){return function(e,t){var r=t+(Math.floor(Math.log10(Math.abs(e)))+1);return r<=0?Math.trunc(e):Number(e.toPrecision(r))}(e/r,t)*r};function Rs(e){return Tr()(e/Os).format(ys)}function _s(e){return Tr()(e/Os).format(bs)}function Is(e){var t=ps()(Ds,function(t,r){var n=t.microseconds;return r<Ds.length-1&&n>e}),r=Object(xe.a)(t,2),n=r[0],a=r[1];if(1e3===n.ofPrevious)return"".concat(ms()(e/n.microseconds,2)).concat(n.unit);var o=Math.floor(e/n.microseconds),i="".concat(o).concat(n.unit),c=Math.round(e/a.microseconds%n.ofPrevious),s="".concat(c).concat(a.unit);return 0===c?i:"".concat(i," ").concat(s)}function Ps(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Tr.a.isMoment(e)?e:Tr()(e),n=t?"MMMM":"MMM",a=new Date;if(a.getFullYear()!==r.year())return r.format("".concat(n," D, YYYY"));var o=r.month(),i=r.date(),c=a.getDate();return o===a.getMonth()&&i===c?vs:(a.setDate(c-1),o===a.getMonth()&&i===a.getDate()?gs:r.format("".concat(n," D")))}var Cs=function(e){if(e<1e3)return"microseconds";var t=Tr.a.duration(e/1e3,"ms");return Object.keys(Ts).reverse().find(function(e){return t.as(e)>=1})};function Ms(e){if("microseconds"===e)return"\u03bcs";var t=Ts[e];return t||""}function Vs(e,t){return e<1e3?e:Tr.a.duration(e/1e3,"ms").as(t)}r(1187);var Ls=function(){};function As(e){var t=e.AntInputComponent,r=e.onChangeAdapter,n=e.isValidatedInput,a=void 0!==n&&n;return function(e){var n=e.input,o=n.onBlur,i=n.onChange,s=n.onFocus,l=n.value,u=e.children,f=Object(le.a)(e,["input","children"]),d=!f.meta.active&&Boolean(f.meta.error),p=c.createElement(t,Object.assign({className:V()({"is-invalid":d,"AdaptedReduxFormField--isValidatedInput":a}),onBlur:a&&o?o:Ls,onFocus:a&&s?s:Ls,onChange:r?function(e){return i(r(e))}:i,value:l},f),u);return a?c.createElement(Wn.a,Object.assign({placement:"bottomLeft",visible:d},f.meta.error),p):p}}r(1189);function Fs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Bs=J.a.Item,Hs=Ac.a.Option,Ws=As({AntInputComponent:Y.a}),Gs=As({AntInputComponent:Ac.a}),Us=As({AntInputComponent:fs,onChangeAdapter:function(e){return e?e.value:null}}),zs=As({AntInputComponent:Y.a,isValidatedInput:!0});function qs(e){if(!e)return null;var t=Bc.a.parse(e);return Object.keys(t).forEach(function(e){var r=t[e];"string"!==typeof r&&(t[e]=String(r))}),JSON.stringify(t)}function Ks(e,t){var r=e.substr(-1);return 1e3*Tr()(t).subtract(parseInt(e,10),r).valueOf()}var Js=[{label:"5 Minutes",value:"5m"},{label:"15 Minutes",value:"15m"},{label:"30 Minutes",value:"30m"},{label:"Hour",value:"1h"},{label:"2 Hours",value:"2h"},{label:"3 Hours",value:"3h"},{label:"6 Hours",value:"6h"},{label:"12 Hours",value:"12h"},{label:"24 Hours",value:"24h"},{label:"2 Days",value:"2d"},{label:"3 Days",value:"3d"},{label:"5 Days",value:"5d"},{label:"7 Days",value:"7d"},{label:"2 Weeks",value:"2w"},{label:"3 Weeks",value:"3w"},{label:"4 Weeks",value:"4w"}],Zs=Object(pe.default)(function(e){var t=new Date,r=Ks(e.value,t),n=new Map,a=Js.filter(function(e){var a=e.value,o=Ks(a,t);return n.set(a,o),o>=r}),o=a.length-1,i=a[o];return i.label!==e.label&&(n.get(i.value)!==r?a.push(e):a.splice(o,1,e)),a.map(function(e){var t=e.label,r=e.value;return c.createElement(Hs,{key:r,value:r},"Last ",t)})});var Ys="e.g. 1.2s, 100ms, 500us";function Qs(e){if(e)return/\d[\d\\.]*(us|ms|s|m|h)$/.test(e)?void 0:{content:"Please enter a number followed by a duration unit, ".concat(Ys),title:"Please match the requested format."}}function $s(e,t){var r,n,a=e.resultsLimit,o=e.service,i=e.startDate,c=e.startDateTime,s=e.endDate,l=e.endDateTime,u=e.operation,f=e.tags,d=e.minDuration,p=e.maxDuration,h=e.lookback;if(Vc.a.set("lastSearch",{service:o,operation:u}),"custom"!==h){var m=new Date;r=Ks(h,m),n=1e3*m}else{var v=function(e){var t=e.startDate,r=e.startDateTime,n=e.endDate,a=e.endDateTime,o="".concat(t," ").concat(r),i="".concat(n," ").concat(a);return{start:"".concat(Tr()(o,"YYYY-MM-DD HH:mm").valueOf(),"000"),end:"".concat(Tr()(i,"YYYY-MM-DD HH:mm").valueOf(),"000")}}({startDate:i,startDateTime:c,endDate:s,endDateTime:l});r=v.start,n=v.end}!function(e,t,r,n,a,o,i){Jt(Xc,t===Kc?$c:Yc),Jt(as,e===Zc?$c:Yc),Jt(ns,a?Yc:Qc),Jt(rs,n?Yc:Qc),Jt(ts,r?Yc:Qc),Jt(es,o),Jt(os,i)}(a,u,f,d,p,h,o),t({service:o,operation:u!==Kc?u:void 0,limit:a,lookback:h,start:r,end:n,tags:qs(f)||void 0,minDuration:d||null,maxDuration:p||null})}var Xs=function(e){Object(m.a)(r,e);var t=Fs(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,r=e.invalid,n=e.searchMaxLookback,a=e.selectedLookback,o=e.selectedService,i=void 0===o?"-":o,s=e.services,l=e.submitting,u=s.find(function(e){return e.name===i}),f=u&&u.operations||[],d="-"===i||!i,p="custom"===a?(new Date).toTimeString().replace(/^.*?GMT/,"UTC"):null;return c.createElement(J.a,{layout:"vertical",onSubmit:t},c.createElement(Bs,{label:c.createElement("span",null,"Service ",c.createElement("span",{className:"SearchForm--labelCount"},"(",s.length,")"))},c.createElement(Uc.a,{name:"service",component:Us,placeholder:"Select A Service",props:{disabled:l,clearable:!1,options:s.map(function(e){return{label:e.name,value:e.name}}),required:!0}})),c.createElement(Bs,{label:c.createElement("span",null,"Operation ",c.createElement("span",{className:"SearchForm--labelCount"},"(",f?f.length:0,")"))},c.createElement(Uc.a,{name:"operation",component:Us,placeholder:"Select An Operation",props:{clearable:!1,disabled:l||d,options:["all"].concat(f).map(function(e){return{label:e,value:e,title:e}}),required:!0}})),c.createElement(Bs,{label:c.createElement("div",null,"Tags"," ",c.createElement(Wn.a,{placement:"topLeft",trigger:"click",title:[c.createElement("h3",{key:"title",className:"SearchForm--tagsHintTitle"},"Values should be in the"," ",c.createElement("a",{href:"https://brandur.org/logfmt",rel:"noopener noreferrer",target:"_blank"},"logfmt")," ","format."),c.createElement("ul",{key:"info",className:"SearchForm--tagsHintInfo"},c.createElement("li",null,"Use space for conjunctions"),c.createElement("li",null,"Values containing whitespace should be enclosed in quotes"))],content:c.createElement("div",null,c.createElement("code",{className:"SearchForm--tagsHintEg"},'error=true db.statement="select * from User"'))},c.createElement(Gc.a,{className:"SearchForm--hintTrigger"})))},c.createElement(Uc.a,{name:"tags",component:Ws,placeholder:"http.status_code=200 error=true",props:{disabled:l}})),c.createElement(Bs,{label:"Lookback"},c.createElement(Uc.a,{name:"lookback",component:Gs,props:{disabled:l,defaultValue:"1h"}},Zs(n),c.createElement(Hs,{value:"custom"},"Custom Time Range"))),"custom"===a&&[c.createElement(Bs,{key:"start",label:c.createElement("div",null,"Start Time"," ",c.createElement(Wn.a,{placement:"topLeft",trigger:"click",content:c.createElement("h3",{key:"title",className:"SearchForm--tagsHintTitle"},"Times are expressed in ",p)},c.createElement(Gc.a,{className:"SearchForm--hintTrigger"})))},c.createElement(Ic.a,{gutter:16},c.createElement(Cc.a,{className:"gutter-row",span:14},c.createElement(Uc.a,{name:"startDate",type:"date",component:Ws,placeholder:"Start Date",props:{disabled:l}})),c.createElement(Cc.a,{className:"gutter-row",span:10},c.createElement(Uc.a,{name:"startDateTime",type:"time",component:Ws,props:{disabled:l}})))),c.createElement(Bs,{key:"end",label:c.createElement("div",null,"End Time"," ",c.createElement(Wn.a,{placement:"topLeft",trigger:"click",content:c.createElement("h3",{key:"title",className:"SearchForm--tagsHintTitle"},"Times are expressed in ",p)},c.createElement(Gc.a,{className:"SearchForm--hintTrigger"})))},c.createElement(Ic.a,{gutter:16},c.createElement(Cc.a,{className:"gutter-row",span:14},c.createElement(Uc.a,{name:"endDate",type:"date",component:Ws,placeholder:"End Date",props:{disabled:l}})),c.createElement(Cc.a,{className:"gutter-row",span:10},c.createElement(Uc.a,{name:"endDateTime",type:"time",component:Ws,props:{disabled:l}}))))],c.createElement(Ic.a,{gutter:16},c.createElement(Cc.a,{className:"gutter-row",span:12},c.createElement(Bs,{label:"Max Duration"},c.createElement(Uc.a,{name:"maxDuration",component:zs,placeholder:Ys,props:{disabled:l},validate:Qs}))),c.createElement(Cc.a,{className:"gutter-row",span:12},c.createElement(Bs,{label:"Min Duration"},c.createElement(Uc.a,{name:"minDuration",component:zs,placeholder:Ys,props:{disabled:l},validate:Qs})))),c.createElement(Bs,{label:"Limit Results"},c.createElement(Uc.a,{name:"resultsLimit",type:"number",component:Ws,placeholder:"Limit Results",props:{disabled:l,min:1,max:bt("search.maxLimit")}})),c.createElement(vi.a,{htmlType:"submit",className:"SearchForm--submit",disabled:l||d||r,"data-test":"submit-btn"},"Find Traces"))}}]),r}(c.PureComponent);Xs.defaultProps={invalid:!1,services:[],submitting:!1,selectedService:null,selectedLookback:null};var el=Object(zc.a)("searchSideBar");var tl,rl=Object(E.b)(function(e){var t,r,n=$.a.parse(e.router.location.search),a=n.service,o=n.limit,i=n.start,c=n.end,s=n.operation,l=n.tag,u=n.tags,f=n.maxDuration,d=n.minDuration,p=n.lookback,h=n.traceID,m=1e3*Tr()().valueOf(),v=Rs(m),g=_s(m),y=Vc.a.get("lastSearch");if(y){var b=y.operation,E=y.service;if(E&&"-"!==E&&e.services.services.includes(E)&&(t=E,b&&"-"!==b)){var O=e.services.operationsForService[E];("all"===b||O&&O.includes(b))&&(r=b)}}var w,j,k,N=function(e){var t,r,n,a,o=e.start,i=e.end;if(i){var c=parseInt(i,10);n=Rs(c),a=_s(c)}if(o){var s=parseInt(o,10);t=Rs(s),r=_s(s)}return{queryStartDate:t,queryStartDateTime:r,queryEndDate:n,queryEndDateTime:a}}({start:i,end:c}),S=N.queryStartDate,D=N.queryStartDateTime,T=N.queryEndDate,x=N.queryEndDateTime;if(l){var R,_=function(e,t){var r=t.split(":",2),n=r[0];return!!n&&(e[n]=null==r[1]?"":r[1],!0)};if(Array.isArray(l))R=l.reduce(function(e,t){return _(e,t),e},{});else if("string"===typeof l){var I={};R=_(I,l)?I:null}if(R)try{w=Object(Hc.stringify)(R)}catch(P){w="Parse Error"}else w="Parse Error"}if(u)try{j=JSON.parse(u),w=Object(Hc.stringify)(j)}catch(P){w="Parse Error"}return h&&(k=h instanceof Array?h.join(","):h),{destroyOnUnmount:!1,initialValues:{service:a||t||"-",resultsLimit:o||Zc,lookback:p||Jc,startDate:S||v,startDateTime:D||"00:00",endDate:T||v,endDateTime:x||g,operation:s||r||Kc,tags:w,minDuration:d||null,maxDuration:f||null,traceIDs:k||null},searchMaxLookback:Xe()(e,"config.search.maxLookback"),selectedService:el(e,"service"),selectedLookback:el(e,"lookback")}},function(e){var t=Object(ar.b)(n,e).searchTraces;return{onSubmit:function(e){return $s(e,t)}}})(Object(qc.a)({form:"searchSideBar"})(Xs)),nl=(r(120),"jaeger/ux/search-results/alt-view"),al="jaeger/ux/search-results/conversions";function ol(e){Jt(al,e)}function il(e){var t=e.ctrlKey,r=e.metaKey;ol(tl.Ddg);var n=je(window.location.search),a=n.density,o=n.operation,i=n.service,c=n.showOp;window.open(Oe({density:a,operation:o,service:i,showOp:c}),t||r?"_blank":"_self")}function cl(e){var t=e.onDdgViewClicked,r=e.traceResultsView,n=c.createElement(vi.a,{className:"ub-ml2",htmlType:"button",onClick:t},r?"Deep Dependency Graph":"Trace Results");return r||!bt("deepDependencies.menuEnabled")?n:c.createElement(c.Fragment,null,n,c.createElement(vi.a,{className:"ub-ml2",htmlType:"button",onClick:il},"View All Dependencies"))}!function(e){e.Ddg="ddg",e.Traces="traces"}(tl||(tl={}));r(1192);function sl(e){var t=e.className,r=e.error,n=e.state,a=e.traceName,o=n===st.ERROR,i=a||ct,s="";if(o){s="is-error";var l="";r&&(l="string"===typeof r?r:r.message||String(r)),l||(l="Error: Unknown error"),i=l,i=c.createElement(ra,{text:l})}else if(n===st.LOADING)i=c.createElement(jr,{small:!0});else{var u=String(a||ct);i=c.createElement(ra,{text:u})}return c.createElement("span",{className:"TraceName ".concat(s," ").concat(t||"")},i)}r(1194);function ll(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var ul=function(e){return e.stopPropagation()},fl=function(e){Object(m.a)(r,e);var t=ll(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).toggleComparison=function(){var t=e.props,r=t.isInDiffCohort;(0,t.toggleComparison)(t.traceID,r)},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.disableComparision,r=e.duration,n=e.durationPercent,a=e.error,o=e.isInDiffCohort,i=e.linkTo,s=e.state,l=e.targetBlank,u=e.traceID,f=e.traceName,d="div",p={className:"ResultItemTitle--item ub-flex-auto"};i&&(p.to=i,d=N.a,l&&(p.target="_blank",p.rel="noopener noreferrer"));var h=s===st.ERROR,m={className:"ResultItemTitle--item ub-flex-none",checked:!h&&o,disabled:h,onChange:this.toggleComparison,onClick:ul};return c.createElement("div",{className:"ResultItemTitle"},!t&&c.createElement(Bn.a,m),c.createElement(d,p,c.createElement("span",{className:"ResultItemTitle--durationBar",style:{width:"".concat(n||0,"%")}}),null!=r&&c.createElement("span",{className:"ub-right ub-relative"},Is(r)),c.createElement("h3",{className:"ResultItemTitle--title"},c.createElement(sl,{error:a,state:s,traceName:f}),c.createElement("small",{className:"ResultItemTitle--idExcerpt"},u.slice(0,7)))))}}]),r}(c.PureComponent);fl.defaultProps={disableComparision:!1,durationPercent:0,error:void 0,state:void 0,targetBlank:!1};r(1196);function dl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var pl=c.createElement("h2",{className:"ub-m0"},"Compare traces by selecting result items"),hl=function(e){Object(m.a)(r,e);var t=dl(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.toggleComparison,r=e.traces,n=r.filter(function(e){return e.state!==st.ERROR}).map(function(e){return e.id}),a=n.length>1?Ze({cohort:n}):null,o=c.createElement(vi.a,{className:"ub-right",disabled:n.length<2,htmlType:"button",type:"primary"},"Compare Traces");return c.createElement("div",{className:"DiffSelection ".concat(r.length?"is-non-empty":""," ub-mb3")},r.length>0&&c.createElement("div",{className:"DiffSelection--selectedItems"},r.map(function(e){var r=e.data,n=e.error,a=e.id,o=e.state;return c.createElement(fl,{key:a,duration:r&&r.duration,error:n,isInDiffCohort:!0,linkTo:ee(a),state:o,targetBlank:!0,toggleComparison:t,traceID:a,traceName:r&&r.traceName})})),c.createElement("div",{className:"DiffSelection--message"},r.length>0?c.createElement(c.Fragment,null,a?c.createElement(N.a,{to:a},o):o,c.createElement("h2",{className:"ub-m0"},n.length," Selected for comparison")):pl))}}]),r}(c.PureComponent),ml=(r(342),r(183)),vl=r.n(ml),gl=(r(500),r(184)),yl=r.n(gl),bl=r(272),El=r.n(bl),Ol=["#17B8BE","#F8DCA1","#B7885E","#FFCB99","#F89570","#829AE3","#E79FD5","#1E96BE","#89DAC1","#B3AD9E","#12939A","#DDB27C","#88572C","#FF9833","#EF5D28","#162A65","#DA70BF","#125C77","#4DC19C","#776E57"];function wl(e){if(7!==e.length)return[0,0,0];var t=e.slice(1,3),r=e.slice(3,5),n=e.slice(5);return[parseInt(t,16),parseInt(r,16),parseInt(n,16)]}var jl=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ol;Object(p.a)(this,e),this.colorsHex=void 0,this.colorsRgb=void 0,this.cache=void 0,this.currentIdx=void 0,this.colorsHex=t,this.colorsRgb=t.map(wl),this.cache=new Map,this.currentIdx=0}return Object(h.a)(e,[{key:"_getColorIndex",value:function(e){var t=this.cache.get(e);return null==t&&(t=this.currentIdx,this.cache.set(e,this.currentIdx),this.currentIdx=++this.currentIdx%this.colorsHex.length),t}},{key:"getColorByKey",value:function(e){var t=this._getColorIndex(e);return this.colorsHex[t]}},{key:"getRgbColorByKey",value:function(e){var t=this._getColorIndex(e);return this.colorsRgb[t]}},{key:"clear",value:function(){this.cache.clear(),this.currentIdx=0}}]),e}());r(1202);function kl(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Nl=function(e){var t=e.key,r=e.value;return"error"===t&&(!0===r||"true"===r)},Sl=function(){return ol(tl.Traces)},Dl=function(e){Object(m.a)(r,e);var t=kl(r);function r(e,n){var a;Object(p.a)(this,r),a=t.call(this,e,n);var o=e.trace,i=o.startTime,c=o.spans,s=Tr()(i/1e3),l=new Set,u=c.filter(function(e){var t=e.tags.some(Nl);return t&&l.add(e.process.serviceName),t}).length;return a.state={numSpans:c.length,timeStr:s.format("h:mm:ss a"),fromNow:s.fromNow(),numErredSpans:u,erroredServices:l},a}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.disableComparision,n=t.durationPercent,a=t.isInDiffCohort,o=t.linkTo,i=t.toggleComparison,s=t.trace,l=s.duration,u=s.services,f=s.startTime,d=s.traceName,p=s.traceID;return c.createElement("div",{className:"ResultItem",onClick:Sl,role:"button"},c.createElement(fl,{duration:l,durationPercent:n,isInDiffCohort:a,linkTo:o,toggleComparison:i,traceID:p,traceName:d,disableComparision:r}),c.createElement(N.a,{to:o},c.createElement(Ic.a,null,c.createElement(Cc.a,{span:4,className:"ub-p2"},c.createElement(yl.a,{className:"ub-m1","data-test":"num-spans"},this.state.numSpans," Span",this.state.numSpans>1&&"s"),Boolean(this.state.numErredSpans)&&c.createElement(yl.a,{className:"ub-m1",color:"red"},this.state.numErredSpans," Error",this.state.numErredSpans>1&&"s")),c.createElement(Cc.a,{span:16,className:"ub-p2"},c.createElement("ul",{className:"ub-list-reset","data-test":"service-tags"},Object(hr.sortBy)(u,function(e){return e.name}).map(function(t){var r=t.name,n=t.numberOfSpans;return c.createElement("li",{key:r,className:"ub-inline-block ub-m1"},c.createElement(yl.a,{className:"ResultItem--serviceTag",style:{borderLeftColor:jl.getColorByKey(r)}},e.state.erroredServices.has(r)&&c.createElement(El.a,{className:"ResultItem--errorIcon"}),r," (",n,")"))}))),c.createElement(Cc.a,{span:4,className:"ub-p3 ub-tx-right-align"},Ps(f/1e3),c.createElement(vl.a,{type:"vertical"}),this.state.timeStr.slice(0,-3),"\xa0",this.state.timeStr.slice(-2),c.createElement("br",null),c.createElement("small",null,this.state.fromNow)))))}}]),r}(c.PureComponent),Tl=r(549),xl=r.n(Tl),Rl=r(64),_l=r(121);r(1214),r(1216);function Il(e){var t=e.data,r=e.containerWidth,n=e.onValueClick,a=e.overValue,o=e.onValueOver,i=e.onValueOut;return s.a.createElement("div",{className:"TraceResultsScatterPlot"},s.a.createElement(Rl.i,{margin:{left:50},width:r,colorType:"literal",height:200},s.a.createElement(Rl.h,{title:"Time",tickTotal:4,tickFormat:function(e){return Tr()(e/Os).format("hh:mm:ss a")}}),s.a.createElement(Rl.j,{title:"Duration",tickTotal:3,tickFormat:function(e){return Is(e)}}),s.a.createElement(Rl.g,{sizeRange:[3,10],opacity:.5,onValueClick:n,onValueMouseOver:o,onValueMouseOut:i,data:t}),a&&s.a.createElement(Rl.d,{value:a},s.a.createElement("h4",{className:"scatter-plot-hint"},a.name||ct))))}Il.defaultProps={containerWidth:null,overValue:null};var Pl=Object(_l.a)(Object(_l.d)("overValue","setOverValue",null),Object(_l.c)(function(e){var t=e.setOverValue;return{onValueOver:function(e){return t(e)},onValueOut:function(){return t(null)}}}))(Il),Cl=xl()()(Pl),Ml=r(551),Vl=r.n(Ml),Ll=function(e){var t=e.service,r=e.operation;return"".concat(t,"\v").concat(r)};var Al=Object(pe.default)(function(e,t){var r,n,a=e.dependencies,o=t.service,i=t.operation,c=new Map,s=new Map,l=new Map,u=[],f=a.sort(function(e,t){var r=e.path,n=t.path,a=l.get(r);a||(a=r.map(Ll).join(),l.set(r,a));var o=l.get(n);return o||(o=n.map(Ll).join(),l.set(n,o)),a>o?1:a<o?-1:0}).map(function(e){var t=e.path,r=e.attributes;u.push(l.get(t)||t.map(Ll).join());var n={focalIdx:-1,members:[],traceIDs:function(e){var t={};return e.forEach(function(e){var r=e.key,n=e.value;t[r]||(t[r]=[]),t[r].push(n)}),t}(r).exemplar_trace_id};if(n.members=t.map(function(e,t){var r=e.operation,a=e.service,s=c.get(a);s||(s={name:a,operations:new Map},c.set(a,s));var l=s.operations.get(r);l||(l={name:r,service:s,pathElems:[]},s.operations.set(r,l)),-1!==n.focalIdx||a!==o||null!=i&&r!==i||(n.focalIdx=t);var u=new ye({path:n,operation:l,memberIdx:t});return l.pathElems.push(u),u}),-1===n.focalIdx)throw new Error("A payload path lacked the focalNode");return n.members.forEach(function(e){var t=s.get(e.distance);t?t.push(e):s.set(e.distance,[e])}),n}),d=0,p=1,h=[];function m(e){e.visibilityIdx=h.length,h.push(e)}do{r=s.get(d--),n=s.get(p++),r&&r.forEach(m),n&&n.forEach(m)}while(r||n);return{paths:f,hash:Vl()(u).slice(0,16),distanceToPathElems:s,services:c,visIdxToPathElem:h}}),Fl=r(552),Bl=r.n(Fl),Hl=function(e){return e.serviceName},Wl=function(e){return e.spanID},Gl=function(e){return e.operationName},Ul=function(e){return e.duration},zl=function(e){return e.startTime},ql=function(e){return e.processID},Kl=Object(Zr.a)(Object(Zr.a)(function(e){return e.span},function(e){return e.references||[]}),function(e){return e.type},function(e,t){return e.find(function(e){return e.refType===t})}),Jl=(Object(Zr.a)(function(e){return Kl({span:e,type:"CHILD_OF"})},function(e){return e?e.spanID:null}),Object(Zr.a)(function(e){if(!e.process)throw new Error("\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    ");return e.process},Hl)),Zl=(Object(Zr.a)(function(e){return e.spans},function(e){return e.leftBound},function(e){return e.rightBound},function(e,t,r){return e.filter(function(e){return zl(e)>=t&&zl(e)<=r})}),Object(Zr.a)(function(e){return e.spans},function(e){return e.text},function(e,t){return Bl.a.filter(t,e,{extract:function(e){return"".concat(Jl(e)," ").concat(Gl(e))}}).map(function(e){return e.original})})),Yl=Object(Zr.a)(Zl,function(e){return e.reduce(function(e,t){return Object(ue.a)({},e,Object(Nt.a)({},Wl(t),t))},{})});Object(Zr.a)(function(e){return e.spans},Yl,function(e,t){return e.map(function(e){return Object(ue.a)({},e,{muted:!t[Wl(e)]})})});function Ql(e,t){return e.localeCompare(t)}var $l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(p.a)(this,e),this.value=t,this.children=r}return Object(h.a)(e,[{key:"depth",get:function(){return this.children.reduce(function(e,t){return Math.max(t.depth+1,e)},1)}},{key:"size",get:function(){var e=0;return this.walk(function(){return e++}),e}},{key:"addChild",value:function(t){return this.children.push(t instanceof e?t:new e(t)),this}},{key:"find",value:function(t){if(e.iterFunction(e.searchFunction(t))(this))return this;for(var r=0;r<this.children.length;r++){var n=this.children[r].find(t);if(n)return n}return null}},{key:"getPath",value:function(t){var r=e.iterFunction(e.searchFunction(t));return function e(t,n){var a=n.concat([t]);if(r(t))return a;for(var o=0;o<t.children.length;o++){var i=e(t.children[o],a);if(i)return i}return null}(this,[])}},{key:"walk",value:function(e){var t=[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t.push({node:this,depth:r});t.length;){var n=t.pop(),a=n.node,o=n.depth;e(a.value,a,o),r=o+1;for(var i=a.children.length-1;i>=0;)t.push({node:a.children[i],depth:r}),i--}}},{key:"paths",value:function(e){var t=[];t.push({node:this,childIndex:0});for(;t.length;){var r=t[t.length-1],n=r.node,a=r.childIndex;if(n.children.length>=a+1)t[t.length-1].childIndex++,t.push({node:n.children[a],childIndex:0});else{if(0===n.children.length)e(t.map(function(e){return e.node.value}));t.pop()}}return[]}}],[{key:"iterFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r){return e(r.value,r,t)}}},{key:"searchFunction",value:function(t){return"function"===typeof t?t:function(r,n){return t instanceof e?n===t:r===t}}}]),e}(),Xl=function(e){return e.spans},eu=function(e){return e.processes},tu=Object(Zr.a)(function(e){return e.span},function(e){return e.processes},function(e,t){return Object(ue.a)({},e,{process:t[ql(e)]})}),ru=Object(Zr.a)(Xl,function(e){return e.reduce(function(e,t){return e.set(Wl(t),t)},new Map)}),nu="__root__";function au(e){var t=new Map(e.spans.map(function(e){return[e.spanID,new $l(e.spanID)]})),r=new Map(e.spans.map(function(e){return[e.spanID,e]})),n=new $l(nu);e.spans.forEach(function(e){var r=t.get(e.spanID);if(Array.isArray(e.references)&&e.references.length){var a=e.references[0],o=a.refType,i=a.spanID;if("CHILD_OF"!==o&&"FOLLOWS_FROM"!==o)throw new Error("Unrecognized ref type: ".concat(o));(t.get(i)||n).children.push(r)}else n.children.push(r)});var a=function(e,t){var n=r.get(e.value),a=r.get(t.value);return+(n.startTime>a.startTime)||+(n.startTime===a.startTime)-1};return e.spans.forEach(function(e){var r=t.get(e.spanID);r.children.length>1&&r.children.sort(a)}),n.children.sort(a),n}Object(Zr.a)(Xl,function(e){return e.length});var ou=Object(Zr.a)(Xl,function(e){return e.reduce(function(e,t){return e?Math.min(e,zl(t)):zl(t)},null)}),iu=Object(Zr.a)(Xl,ou,function(e,t){return e.reduce(function(e,r){return e?Math.max(zl(r)-t+Ul(r),e):Ul(r)},null)}),cu=(Object(Zr.a)(ou,iu,function(e,t){return e+t}),Object(Zr.a)(au,ru,function(e,t){return e.children.map(function(e){return t.get(e.value)}).sort(function(e,t){return r=zl(e),n=zl(t),r-n;var r,n})[0]})),su=(Object(Zr.a)(au,function(e){return e.depth-1}),Object(Zr.a)(Object(Zr.a)(function(e){return e.trace},au),Object(Zr.a)(function(e){return e.span},Wl),function(e,t){return e.getPath(t).length-1}),Object(Zr.a)(eu,function(e){return Object.keys(e).reduce(function(t,r){return t.add(Hl(e[r]))},new Set)})),lu=(Object(Zr.a)(su,function(e){return e.size}),{ms:function(e){var t=xs(e,Ss,Os);return"".concat(Tr.a.duration(t/Os).asMilliseconds(),"ms")},s:function(e){var t=xs(e,Ss,ws);return"".concat(Tr.a.duration(t/Os).asSeconds(),"s")}}),uu=Object(Zr.a)(iu,function(e){return e>=ws?lu.s:lu.ms}),fu=(Object(Zr.a)(function(e){return e.duration},function(e){var t=e.unit;return lu[t]},function(e,t){return t(e)}),Object(Zr.a)(function(e){return e.duration},Object(Zr.a)(function(e){return e.trace},uu),function(e,t){return t(e)}),Object(Zr.a)(function(e){return e.trace},function(e){return e.spans},function(e){return e.sort},function(e,t,r){var n=r.dir,a=r.comparator,o=r.selector;return Object(Re.a)(t).sort(function(t,r){return n*a(o(t,e),o(r,e))})}),Object(Zr.a)(au,function(e){var t=new Map,r=0;return e.walk(function(e){return t.set(e,r++)}),t})),du=(Object(Zr.a)(Object(Zr.a)(function(e){return e.trace},au),Object(Zr.a)(function(e){return e.span},Wl),function(e,t){var r=e.find(t);return r?r.size-1:-1}),Object(Zr.a)(Object(Zr.a)(function(e){return e.trace},fu),function(e){return e.span},function(e,t){return e.get(Wl(t))}),Object(Zr.a)(Object(Zr.a)(Object(Zr.a)(function(e){var t=Xl(e),r=eu(e);return Object(ue.a)({},e,{spans:t.map(function(e){return tu({span:e,processes:r})})})},cu),Object(Zr.b)({name:Gl,serviceName:Jl})),function(e){var t=e.name,r=e.serviceName;return"".concat(r,": ").concat(t)}),Object(Zr.a)(function(e){return e.spans},Object(Zr.a)(function(e){return e.trace},au),function(e){return e.collapsed},function(e,t,r){var n=r.reduce(function(e,r){return t.find(r).walk(function(t){return t!==r&&e.add(t)}),e},new Set);return n.size>0?e.filter(function(e){return!n.has(Wl(e))}):e}),Object(Zr.a)(function(e){return e.trace},function(e){var t=e.interval;return void 0===t?4:t},function(e){var t=e.width;return void 0===t?3:t},function(e,t,r){return Object(Re.a)(Array(t+1).keys()).map(function(n){return{timestamp:ou(e)+iu(e)*(n/t),width:r}})}),Object(Zr.a)(function(e){return e},Xl,function(e,t){var r=new Map;return Object(ue.a)({},e,{spans:t.reduce(function(e,t){var n=r.has(Wl(t))?"".concat(Wl(t),"_").concat(r.get(Wl(t))):Wl(t),a=Object(ue.a)({},t,{spanID:n});return n!==Wl(t)&&console.warn("duplicate spanID in trace replaced",Wl(t),"new:",n),r.set(Wl(t),(r.get(Wl(t))||0)+1),e.concat([a])},[])})}),Object(Zr.a)(function(e){return e},Xl,function(e,t){return Object(ue.a)({},e,{spans:t.filter(function(e){return!!zl(e)})})}),function(e){return e.tags.find(function(e){var t=e.key,r=e.value;return"span.kind"===t&&"server"===r})});var pu=Object(pe.default)(function(e,t,r){var n=new Map;return Object.values(e).forEach(function(e){var a=e.data;if(a){var o=new Map,i=a.traceID;a.spans.forEach(function(e){return o.set(e.spanID,e)}),au(a).paths(function(e){var c=e.reduce(function(e,t){if(t===nu)return e;var r=o.get(t);if(!r)throw new Error("Ancestor spanID ".concat(t," not found in trace ").concat(i));return 0===e.length?e.push(r):(e[e.length-1].processID!==r.processID||du(r))&&e.push(r),e},[]).map(function(e){var t=e.processID,r=e.operationName;return{service:a.processes[t].serviceName,operation:r}});if(c.some(function(e){var n=e.service,a=e.operation;return n===t&&(!r||a===r)})){var s=c.map(function(e){return"".concat(e.operation,":").concat(e.service)}).join("/"),l=n.get(s);l?l.attributes.push({key:"exemplar_trace_id",value:i}):n.set(s,{path:c,attributes:[{key:"exemplar_trace_id",value:i}]})}})}}),{dependencies:Array.from(n.values())}});function hu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var mu=Object(pe.default)(function(e,t){return{service:e,operation:t}});var vu=function(e){Object(m.a)(r,e);var t=hu(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.location,t=$.a.parse(e.search),r={end:t.end,start:t.start,limit:t.limit,lookback:t.lookback,maxDuration:t.maxDuration,minDuration:t.minDuration,view:t.view};return c.createElement(pc,Object.assign({baseUrl:Ge,extraUrlArgs:r,showSvcOpsHeader:!1},this.props))}}]),r}(c.PureComponent),gu=Object(E.b)(function(e,t){var r,n,a=je(t.location.search),o=a.density,i=a.operation,c=a.service,s=a.showOp,l=void 0!==s?s:void 0!==i;if(c){var u=pu(e.trace.traces,c,i);r={model:Al(u,mu(c,i)),state:st.DONE,viewModifiers:new Map},n=ho(r.model,l,o)}return Object(ue.a)({graph:n,graphState:r,showOp:l,urlState:ke(a,Xe()(r,"model.hash"))},Yo(e))})(vu),yu="MOST_RECENT",bu="LONGEST_FIRST",Eu="SHORTEST_FIRST",Ou="MOST_SPANS",wu="LEAST_SPANS",ju=r(553),ku=r.n(ju);var Nu="1",Su="v0",Du={searchHideGraph:"uiSearchHideGraph",timeline:{collapseTitle:"uiTimelineCollapseTitle",hideMinimap:"uiTimelineHideMinimap",hideSummary:"uiTimelineHideSummary"}},Tu=function e(t){return"string"===typeof t?t:ku()(t,e)}(Du);function xu(e){var t=e.uiEmbed,r=void 0===t?void 0:t,n=Object(le.a)(e,["uiEmbed"]);return r===Su&&Tu.forEach(Reflect.deleteProperty.bind(null,n)),n}r(1222);function Ru(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var _u=Ac.a.Option;var Iu=Object(qc.a)({form:"traceResultsSort",initialValues:{sortBy:yu}})(function(){return c.createElement("label",null,"Sort:"," ",c.createElement(Uc.a,{name:"sortBy",component:As({AntInputComponent:Ac.a})},c.createElement(_u,{value:yu},"Most Recent"),c.createElement(_u,{value:bu},"Longest First"),c.createElement(_u,{value:Eu},"Shortest First"),c.createElement(_u,{value:Ou},"Most Spans"),c.createElement(_u,{value:wu},"Least Spans")))}),Pu=Object(zc.a)("traceResultsSort"),Cu=function(e){Object(m.a)(r,e);var t=Ru(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).toggleComparison=function(t,r){var n=e.props,a=n.cohortAddTrace,o=n.cohortRemoveTrace;r?o(t):a(t)},e.onDdgViewClicked=function(){var t=e.props,r=t.location,n=t.history,a=$.a.parse(r.search),o=a.view&&"ddg"===a.view?"traces":"ddg";!function(e){Jt(nl,e)}(o),n.push(ze(Object(ue.a)({},a,{view:o})))},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.diffCohort,n=t.disableComparisons,a=t.goToTrace,o=t.hideGraph,i=t.history,s=t.loading,l=t.location,u=t.maxTraceDuration,f=t.queryOfResults,d=t.showStandaloneLink,p=t.skipMessage,h=t.spanLinks,m=t.traces,v="ddg"!==$.a.parse(l.search).view,g=!n&&c.createElement(hl,{toggleComparison:this.toggleComparison,traces:r});if(s)return c.createElement(c.Fragment,null,r.length>0&&g,c.createElement(jr,{className:"u-mt-vast",centered:!0}));if(!Array.isArray(m)||!m.length)return c.createElement(c.Fragment,null,r.length>0&&g,!p&&c.createElement("div",{className:"u-simple-card","data-test":"no-results"},"No trace results. Try another query."));var y=new Set(r.map(function(e){return e.id})),b=f?ze(xu(f)):ze(),E=function(e){var t=e.key,r=e.value;return"error"===t&&(!0===r||"true"===r)};return c.createElement("div",{className:"SearchResults"},c.createElement("div",{className:"SearchResults--header"},!o&&v&&c.createElement("div",{className:"ub-p3 SearchResults--headerScatterPlot"},c.createElement(Cl,{data:m.map(function(e){return{x:e.startTime,y:e.duration,traceID:e.traceID,size:e.spans.length,name:e.traceName,color:e.spans.some(function(e){return e.tags.some(E)})?"red":"#12939A"}}),onValueClick:function(e){a(e.traceID)}})),c.createElement("div",{className:"SearchResults--headerOverview"},c.createElement("h2",{className:"ub-m0 u-flex-1"},m.length," Trace",m.length>1&&"s"),v&&c.createElement(Iu,null),c.createElement(cl,{traceResultsView:v,onDdgViewClicked:this.onDdgViewClicked}),d&&c.createElement(N.a,{className:"u-tx-inherit ub-nowrap ub-ml3",to:b,target:"_blank",rel:"noopener noreferrer"},c.createElement(Ta,{isLarge:!0})))),!v&&c.createElement("div",{className:"SearchResults--ddg-container"},c.createElement(gu,{location:l,history:i})),v&&g,v&&c.createElement("ul",{className:"ub-list-reset"},m.map(function(t){return c.createElement("li",{className:"ub-my3",key:t.traceID},c.createElement(Dl,{durationPercent:(r=t.duration,a=u,r/a*100),isInDiffCohort:y.has(t.traceID),linkTo:te(t.traceID,{fromSearch:b},h&&(h[t.traceID]||h[t.traceID.replace(/^0*/,"")])),toggleComparison:e.toggleComparison,trace:t,disableComparision:n}));var r,a})))}}]),r}(c.PureComponent);Cu.defaultProps={skipMessage:!1,spanLinks:void 0,queryOfResults:void 0};var Mu=Object(A.a)(Cu);var Vu,Lu,Au=Object(kr.a)("@FILE_READER_API/LOAD_JSON",function(e){return function(e){return new Promise(function(t,r){var n=new FileReader;n.onload=function(){if("string"===typeof n.result)try{t(JSON.parse(n.result))}catch(e){r(new Error("Error parsing JSON: ".concat(e.message)))}else r(new Error("Invalid result type"))},n.onerror=function(){var e=n.error?": ".concat(String(n.error)):"";r(new Error("Error reading the JSON file".concat(e)))},n.onabort=function(){r(new Error("Reading the JSON file has been aborted"))};try{n.readAsText(e.file)}catch(a){r(new Error("Error reading the JSON file: ".concat(a.message)))}})}(e)},function(e){return{fileList:e}}),Fu=r(1455);function Bu(e){return function(t,r){var n=r.payload;return n?e(t,n):t}}function Hu(e){return function(t,r){return r.payload&&r.meta?e(t,r):t}}var Wu=Ra("@jaeger-ui/trace-diff",["COHORT_ADD_TRACE","COHORT_REMOVE_TRACE","DIFF_SET_A","DIFF_SET_B","FORCE_STATE"]),Gu=Object(xa.a)((Vu={},Object(Nt.a)(Vu,Wu.COHORT_ADD_TRACE,function(e){return{traceID:e}}),Object(Nt.a)(Vu,Wu.COHORT_REMOVE_TRACE,function(e){return{traceID:e}}),Object(Nt.a)(Vu,Wu.DIFF_SET_A,function(e){return{traceID:e}}),Object(Nt.a)(Vu,Wu.DIFF_SET_B,function(e){return{traceID:e}}),Object(Nt.a)(Vu,Wu.FORCE_STATE,function(e){return{newState:e}}),Vu)).jaegerUi.traceDiff;var Uu,zu=Object(Fu.a)((Lu={},Object(Nt.a)(Lu,Wu.COHORT_ADD_TRACE,Bu(function(e,t){var r=t.traceID;if(e.cohort.indexOf(r)>=0)return e;var n=e.cohort.slice();return n.push(r),Object(ue.a)({},e,{cohort:n})})),Object(Nt.a)(Lu,Wu.COHORT_REMOVE_TRACE,Bu(function(e,t){var r=t.traceID,n=e.cohort.indexOf(r);if(n<0)return e;var a=e.cohort.slice();a.splice(n,1);var o=e.a===r?null:e.a,i=e.b===r?null:e.b;return Object(ue.a)({},e,{a:o,b:i,cohort:a})})),Object(Nt.a)(Lu,Wu.DIFF_SET_A,Bu(function(e,t){var r=t.traceID;return Object(ue.a)({},e,{a:r})})),Object(Nt.a)(Lu,Wu.DIFF_SET_B,Bu(function(e,t){var r=t.traceID;return Object(ue.a)({},e,{b:r})})),Object(Nt.a)(Lu,Wu.FORCE_STATE,Bu(function(e,t){return t.newState})),Lu),{cohort:[],a:null,b:null}),qu=(Uu={},Object(Nt.a)(Uu,yu,function(e,t){return+(t.startTime>e.startTime)||+(e.startTime===t.startTime)-1}),Object(Nt.a)(Uu,Eu,function(e,t){return+(e.duration>t.duration)||+(e.duration===t.duration)-1}),Object(Nt.a)(Uu,bu,function(e,t){return+(t.duration>e.duration)||+(e.duration===t.duration)-1}),Object(Nt.a)(Uu,Ou,function(e,t){return+(t.spans.length>e.spans.length)||+(e.spans.length===t.spans.length)-1}),Object(Nt.a)(Uu,wu,function(e,t){return+(e.spans.length>t.spans.length)||+(e.spans.length===t.spans.length)-1}),Uu);r(1224);var Ku=r(554),Ju=r.n(Ku).a.Dragger;function Zu(e){return c.createElement(Ju,{accept:".json",customRequest:e.loadJsonTraces,multiple:!0},c.createElement("p",{className:"ant-upload-drag-icon"},c.createElement(W.a,{type:"file-add"})),c.createElement("p",{className:"ant-upload-text"},"Click or drag files to this area."),c.createElement("p",{className:"ant-upload-hint"},"JSON files containing one or more traces are supported."))}r(1234);var Yu=r(556),Qu=r.n(Yu);function $u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Xu=nr.a.TabPane,ef=function(e){Object(m.a)(r,e);var t=$u(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).goToTrace=function(t){var r=e.props.queryOfResults,n=r?ze(xu(r)):ze();e.props.history.push(te(t,{fromSearch:n}))},e}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e,t,r=this.props,n=r.diffCohort,a=r.fetchMultipleTraces,o=r.fetchServiceOperations,i=r.fetchServices,c=r.isHomepage,s=r.queryOfResults,l=r.searchTraces,u=r.urlQueryParams;c||!u||(e=u,t=s,Boolean(e)===Boolean(t)&&We(e.end,t.end)&&We(e.limit,t.limit)&&We(e.lookback,t.lookback)&&We(e.maxDuration,t.maxDuration)&&We(e.minDuration,t.minDuration)&&We(e.operation,t.operation)&&We(e.service,t.service)&&We(e.start,t.start)&&We(e.tags,t.tags))||l(u);var f=n.filter(function(e){return null==e.state}).map(function(e){return e.id});f.length&&a(f),i();var d=(Vc.a.get("lastSearch")||{}).service;u&&u.service&&(d=u.service),d&&"-"!==d&&o(d)}},{key:"render",value:function(){var e=this.props,t=e.cohortAddTrace,r=e.cohortRemoveTrace,n=e.diffCohort,a=e.embedded,o=e.errors,i=e.isHomepage,c=e.loadingServices,l=e.loadingTraces,u=e.maxTraceDuration,f=e.services,d=e.traceResults,p=e.queryOfResults,h=e.loadJsonTraces,m=e.urlQueryParams,v=d&&d.length>0,g=o&&!l,y=i&&!v&&!l&&!o;return s.a.createElement(Ic.a,{className:"SearchTracePage--row"},!a&&s.a.createElement(Cc.a,{span:6,className:"SearchTracePage--column"},s.a.createElement("div",{className:"SearchTracePage--find"},s.a.createElement(nr.a,{size:"large"},s.a.createElement(Xu,{tab:"Search",key:"searchForm"},!c&&f?s.a.createElement(rl,{services:f}):s.a.createElement(jr,null)),s.a.createElement(Xu,{tab:"JSON File",key:"fileLoader"},s.a.createElement(Zu,{loadJsonTraces:function(e){h(e)}}))))),s.a.createElement(Cc.a,{span:a?24:18,className:"SearchTracePage--column"},g&&s.a.createElement("div",{className:"js-test-error-message"},s.a.createElement("h2",null,"There was an error querying for traces:"),o.map(function(e){return s.a.createElement(x,{key:e.message,error:e})})),!g&&s.a.createElement(Mu,{cohortAddTrace:t,cohortRemoveTrace:r,diffCohort:n,disableComparisons:a,goToTrace:this.goToTrace,hideGraph:a&&a.searchHideGraph,loading:l,maxTraceDuration:u,queryOfResults:p,showStandaloneLink:Boolean(a),skipMessage:i,spanLinks:m&&m.spanLinks,traces:d}),y&&s.a.createElement("img",{className:"SearchTracePage--logo js-test-logo",alt:"presentation",src:Qu.a,width:"400"})))}}]),r}(c.Component),tf=Object(pe.default)(function(e){var t=e.traces,r=e.search,n=r.query,a=r.results,o=r.state,i=r.error,c=o===st.LOADING,s=a.map(function(e){return t[e].data}),l=Math.max.apply(null,s.map(function(e){return e.duration}));return{traces:s,maxDuration:l,traceError:i,loadingTraces:c,query:n}}),rf=Object(pe.default)(function(e,t){var r=e.traces;return t.cohort.map(function(e){return r[e]||{id:e}})}),nf=Object(pe.default)(function(e,t){var r=e.slice();return function(e,t){var r=qu[t]||qu[bu];e.sort(r)}(r,t),r}),af=Object(pe.default)(function(e){var t=e.loading,r=e.services,n=e.operationsForService,a=e.error;return{loadingServices:t,services:r&&r.map(function(e){return{name:e,operations:n[e]||[]}}),serviceError:a}});var of=Object(E.b)(function(e){var t=e.embedded,r=e.router,n=e.services,a=e.traceDiff,o=qe(r.location.search),i=!Object.keys(o).length,c=tf(e.trace),s=c.query,l=c.traces,u=c.maxDuration,f=c.traceError,d=c.loadingTraces,p=rf(e.trace,a),h=af(n),m=h.loadingServices,v=h.services,g=h.serviceError,y=[];f&&y.push(f),g&&y.push(g);var b=Pu(e,"sortBy");return{queryOfResults:s,diffCohort:p,embedded:t,isHomepage:i,loadingServices:m,loadingTraces:d,services:v,traceResults:nf(l,b),errors:y.length?y:null,maxTraceDuration:u,sortTracesBy:b,urlQueryParams:Object.keys(o).length>0?o:null}},function(e){var t=Object(ar.b)(n,e),r=t.fetchMultipleTraces,o=t.fetchServiceOperations,i=t.fetchServices,c=t.searchTraces,s=Object(ar.b)(a,e).loadJsonTraces,l=Object(ar.b)(Gu,e);return{cohortAddTrace:l.cohortAddTrace,cohortRemoveTrace:l.cohortRemoveTrace,fetchMultipleTraces:r,fetchServiceOperations:o,fetchServices:i,searchTraces:c,loadJsonTraces:s}})(ef);r(1236);function cf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var sf=function(e){Object(m.a)(r,e);var t=cf(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.width;return c.createElement(c.Fragment,null,c.createElement("rect",{className:"EmphasizedNode--contrast is-non-scaling",vectorEffect:"non-scaling-stroke",width:r,height:t}),c.createElement("rect",{className:"EmphasizedNode--contrast is-scaling",width:r,height:t}),c.createElement("rect",{className:"EmphasizedNode is-non-scaling",vectorEffect:"non-scaling-stroke",width:r,height:t}),c.createElement("rect",{className:"EmphasizedNode is-scaling",width:r,height:t}))}}]),r}(c.PureComponent),lf=r(557),uf=r.n(lf);r(1239);function ff(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var df=function(e){Object(m.a)(r,e);var t=ff(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hasCopied:!1},e.handleClick=function(){e.setState({hasCopied:!0}),uf()(e.props.copyText)},e.handleTooltipVisibilityChange=function(t){!t&&e.state.hasCopied&&e.setState({hasCopied:!1})},e}return Object(h.a)(r,[{key:"render",value:function(){return c.createElement(aa.a,{arrowPointAtCenter:!0,mouseLeaveDelay:.5,onVisibleChange:this.handleTooltipVisibilityChange,placement:this.props.placement,title:this.state.hasCopied?"Copied":this.props.tooltipTitle},c.createElement(vi.a,{className:V()(this.props.className,"CopyIcon"),htmlType:"button",icon:this.props.icon,onClick:this.handleClick}))}}]),r}(c.PureComponent);df.defaultProps={className:void 0,icon:"copy",placement:"left"};r(1241);function pf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var hf=Math.abs,mf=Math.max,vf=function(e){Object(m.a)(r,e);var t=pf(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.a,r=e.b,n=e.operation,a=e.service,o=t===r,i=V()({"is-same":o,"is-changed":!o,"is-more":r>t&&t>0,"is-added":0===t,"is-less":t>r&&r>0,"is-removed":0===r}),s=t<r?"+":"-",l=c.createElement("table",{className:"DiffNode ".concat(i)},c.createElement("tbody",{className:"DiffNode--body"},c.createElement("tr",null,c.createElement("td",{className:"DiffNode--metricCell ".concat(i),rowSpan:o?2:1},o?null:c.createElement("span",{className:"DiffNode--metricSymbol"},s),o?t:hf(r-t)),c.createElement("td",{className:"DiffNode--labelCell ".concat(i)},c.createElement("strong",null,a),c.createElement(df,{className:"DiffNode--copyIcon",copyText:"".concat(a," ").concat(n),tooltipTitle:"Copy label"}))),c.createElement("tr",null,o?null:c.createElement("td",{className:"DiffNode--metricCell ".concat(i)},c.createElement("span",{className:"DiffNode--metricSymbol"},s),0===t||0===r?100:hf((t-r)/mf(t,r)*100).toFixed(0),c.createElement("span",{className:"DiffNode--metricSymbol"},"%")),c.createElement("td",{className:"DiffNode--labelCell ".concat(i)},n))));return c.createElement(Wn.a,{overlayClassName:"DiffNode--popover ".concat(i),mouseEnterDelay:.25,content:l},l)}}]),r}(c.PureComponent);function gf(e){var t=e.data,r=t.a,n=t.b,a=t.operation,o=t.service,i=r?r.length:0,s=n?n.length:0;return c.createElement(vf,{a:i,b:s,operation:a,service:o})}function yf(e){return function(t){return e.has(t.vertex.key)?c.createElement(sf,{height:t.height,width:t.width}):null}}var bf=r(354),Ef=r.n(bf);function Of(e){for(var t=[],r=[],n=Object(Re.a)(e.values()),a=0;a<n.length;a++){var o=n[a];t.push({key:o.id,data:o}),o.parentID&&r.push({from:o.parentID,to:o.id})}return{edges:r,vertices:t}}var wf="http.method",jf="peer.service",kf="span.kind";function Nf(e,t){!function(e,t){var r=e.children,n=e.operation,a=e.parentID,o=e.tags,i=null!=a&&t.get(a),c=o[kf],s=o[jf];if(i&&!(r.size>0)&&"client"===c&&s){var l=i.operation;0===l.indexOf(s)&&l.slice(-n.length)===n&&(e.service=s)}}(e,t),function(e,t){var r=e.parentID,n=e.service,a=e.tags,o=null!=r&&t.get(r);if(o){var i=a[kf],c=o.tags[kf],s=o.tags[jf]||"";"server"===i&&"client"===c&&1===o.children.size&&(o.skipToChild=0===o.operation.indexOf(n)||0===s.indexOf(n))}}(e,t),function(e,t){var r=e.parentID,n=e.operation,a=e.service,o=e.tags,i=null!=r&&t.get(r);if(i){var c=o[kf],s=o[wf];if("server"===c&&n===s){var l=i.tags[jf]||"";if(0===i.operation.indexOf(a)||0===l.indexOf(a)){var u=new RegExp("^".concat(a,"(::)?")),f=i.operation.replace(u,"");e.operation="".concat(s," ").concat(f)}}}}(e,t),function(e,t){var r=e.children,n=e.parentID,a=e.span;if(1===r.size&&0===a.tags.length){var o=null!=n&&t.get(n),i=Object(Re.a)(r)[0],c=null!=i&&t.get(i);o&&c&&(e.skipToChild=o.span.processID===a.processID)}}(e,t),function(e,t){var r=e.children,n=e.parentID,a=e.span,o=e.tags;if(1===r.size&&"client"===o[kf]){var i=null!=n&&t.get(n),c=Object(Re.a)(r)[0],s=null!=c&&t.get(c);i&&s&&(e.skipToChild="client"===s.tags[kf]&&i.span.processID===a.processID)}}(e,t)}var Sf=Object(h.a)(function e(t){Object(p.a)(this,e),this.trace=void 0,this.rootIDs=void 0,this.denseSpansMap=void 0,this.trace=t;var r=function(e){var t=new Map,r=new Set,n=[];return e.forEach(function(e){var a=e.spanID,o=e.operationName,i=e.process,c=e.references,s=e.tags;n.push(a);var l=i.serviceName,u=s.reduce(function(e,t){var r=t.key,n=t.value;return e[r]=n,e},{}),f=null;if(c&&c.length){var d=c[0],p=d.refType,h=d.spanID;"CHILD_OF"!==p&&"FOLLOWS_FROM"!==p?console.warn("Unrecognized ref type: ".concat(p)):f=h}var m={id:a,operation:o,parentID:f,service:l,span:e,tags:u,children:new Set,skipToChild:!1},v=f&&t.get(f);v?v.children.add(a):r.add(a),t.set(a,m)}),{ids:n,map:t,roots:r}}(t.spans),n=r.ids,a=r.map,o=r.roots;!function(e,t){e.forEach(function(e){var r=t.get(e);r&&Nf(r,t)})}(n,a),this.rootIDs=o,this.denseSpansMap=a});function Df(e,t){var r=e.children,n=e.operation,a=e.service,o="".concat(a,"\t").concat(n).concat(r.size?"":"\t__LEAF__");return t?"".concat(t,"\v").concat(o):o}var Tf=function(){function e(){Object(p.a)(this,e),this.nodesMap=void 0,this.rootIDs=void 0,this.nodesMap=new Map,this.rootIDs=new Set}return Object(h.a)(e,[{key:"hasNode",value:function(e){return this.nodesMap.has(e)}},{key:"getNode",value:function(e){return this.nodesMap.get(e)}},{key:"mustGetNode",value:function(e){var t=this.getNode(e);if(!t)throw new Error("Node not found: ".concat(JSON.stringify(e)));return t}},{key:"addNode",value:function(e,t,r){if(this.hasNode(e))throw new Error("Node already added: ".concat(JSON.stringify(e)));var n=Object(ue.a)({},r,{id:e,parentID:t,children:new Set});if(this.nodesMap.set(e,n),t){var a=this.nodesMap.get(t);a&&a.children.add(e)}else this.rootIDs.add(e);return n}}],[{key:"newFromTrace",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Df,n=new e,a=new Sf(t),o=a.denseSpansMap;return a.rootIDs.forEach(function(e){return function e(t,a){if(t){var i,c=t.children,s=t.operation,l=t.service;t.skipToChild?i=a:(i=r(t,a),(n.getNode(i)||n.addNode(i,a,{operation:s,service:l,members:[]})).members.push(t)),c.forEach(function(t){return e(o.get(t),i)})}else console.warn("Missing dense span")}(o.get(e),null)}),n}},{key:"diff",value:function(t,r){var n=new e;return new Set([].concat(Object(Re.a)(t.nodesMap.keys()),Object(Re.a)(r.nodesMap.keys()))).forEach(function(e){var a=t.nodesMap.get(e),o=r.nodesMap.get(e),i=a&&a.parentID||o&&o.parentID||null,c=[].concat(Object(Re.a)(a?a.members:[]),Object(Re.a)(o?o.members:[]));n.addNode(e,i,{members:c,a:a?a.members:null,b:o?o.members:null,operation:a&&a.operation||o&&o.operation||"__UNSET__",service:a&&a.service||o&&o.service||"__UNSET__"})}),n}}]),e}();function xf(e,t){if(!t)return null;var r=[],n=[];e.split(/\s+/).filter(Boolean).forEach(function(e){"-"===e[0]?n.push(e.substr(1).toLowerCase()):r.push(e.toLowerCase())});var a=function(e,t){return e.some(function(e){return t.toLowerCase().includes(e)})},o=function(e){return!!e&&e.some(function(e){return!a(n,e.key)&&(a(r,e.key)||a(r,e.value.toString()))})};return new Set(t.filter(function(e){return a(r,e.operationName)||a(r,e.process.serviceName)||o(e.tags)||null!==e.logs&&e.logs.some(function(e){return o(e.fields)})||o(e.process.tags)||r.some(function(t){return t.replace(/^0*/,"")===e.spanID.replace(/^0*/,"")})}).map(function(e){return e.spanID}))}var Rf=Object(pe.default)(function(e,t){if(!e)return new Set;var r=new Set;return t.forEach(function(t){var n=t.key,a=t.data.members;Xe()(xf(e,Ef()(a,"span")),"size")&&r.add(n)}),r});var _f=Object(pe.default)(function(e,t){var r=Tf.newFromTrace(e),n=Tf.newFromTrace(t);return Of(Tf.diff(r,n).nodesMap)});r(1243);function If(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Pf=An.Digraph.propsFactories,Cf=Pf.classNameIsSmall,Mf=Pf.scaleOpacity,Vf=Pf.scaleStrokeOpacity,Lf=function(e){Object(m.a)(r,e);var t=If(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).layoutManager=new An.LayoutManager({useDotEdges:!0,splines:"polyline"}),e.cacheAs=An.cacheAs.makeScope(),e}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){this.layoutManager.stopAndRelease()}},{key:"render",value:function(){var e=this.props,t=e.a,r=e.b,n=e.uiFind,a=void 0===n?"":n;if(!t||!r)return c.createElement("h1",{className:"u-mt-vast u-tx-muted ub-tx-center"},"At least two Traces are needed");if(t.error||r.error)return c.createElement("div",{className:"TraceDiffGraph--errorsWrapper"},t.error&&c.createElement(x,{className:"ub-my4",error:t.error,messageClassName:"TraceDiffGraph--errorMessage"}),r.error&&c.createElement(x,{className:"ub-my4",error:r.error,messageClassName:"TraceDiffGraph--errorMessage"}));if(t.state===st.LOADING||r.state===st.LOADING)return c.createElement(jr,{className:"u-mt-vast",centered:!0});var o=t.data,i=r.data;if(!o||!i)return c.createElement("div",{className:"TraceDiffGraph--graphWrapper"});var s=_f(o,i),l=s.edges,u=s.vertices,f=Rf(a,u),d=V()("TraceDiffGraph--dag",{"is-uiFind-mode":a}),p={className:"TraceDiffGraph--uiFind",suffix:a.length?String(f.size):void 0};return c.createElement("div",{className:"TraceDiffGraph--graphWrapper"},c.createElement(An.Digraph,{key:"".concat(t.id," vs ").concat(r.id),minimap:!0,zoom:!0,className:d,minimapClassName:"u-miniMap",layoutManager:this.layoutManager,measurableNodesKey:"nodes",layers:[{key:"emphasis-nodes",layerType:"svg",renderNode:yf(f)},{key:"edges",layerType:"svg",edges:!0,defs:[{localId:"arrow"}],markerEndId:"arrow",setOnContainer:this.cacheAs("edges/container",[Mf,Vf,{stroke:"#444"}])},{renderNode:gf,key:"nodes",measurable:!0,layerType:"html"}],setOnGraph:Cf,edges:l,vertices:u}),c.createElement(Qo,{inputProps:p}))}}]),r}(c.PureComponent),Af=Object(E.b)(Yo)(Lf),Ff=r(58);function Bf(e){e.stopPropagation()}function Hf(e){var t=e.traceID;return c.createElement("a",{href:ee(t),onClick:Bf,rel:"noopener noreferrer",target:"_blank"},c.createElement(Ta,null))}function Wf(e){var t=e.value,r=e.includeTime,n=e.fullMonthName,a=Tr.a.isMoment(t)?t:Tr()(t),o=Ps(a,Boolean(n)),i=r?", ".concat(a.format("h:mm:ss a")):"";return"".concat(o).concat(i)}r(1245);function Gf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Uf=ti.a.Column,zf={hideDefaultSelections:!0,type:"radio"},qf=c.createElement("h3",{key:"msg",className:"CohortTable--needMoreMsg"},"Enter a Trace ID or perform a search and select from the results."),Kf=function(e){Object(m.a)(r,e);var t=Gf(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getCheckboxProps=function(t){var r=e.props,n=r.current,a=r.selection,o=t.id;return t.state===st.ERROR||o in a&&o!==n?{disabled:!0}:{}},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.cohort,r=e.current,n=e.selection,a=e.selectTrace,o=Object(ue.a)({},zf,{getCheckboxProps:this.getCheckboxProps,onChange:function(e){return a(e[0])},selectedRowKeys:r?[r]:[]});return[c.createElement(ti.a,{key:"table",size:"middle",dataSource:t,rowKey:"id",pagination:!1,rowSelection:o},c.createElement(Uf,{key:"traceID",title:"",dataIndex:"id",render:function(e){return c.createElement("span",{className:"u-tx-muted"},e&&e.slice(0,7))}}),c.createElement(Uf,{key:"traceName",title:"Service & Operation",sortOrder:"descend",dataIndex:"data.traceName",render:function(e,t){var r=t.data,a=t.error,o=t.id,i=t.state,s=(r||{}).traceName,l=void 0===s?void 0:s,u=(n[o]||{}).label,f=void 0===u?void 0:u;return c.createElement(c.Fragment,null,null!=f&&c.createElement(yl.a,{key:"lbl",className:"ub-bold",color:"#139999"},f),c.createElement(sl,{key:"name",className:"CohortTable--traceName",error:a,state:i,traceName:l}))}}),c.createElement(Uf,{title:"Date",dataIndex:"data.startTime",key:"startTime",render:function(e,t){return t.state===st.DONE&&c.createElement(Wf,{fullMonthName:!0,includeTime:!0,value:e/1e3})}}),c.createElement(Uf,{title:"Duration",dataIndex:"data.duration",key:"duration",render:function(e,t){return t.state===st.DONE&&Is(e)}}),c.createElement(Uf,{title:"Spans",dataIndex:"data.spans.length",key:"spans"}),c.createElement(Uf,{className:"ub-tx-center",dataIndex:"data.traceID",key:"link",render:function(e){return c.createElement(Hf,{traceID:e})}})),t.length<2&&qf]}}]),r}(c.PureComponent);r(1247);function Jf(){return c.createElement("ul",{className:"TraecDiffHeader--traceAttributes"},c.createElement("li",{className:"TraecDiffHeader--traceAttr"},"\xa0"))}function Zf(e){var t=e.startTime,r=e.duration,n=e.totalSpans;return c.createElement("ul",{className:"TraecDiffHeader--traceAttributes"},c.createElement("li",{className:"TraecDiffHeader--traceAttr"},c.createElement("strong",null,c.createElement(Wf,{value:(t||0)/1e3,includeTime:!0,fullMonthName:!0}))),c.createElement("li",{className:"TraecDiffHeader--traceAttr"},c.createElement("span",{className:"u-tx-muted"},"Duration: "),c.createElement("strong",null,Is(r||0))),c.createElement("li",{className:"TraecDiffHeader--traceAttr"},c.createElement("span",{className:"u-tx-muted"},"Spans: ")," ",c.createElement("strong",null,n||0)))}function Yf(e){var t=e.duration,r=e.error,n=e.startTime,a=e.state,o=e.traceID,i=e.totalSpans,s=e.traceName,l=a===st.DONE?Zf:Jf;return c.createElement("div",{className:"TraecDiffHeader--traceHeader"},c.createElement("h1",{className:"TraecDiffHeader--traceTitle"},c.createElement("span",null,o?c.createElement(c.Fragment,null,c.createElement(sl,{key:"name",traceName:s,error:r,state:a})," ",c.createElement("small",{key:"id",className:"u-tx-muted ub-pr2"},o.slice(0,7)),c.createElement(Hf,{traceID:o})):c.createElement("span",{className:"u-tx-muted"},"Select a Trace...")),c.createElement(Ro.a,{className:"TraecDiffHeader--traceTitleChevron"})),c.createElement(l,{startTime:n,duration:t,totalSpans:i}))}Yf.defaultProps={error:void 0};var Qf=Y.a.Search;function $f(e){var t=e.selectTrace;return c.createElement(Qf,{addonBefore:"Select by Trace ID",enterButton:!0,onSearch:t})}r(1249);function Xf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var ed=function(e){Object(m.a)(r,e);var t=Xf(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._toggleTableA=void 0,n._toggleTableB=void 0,n._diffSetA=void 0,n._diffSetB=void 0,n.state={tableVisible:null},n._toggleTableA=n._toggleTable.bind(Object(Ff.a)(n),"a"),n._toggleTableB=n._toggleTable.bind(Object(Ff.a)(n),"b"),n._diffSetA=n._diffSetTrace.bind(Object(Ff.a)(n),"a"),n._diffSetB=n._diffSetTrace.bind(Object(Ff.a)(n),"b"),n}return Object(h.a)(r,[{key:"_toggleTable",value:function(e,t){var r=t?e:null;this.setState({tableVisible:r})}},{key:"_diffSetTrace",value:function(e,t){"a"===e?this.props.diffSetA(t):this.props.diffSetB(t),this.setState({tableVisible:null})}},{key:"render",value:function(){var e=this.props,t=e.a,r=e.b,n=e.cohort,a=this.state.tableVisible,o=t||{},i=o.data,s=void 0===i?void 0:i,l=o.id,u=void 0===l?void 0:l,f=o.state,d=void 0===f?void 0:f,p=o.error,h=void 0===p?void 0:p,m=r||{},v=m.data,g=void 0===v?void 0:v,y=m.id,b=void 0===y?void 0:y,E=m.state,O=void 0===E?void 0:E,w=m.error,j=void 0===w?void 0:w,k={};u&&(k[u]={label:"A"}),b&&(k[b]={label:"B"});var N=c.createElement(Kf,{cohort:n,current:u,selectTrace:this._diffSetA,selection:k}),S=c.createElement(Kf,{cohort:n,current:b,selectTrace:this._diffSetB,selection:k});return c.createElement("header",{className:"TraecDiffHeader"},c.createElement("div",{className:"TraecDiffHeader--labelItem-darkened"},c.createElement("h1",{className:"ub-m0"},"A")),c.createElement(Wn.a,{overlayClassName:"TraceDiffHeader--popover",trigger:"click",placement:"bottomLeft",title:c.createElement($f,{selectTrace:this._diffSetA}),content:N,visible:"a"===a,onVisibleChange:this._toggleTableA},c.createElement("div",{className:"ub-flex u-flex-1"},c.createElement(Yf,{duration:s&&s.duration,error:h,startTime:s&&s.startTime,state:d,totalSpans:s&&s.spans&&s.spans.length,traceID:u,traceName:s&&s.traceName}))),c.createElement("div",{className:"TraecDiffHeader--labelItem"},c.createElement("h2",{className:"u-tx-muted ub-mx3 ub-my0"},"VS")),c.createElement("div",{className:"TraecDiffHeader--labelItem-darkened"},c.createElement("h1",{className:"ub-m0"},"B")),c.createElement(Wn.a,{overlayClassName:"TraceDiffHeader--popover",trigger:"click",placement:"bottomLeft",title:c.createElement($f,{selectTrace:this._diffSetB}),content:S,visible:"b"===a,onVisibleChange:this._toggleTableB},c.createElement("div",{className:"ub-flex u-flex-1"},c.createElement(Yf,{duration:g&&g.duration,error:j,startTime:g&&g.startTime,state:O,totalSpans:g&&g.spans&&g.spans.length,traceID:b,traceName:g&&g.traceName}))))}}]),r}(c.PureComponent);r(1251);function td(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var rd=function(e){Object(m.a)(r,e);var t=td(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={graphTopOffset:it},e.headerWrapperElm=null,e.headerWrapperRef=function(t){e.headerWrapperElm=t,e.setGraphTopOffset()},e.diffSetA=function(t){var r=t.toLowerCase();e.diffSetUrl({newA:r})},e.diffSetB=function(t){var r=t.toLowerCase();e.diffSetUrl({newB:r})},e}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this.processProps()}},{key:"componentDidUpdate",value:function(){this.setGraphTopOffset(),this.processProps()}},{key:"setGraphTopOffset",value:function(){if(this.headerWrapperElm){var e=it+this.headerWrapperElm.clientHeight;this.state.graphTopOffset!==e&&this.setState({graphTopOffset:e})}else this.setState({graphTopOffset:it})}},{key:"processProps",value:function(){var e=this.props,t=e.a,r=e.b,n=e.cohort,a=e.fetchMultipleTraces,o=e.forceState,i=e.tracesData;!function(e,t,r){var n=e.a,a=e.b,o=t.a,i=t.b;if(n===o&&a===i){var c=new Set(e.cohort),s=new Set(t.cohort||[]);c.size===s.size?Array.from(c).some(function(e){return!s.has(e)})&&r(e):r(e)}else r(e)}({a:t,b:r,cohort:n},e.traceDiffState,o);var c=n.map(function(e){return i.get(e)||{id:e,state:null}}).filter(function(e){return null==e.state}).map(function(e){return e.id});c.length&&a(c)}},{key:"diffSetUrl",value:function(e){var t=e.newA,r=e.newB,n=this.props,a=n.a,o=n.b,i=n.cohort,c=n.history,s=Ze({a:t||a,b:r||o,cohort:i});c.push(s)}},{key:"render",value:function(){var e=this.props,t=e.a,r=e.b,n=e.cohort,a=e.tracesData,o=this.state.graphTopOffset,i=t?a.get(t)||{id:t}:null,s=r?a.get(r)||{id:r}:null,l=n.map(function(e){return a.get(e)||{id:e}});return c.createElement(c.Fragment,null,c.createElement("div",{key:"header",ref:this.headerWrapperRef},c.createElement(ed,{key:"header",a:i,b:s,cohort:l,diffSetA:this.diffSetA,diffSetB:this.diffSetB})),c.createElement("div",{key:"graph",className:"TraceDiff--graphWrapper",style:{top:o}},c.createElement(Af,{a:i,b:s})))}}]),r}(c.PureComponent);var nd,ad=Object(E.b)(function(e,t){var r=t.match.params,n=r.a,a=r.b,o=$.a.parse(e.router.location.search).cohort,i=new Set(function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n&&t.push(n)}return t}([n,a].concat(void 0===o?[]:o))),c=Array.from(i),s=e.trace.traces,l=c.map(function(e){return[e,s[e]||{id:e,state:null}]});return{a:n,b:a,cohort:c,tracesData:new Map(l),traceDiffState:e.traceDiff}},function(e){return{fetchMultipleTraces:Object(ar.b)(n,e).fetchMultipleTraces,forceState:Object(ar.b)(Gu,e).forceState}})(rd),od=r(363),id=r.n(od),cd=r(558),sd=r.n(cd),ld=(r(1254),r(185)),ud=r.n(ld);r(1257);function fd(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function dd(e,t){var r=function(e){var t=e.archivedState;return t?t.isLoading?nd.Progress:t.isAcknowledged?null:nd.Outcome:null}(t);return function(e,t,r){if(e!==t)if(e&&ud.a.close(e),t!==nd.Progress){var n=r.acknowledge,a=r.archivedState;if(t===nd.Outcome)if(a&&a.error){var o=a.error;ud.a.warn({key:nd.Outcome,className:"ArchiveNotifier--errorNotification",message:c.createElement(x.Message,{error:o,wrap:!0}),description:c.createElement(x.Details,{error:o,wrap:!0}),duration:null,icon:c.createElement(W.a,{type:"clock-circle-o",className:"ArchiveNotifier--errorIcon"}),onClose:n})}else{if(!a||!a.isArchived)throw new Error("Unexpected condition");ud.a.success({key:nd.Outcome,description:null,duration:null,icon:c.createElement(W.a,{type:"clock-circle-o",className:"ArchiveNotifier--doneIcon"}),message:"This trace has been archived.",onClose:n})}}else ud.a.info({key:nd.Progress,description:null,duration:0,icon:c.createElement(W.a,{type:"loading"}),message:"Archiving trace..."})}(e,r,t),r}!function(e){e.Progress="ENotifiedState.Progress",e.Outcome="ENotifiedState.Outcome"}(nd||(nd={}));var pd,hd=function(e){Object(m.a)(r,e);var t=fd(r);function r(e){var n;Object(p.a)(this,r),n=t.call(this,e);var a=dd(null,e);return n.state={notifiedState:a},n}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){var e=this.state.notifiedState;e&&ud.a.close(e)}},{key:"render",value:function(){return null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{notifiedState:dd(t.notifiedState,e)}}}]),r}(c.PureComponent),md=Ra("@jaeger-ui/archive-trace",["ACKNOWLEDGE"]),vd=Object(xa.a)(Object(Nt.a)({},md.ACKNOWLEDGE,function(e){return e})),gd=Object(ue.a)({},vd.jaegerUi.archiveTrace,{archiveTrace:Br});var yd=Object(Fu.a)((pd={},Object(Nt.a)(pd,md.ACKNOWLEDGE,function(e,t){var r=t.payload,n="string"===typeof r?r:null;if(!n)throw new Error("Invalid state, missing traceID for archive acknowledge");var a=e[n];if(a&&a.isLoading)return e;var o=Object(ue.a)({},a,{isAcknowledged:!0});return Object(ue.a)({},e,Object(Nt.a)({},n,o))}),Object(Nt.a)(pd,"".concat(Br,"_PENDING"),function(e,t){var r=t.meta;return Object(ue.a)({},e,Object(Nt.a)({},r.id,{isLoading:!0}))}),Object(Nt.a)(pd,"".concat(Br,"_FULFILLED"),function(e,t){var r=t.meta;return Object(ue.a)({},e,Object(Nt.a)({},r.id,{isArchived:!0,isAcknowledged:!1}))}),Object(Nt.a)(pd,"".concat(Br,"_REJECTED"),function(e,t){var r=t.meta,n=t.payload;if(!n)throw new Error("Invalid state, missing API error details");var a={error:n,isArchived:!1,isError:!0,isAcknowledged:!1};return Object(ue.a)({},e,Object(Nt.a)({},r.id,a))}),pd),{}),bd="jaeger/ux/trace/match-interactions",Ed="jaeger/ux/trace/range",Od="focus",wd="next",jd="previous",kd="reframe",Nd="shift",Sd=sn("jaeger/ux/trace/filter");function Dd(e,t,r){var n=function(e,t){var r=Object(xe.a)(e,2),n=r[0],a=r[1],o=Object(xe.a)(t,2),i=o[0],c=o[1];return n===i||a===c?Nd:(n-i).toPrecision(7)===(a-c).toPrecision(7)?Nd:kd}(t,r);Jt(Ed,n,e)}var Td,xd=r(559),Rd=r.n(xd),_d={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};function Id(){if(Td)return Td;var e=new Rd.a(document.body);return Td=e,e}function Pd(e){var t=Id();Object.keys(e).forEach(function(r){var n=e[r];n&&t.bind(_d[r].binding,n)})}function Cd(){Id().reset()}var Md,Vd=r(560),Ld=r.n(Vd),Ad=function(){function e(t){var r=this,n=t.duration,a=t.from,o=t.to,i=t.delay,c=t.onUpdate,s=t.onComplete;Object(p.a)(this,e),this.callbackComplete=void 0,this.callbackUpdate=void 0,this.delay=void 0,this.duration=void 0,this.from=void 0,this.requestID=void 0,this.startTime=void 0,this.timeoutID=void 0,this.to=void 0,this._frameCallback=function(){r.timeoutID=void 0,r.requestID=void 0;var e=Object.freeze(r.getCurrent());r.callbackUpdate&&r.callbackUpdate(e),r.callbackComplete&&e.done&&r.callbackComplete(e),e.done?(r.callbackComplete=void 0,r.callbackUpdate=void 0):r.requestID=window.requestAnimationFrame(r._frameCallback)},this.startTime=Date.now()+(i||0),this.duration=n,this.from=a,this.to=o,c||s?(this.callbackComplete=s,this.callbackUpdate=c,i?(this.timeoutID=window.setTimeout(this._frameCallback,i),this.requestID=void 0):(this.requestID=window.requestAnimationFrame(this._frameCallback),this.timeoutID=void 0)):(this.callbackComplete=void 0,this.callbackUpdate=void 0,this.timeoutID=void 0,this.requestID=void 0)}return Object(h.a)(e,[{key:"cancel",value:function(){null!=this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=void 0),null!=this.requestID&&(window.cancelAnimationFrame(this.requestID),this.requestID=void 0),this.callbackComplete=void 0,this.callbackUpdate=void 0}},{key:"getCurrent",value:function(){var e=Date.now()-this.startTime;return e<=0?{done:!1,value:this.from}:e>=this.duration?{done:!0,value:this.to}:{done:!1,value:Ld.a.easeOutQuint(e,this.from,this.to,this.duration)}}}]),e}(),Fd=350;function Bd(e){var t=e.done,r=e.value;window.scrollTo(window.scrollX,r),t&&(Md=void 0)}function Hd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=window.scrollY,n=r;t&&Md&&((Md.to<r?"up":"down")===(e<0?"up":"down")&&(n=Md.to));Md=new Ad({to:n+e,duration:Fd,from:r,onUpdate:Bd})}function Wd(e){var t=window.scrollY;Md=new Ad({duration:Fd,from:t,to:e,onUpdate:Bd})}function Gd(e,t,r){for(var n,a=new Set,o=e.references,i=function(e){return("CHILD_OF"===e.refType||"FOLLOWS_FROM"===e.refType)&&(n=e.spanID,a.add(n),t.has(n))};Array.isArray(o)&&o.length;){var c=o.some(i);if(c)return{isHidden:c,parentIDs:a};if(!n)break;var s=r.get(n);n=void 0,o=s&&s.references}return{parentIDs:a,isHidden:!1}}var Ud,zd=function(){function e(t,r){var n=this;Object(p.a)(this,e),this._trace=void 0,this._scroller=void 0,this._accessors=void 0,this.setAccessors=function(e){n._accessors=e},this.scrollPageDown=function(){n._scroller&&n._accessors&&n._scroller.scrollBy(.95*n._accessors.getViewHeight(),!0)},this.scrollPageUp=function(){n._scroller&&n._accessors&&n._scroller.scrollBy(-.95*n._accessors.getViewHeight(),!0)},this.scrollToNextVisibleSpan=function(){n._scrollToVisibleSpan(1)},this.scrollToPrevVisibleSpan=function(){n._scrollToVisibleSpan(-1)},this.scrollToFirstVisibleSpan=function(){n._scrollToVisibleSpan(1,0)},this._trace=t,this._scroller=r,this._accessors=void 0}return Object(h.a)(e,[{key:"_scrollPast",value:function(e,t){var r=this._accessors;if(!r)throw new Error("Accessors not set");var n=t<0,a=r.getRowPosition(e);if(a){var o=a.y,i=r.getViewHeight();n||(o+=a.height,o-=i),o+=.5*t*i,this._scroller.scrollTo(o)}else console.warn("Invalid row index")}},{key:"_scrollToVisibleSpan",value:function(e,t){var r=this._accessors;if(!r)throw new Error("Accessors not set");if(this._trace){var n,a=this._trace,o=a.duration,i=a.spans,c=a.startTime,s=e<0;n=null!=t?t:s?r.getTopRowIndexVisible():r.getBottomRowIndexVisible();var l=r.mapRowIndexToSpanIndex(n);if(!(0===l&&s||l===i.length-1&&!s)){var u=l;0!==l&&l!==i.length-1&&(u-=e);for(var f,d,p=r.getViewRange(),h=Object(xe.a)(p,2),m=h[0],v=h[1],g=0!==m||1!==v,y=g?c+o*m:NaN,b=g?c+o*v:NaN,E=r.getSearchedSpanIDs(),O=r.getCollapsedChildren(),w=O?new Set(O):null,j=w?new Map(i.map(function(e){return[e.spanID,e]})):new Map,k=e<0?-1:i.length,N=u+e;N!==k;N+=e){var S=i[N],D=S.duration,T=S.spanID,x=S.startTime;if((!g||!(x>b||x+D<y))&&(!E||E.has(T))){if(w){var R=Gd(S,w,j),_=R.isHidden,I=R.parentIDs;if(_){I.forEach(function(e){return w.add(e)});continue}}f=N;break}}if(!f||f===k)if(f=k-e,w)do{var P=Gd(i[f],w,j),C=P.isHidden,M=P.parentIDs;C&&(M.forEach(function(e){return w.add(e)}),f--),d=C}while(d);var V=r.mapSpanIndexToRowIndex(f);this._scrollPast(V,e)}}}},{key:"setTrace",value:function(e){this._trace=e}},{key:"destroy",value:function(){this._trace=void 0,this._scroller=void 0,this._accessors=void 0}}]),e}(),qd=r(364),Kd=r.n(qd);function Jd(e,t){var r=new Kd.a;return function(e,t){return Ud||(Ud={},t.spans.forEach(function(e){e.references&&e.references.filter(function(e){return"CHILD_OF"===e.refType}).map(function(e){return e.spanID}).forEach(function(t){Ud[t]=Ud[t]||[],Ud[t].push(e)})})),Ud[e]||[]}(e,t).forEach(function(e){r.add(e.startTime,e.startTime+(e.duration<=0?0:e.duration-1))}),r}function Zd(e){var t=function(e){var t=Tf.newFromTrace(e),r=new Tf;return t.nodesMap.forEach(function(t){var n=t.members.reduce(function(e,t){return e+t.span.duration},0),a=t.members.reduce(function(e,t){return e+function(e){if(e){var t=e.find(function(e){return"error"===e.key});if(t)return t.value}return!1}(t.span.tags)?1:0},0),o=n-t.members.reduce(function(t,r){return t+new Kd.a(r.span.startTime,r.span.startTime+r.span.duration).intersect(Jd(r.span.spanID,e)).length},0);r.addNode(t.id,t.parentID,Object(ue.a)({},t,{count:t.members.length,errors:a,time:n,percent:100/e.duration*n,selfTime:o,percentSelfTime:100/n*o}))}),r}(e),r=Object(Re.a)(t.nodesMap.values()),n=Of(t.nodesMap),a=function(e,t){return e.map(function(e){var r=!0;return"number"===typeof e.to&&(r=t[e.to].members.some(function(e){return e.span.references&&e.span.references.some(function(e){return"CHILD_OF"===e.refType})})),Object(ue.a)({},e,{followsFrom:!r})})}(n.edges,r);return Object(ue.a)({},n,{edges:a})}r(1287);var Yd=r(561),Qd=r.n(Yd),$d=r(353),Xd=r.n($d);r(1290);function ep(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var tp="service",rp=c.createElement("table",{className:"OpNode OpNode--legendNode"},c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",{className:"OpNode--metricCell"},"Count / Error"),c.createElement("td",{className:"OpNode--labelCell"},c.createElement("strong",null,"Service")),c.createElement("td",{className:"OpNode--metricCell"},"Avg")),c.createElement("tr",null,c.createElement("td",{className:"OpNode--metricCell"},"Duration"),c.createElement("td",{className:"OpNode--labelCell"},"Operation"),c.createElement("td",{className:"OpNode--metricCell"},"Self time"))));function np(e){return Math.round(100*e)/100}var ap=function(e){Object(m.a)(r,e);var t=ep(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e,t=this.props,r=t.count,n=t.errors,a=t.time,o=t.percent,i=t.selfTime,s=t.percentSelfTime,l=t.operation,u=t.service,f=t.mode;"time"===f?e=[255,0,0,Math.min(o/20,1)].join():e="selftime"===f?[255,0,0,s/100].join():jl.getRgbColorByKey(u).concat(.8).join();var d=c.createElement("table",{className:"OpNode OpNode--mode-".concat(f),cellSpacing:"0"},c.createElement("tbody",{className:"OpNode--body",style:{background:"rgba(".concat(e,")")}},c.createElement("tr",null,c.createElement("td",{className:"OpNode--metricCell OpNode--count"},r," / ",n),c.createElement("td",{className:"OpNode--labelCell OpNode--service"},c.createElement("strong",null,u),c.createElement(df,{className:"OpNode--copyIcon",copyText:"".concat(u," ").concat(l),tooltipTitle:"Copy label"})),c.createElement("td",{className:"OpNode--metricCell OpNode--avg"},np(a/1e3/r)," ms")),c.createElement("tr",null,c.createElement("td",{className:"OpNode--metricCell OpNode--time"},a/1e3," ms (",np(o)," %)"),c.createElement("td",{className:"OpNode--labelCell OpNode--op"},l),c.createElement("td",{className:"OpNode--metricCell OpNode--selfTime"},i/1e3," ms (",np(s)," %)")))),p=c.createElement("div",{className:"OpNode--popoverContent"},d);return c.createElement(Wn.a,{overlayClassName:"OpNode--popover",mouseEnterDelay:.25,content:p},d)}}]),r}(c.PureComponent);function op(e){return function(t){return c.createElement(ap,Object.assign({},t.data,{mode:e}))}}function ip(e){return function(t){return e&&e.has(t.vertex.key)?c.createElement(sf,{height:t.height,width:t.width}):null}}function cp(e){return c.createElement("rect",{className:"OpNode--vectorBorder",vectorEffect:"non-scaling-stroke",width:e.width,height:e.height})}r(1292);function sp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var lp=An.Digraph.propsFactories,up=lp.classNameIsSmall,fp=lp.scaleOpacity,dp=lp.scaleStrokeOpacity;function pp(e){return e.followsFrom?{strokeDasharray:4}:{}}var hp=c.createElement("div",{className:"TraceGraph--help-content"},rp,c.createElement("div",null,c.createElement("table",null,c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",null,c.createElement(vi.a,{htmlType:"button",shape:"circle",size:"small"},"S")),c.createElement("td",null,"Service"),c.createElement("td",null,"Colored by service")),c.createElement("tr",null,c.createElement("td",null,c.createElement(vi.a,{htmlType:"button",shape:"circle",size:"small"},"T")),c.createElement("td",null,"Time"),c.createElement("td",null,"Colored by total time")),c.createElement("tr",null,c.createElement("td",null,c.createElement(vi.a,{htmlType:"button",shape:"circle",size:"small"},"ST")),c.createElement("td",null,"Selftime"),c.createElement("td",null,"Colored by self time (*)"))))),c.createElement("div",null,c.createElement("svg",{width:"100%",height:"40"},c.createElement("line",{x1:"0",y1:"10",x2:"90",y2:"10",style:{stroke:"#000",strokeWidth:2}}),c.createElement("text",{alignmentBaseline:"middle",x:"100",y:"10"},"ChildOf"),c.createElement("line",{x1:"0",y1:"30",x2:"90",y2:"30",style:{stroke:"#000",strokeWidth:2,strokeDasharray:"4"}}),c.createElement("text",{alignmentBaseline:"middle",x:"100",y:"30"},"FollowsFrom"))),c.createElement("div",null,"(*) ",c.createElement("b",null,"Self time")," is the total time spent in a span when it was not waiting on children. For example, a 10ms span with two 4ms non-overlapping children would have ",c.createElement("b",null,"self-time = 10ms - 2 * 4ms = 2ms"),".")),mp=function(e){Object(m.a)(r,e);var t=sp(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state=void 0,n.cache=void 0,n.layoutManager=void 0,n.showHelp=function(){n.setState({showHelp:!0})},n.closeSidebar=function(){n.setState({showHelp:!1})},n.state={showHelp:!1,mode:tp},n.layoutManager=new An.LayoutManager({useDotEdges:!0,splines:"polyline"}),n}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){this.layoutManager.stopAndRelease()}},{key:"toggleNodeMode",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){var e=this,t=this.props,r=t.ev,n=t.headerHeight,a=t.uiFind,o=t.uiFindVertexKeys,i=this.state,s=i.showHelp,l=i.mode;if(!r)return c.createElement("h1",{className:"u-mt-vast u-tx-muted ub-tx-center"},"No trace found");var u=V()("TraceGraph--graphWrapper",{"is-uiFind-mode":a});return c.createElement("div",{className:u,style:{paddingTop:n+47}},c.createElement(An.Digraph,{minimap:!0,zoom:!0,className:"TraceGraph--dag",minimapClassName:"u-miniMap",layoutManager:this.layoutManager,measurableNodesKey:"nodes",layers:[{key:"node-find-emphasis",layerType:"svg",renderNode:ip(o)},{key:"edges",edges:!0,layerType:"svg",defs:[{localId:"arrow"}],markerEndId:"arrow",setOnContainer:[fp,dp],setOnEdge:pp},{key:"nodes-borders",layerType:"svg",setOnContainer:dp,renderNode:cp},{key:"nodes",layerType:"html",measurable:!0,renderNode:Xd()("trace-graph/nodes/render/".concat(l),op(l))}],setOnGraph:up,edges:r.edges,vertices:r.vertices}),c.createElement("a",{className:"TraceGraph--experimental",href:"https://github.com/jaegertracing/jaeger-ui/issues/293",target:"_blank",rel:"noopener noreferrer"},"Experimental"),c.createElement("div",{className:"TraceGraph--sidebar-container"},c.createElement("ul",{className:"TraceGraph--menu"},c.createElement("li",null,c.createElement(W.a,{type:"question-circle",onClick:this.showHelp})),c.createElement("li",null,c.createElement(aa.a,{placement:"left",title:"Service"},c.createElement(vi.a,{className:"TraceGraph--btn-service",htmlType:"button",shape:"circle",size:"small",onClick:function(){return e.toggleNodeMode(tp)}},"S"))),c.createElement("li",null,c.createElement(aa.a,{placement:"left",title:"Time"},c.createElement(vi.a,{className:"TraceGraph--btn-time",htmlType:"button",shape:"circle",size:"small",onClick:function(){return e.toggleNodeMode("time")}},"T"))),c.createElement("li",null,c.createElement(aa.a,{placement:"left",title:"Selftime"},c.createElement(vi.a,{className:"TraceGraph--btn-selftime",htmlType:"button",shape:"circle",size:"small",onClick:function(){return e.toggleNodeMode("selftime")}},"ST")))),s&&c.createElement(Qd.a,{title:"Help",bordered:!1,extra:c.createElement("a",{onClick:this.closeSidebar,role:"button"},c.createElement(W.a,{type:"close"}))},hp)))}}]),r}(c.PureComponent);mp.defaultProps={ev:null};var vp="open",gp="close";function yp(e){return e?gp:vp}var bp,Ep=function(){return Jt("jaeger/ux/trace/alt-view","gantt")},Op=function(){return Jt("jaeger/ux/trace/alt-view","graph")},wp=function(){return Jt("jaeger/ux/trace/alt-view","json")},jp=function(){return Jt("jaeger/ux/trace/alt-view","rawJson")},kp=function(){return Jt("jaeger/ux/trace/alt-view","traceStatistics")},Np=function(){return Jt("jaeger/ux/trace/alt-view","tracesSpansView")},Sp=function(e){return Jt("jaeger/ux/trace/slim-header",yp(e))},Dp=r(562),Tp=r.n(Dp),xp=r(563),Rp=r.n(xp),_p=r(564),Ip=r.n(_p),Pp=r(565),Cp=r.n(Pp),Mp=r(566),Vp=r.n(Mp);r(1300);!function(e){e.TraceTimelineViewer="TraceTimelineViewer",e.TraceGraph="TraceGraph",e.TraceStatistics="TraceStatistics",e.TraceSpansView="TraceSpansView",e.TraceFlamegraph="TraceFlamegraph"}(bp||(bp={}));var Lp=[{viewType:bp.TraceTimelineViewer,label:"Trace Timeline"},{viewType:bp.TraceGraph,label:"Trace Graph"},{viewType:bp.TraceStatistics,label:"Trace Statistics"},{viewType:bp.TraceSpansView,label:"Trace Spans Table"},{viewType:bp.TraceFlamegraph,label:"Trace Flamegraph"}];function Ap(e){var t=e.onTraceViewChange,r=e.viewType,n=e.traceID,a=c.createElement(U.a,null,Lp.filter(function(e){return e.viewType!==r}).map(function(e){return c.createElement(U.a.Item,{key:e.viewType},c.createElement("a",{onClick:function(){return function(e){e===bp.TraceTimelineViewer?Ep():e===bp.TraceGraph?Op():e===bp.TraceStatistics?kp():e===bp.TraceSpansView&&Np(),t(e)}(e.viewType)},role:"button"},e.label))}),c.createElement(U.a.Item,null,c.createElement(N.a,{to:_("/api/traces/".concat(n,"?prettyPrint=true")),rel:"noopener noreferrer",target:"_blank",onClick:wp},"Trace JSON")),c.createElement(U.a.Item,null,c.createElement(N.a,{to:_("/api/traces/".concat(n,"?raw=true&prettyPrint=true")),rel:"noopener noreferrer",target:"_blank",onClick:jp},"Trace JSON (unadjusted)"))),o=Lp.find(function(e){return e.viewType===r}),i=o?o.label:"Alternate Views";return c.createElement(B.a,{overlay:a},c.createElement("div",{className:"AltViewOptions"},"".concat(i," "),c.createElement(W.a,{type:"down"})))}var Fp=Jt.bind(null,"jaeger/ux/trace/kbd-modal",vp);r(1302);function Bp(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Hp=ti.a.Column,Wp={up:"\u2191",right:"\u2192",down:"\u2193",left:"\u2190",shift:"\u21e7"};var Gp=function(e){return c.createElement("span",{className:"ub-pl4"},e)},Up=function(e){return c.createElement("span",{className:"ub-pr4"},e)},zp=function(e,t){return t%2>0?"KeyboardShortcutsHelp--oddRow":""},qp=null;function Kp(){if(qp)return qp;var e=[];return Object.keys(_d).forEach(function(t){var r,n=_d[t],a=n.binding,o=n.label,i=(r=a,(Array.isArray(r)?r:[r]).map(function(e){return e.split("+").map(function(e){return Wp[e]||e.toUpperCase()})}));e.push.apply(e,Object(Re.a)(i.map(function(e){return{key:String(e),kbds:c.createElement("kbd",null,e.join(" ")),description:o}})))}),qp=c.createElement(ti.a,{className:"KeyboardShortcutsHelp--table u-simple-scrollbars",dataSource:e,size:"middle",pagination:!1,showHeader:!1,rowClassName:zp},c.createElement(Hp,{title:"Description",dataIndex:"description",key:"description",render:Gp}),c.createElement(Hp,{title:"Key(s)",dataIndex:"kbds",key:"kbds",align:"right",render:Up}))}var Jp=function(e){Object(m.a)(r,e);var t=Bp(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={visible:!1},e.onCtaClicked=function(){Fp(),e.setState({visible:!0})},e.onCloserClicked=function(){return e.setState({visible:!1})},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.className;return c.createElement(c.Fragment,null,c.createElement(vi.a,{className:e,htmlType:"button",onClick:this.onCtaClicked},c.createElement("span",{className:"KeyboardShortcutsHelp--cta"},"\u2318")),c.createElement(ni.a,{align:void 0,title:"Keyboard Shortcuts",visible:this.state.visible,onOk:this.onCloserClicked,onCancel:this.onCloserClicked,cancelButtonProps:{style:{display:"none"}},bodyStyle:{padding:0}},Kp()))}}]),r}(c.PureComponent),Zp="#fff",Yp=.8,Qp=2,$p=200,Xp=10,eh=60,th=6;r(1304);function rh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var nh=function(e){return jl.getRgbColorByKey(e)},ah=function(e){Object(m.a)(r,e);var t=rh(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._canvasElm=void 0,n._setCanvasRef=function(e){n._canvasElm=e},n._canvasElm=void 0,n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){this._draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){if(this._canvasElm){var e=this.props,t=e.valueWidth,r=e.items;!function(e,t,r,n){var a=new Map,o=t.length<eh?eh:Math.min(t.length,$p),i=2*window.innerWidth;e.width=i,e.height=o;var c=Math.min(th,Math.max(Qp,o/t.length)),s=o/t.length,l=e.getContext("2d",{alpha:!1});l.fillStyle=Zp,l.fillRect(0,0,i,o);for(var u=0;u<t.length;u++){var f=t[u],d=f.valueWidth,p=f.valueOffset,h=f.serviceName,m=p/r*i,v=d/r*i;v<Xp&&(v=Xp);var g=a.get(h);g||(g="rgba(".concat(n(h).concat(Yp).join(),")"),a.set(h,g)),l.fillStyle=g,l.fillRect(m,u*s,v,c)}}(this._canvasElm,r,t,nh)}}},{key:"render",value:function(){return c.createElement("canvas",{className:"CanvasSpanGraph",ref:this._setCanvasRef})}}]),r}(c.PureComponent);r(1306);function oh(e){for(var t=e.numTicks,r=e.duration,n=[],a=0;a<t+1;a++){var o=a/t,i=1===o?{right:"0%"}:{left:"".concat(100*o,"%")};n.push(s.a.createElement("div",{key:o,className:"TickLabels--label",style:i,"data-test":"tick"},Is(r*o)))}return s.a.createElement("div",{className:"TickLabels"},n)}r(1308);function ih(e){for(var t=e.numTicks,r=[],n=1;n<t;n++){var a="".concat(n/t*100,"%");r.push(s.a.createElement("line",{className:"GraphTick",x1:a,y1:"0%",x2:a,y2:"100%",key:n/t}))}return s.a.createElement("g",{"data-test":"ticks","aria-hidden":"true"},r)}r(1310);function ch(e){var t=e.isDragging,r=e.onMouseDown,n=e.onMouseEnter,a=e.onMouseLeave,o=e.position,i="".concat(100*o,"%"),c=V()("Scrubber",{isDragging:t});return s.a.createElement("g",{className:c},s.a.createElement("g",{className:"Scrubber--handles",onMouseDown:r,onMouseEnter:n,onMouseLeave:a},s.a.createElement("rect",{x:i,className:"Scrubber--handleExpansion",style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),s.a.createElement("rect",{x:i,className:"Scrubber--handle",style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),s.a.createElement("line",{className:"Scrubber--line",y2:"100%",x1:i,x2:i}))}r(1312);function sh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var lh={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};var uh=function(e){Object(m.a)(r,e);var t=sh(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).state=void 0,n._root=void 0,n._draggerReframe=void 0,n._draggerStart=void 0,n._draggerEnd=void 0,n._setRoot=function(e){n._root=e},n._getDraggingBounds=function(e){if(!n._root)throw new Error("invalid state");var t=n._root.getBoundingClientRect(),r=t.left,a=t.width,o=Object(xe.a)(n.props.viewRange.time.current,2),i=o[0],c=o[1],s=1,l=0;return e===lh.SHIFT_START?s=c:e===lh.SHIFT_END&&(l=i),{clientXLeft:r,maxValue:s,minValue:l,width:a}},n._handleReframeMouseMove=function(e){var t=e.value;n.props.updateNextViewRangeTime({cursor:t})},n._handleReframeMouseLeave=function(){n.props.updateNextViewRangeTime({cursor:null})},n._handleReframeDragUpdate=function(e){var t=e.value,r=n.props.viewRange.time,a={reframe:{anchor:r.reframe?r.reframe.anchor:t,shift:t}};n.props.updateNextViewRangeTime(a)},n._handleReframeDragEnd=function(e){var t=e.manager,r=e.value,a=n.props.viewRange.time,o=a.reframe?a.reframe.anchor:r,i=r<o?[r,o]:[o,r],c=Object(xe.a)(i,2),s=c[0],l=c[1];t.resetBounds(),n.props.updateViewRangeTime(s,l,"minimap")},n._handleScrubberEnterLeave=function(e){var t=e.type===Bi.MouseEnter;n.setState({preventCursorLine:t})},n._handleScrubberDragUpdate=function(e){var t=e.event,r=e.tag,a=e.type,o=e.value;a===Bi.DragStart&&t.stopPropagation(),r===lh.SHIFT_START?n.props.updateNextViewRangeTime({shiftStart:o}):r===lh.SHIFT_END&&n.props.updateNextViewRangeTime({shiftEnd:o})},n._handleScrubberDragEnd=function(e){var t,r=e.manager,a=e.tag,o=e.value,i=Object(xe.a)(n.props.viewRange.time.current,2),c=i[0],s=i[1];if(a===lh.SHIFT_START)t=[o,s];else{if(a!==lh.SHIFT_END)throw new Error("bad state");t=[c,o]}r.resetBounds(),n.setState({preventCursorLine:!1}),n.props.updateViewRangeTime(t[0],t[1],"minimap")},n._resetTimeZoomClickHandler=function(){n.props.updateViewRangeTime(0,1)},n._draggerReframe=new Wi({getBounds:n._getDraggingBounds,onDragEnd:n._handleReframeDragEnd,onDragMove:n._handleReframeDragUpdate,onDragStart:n._handleReframeDragUpdate,onMouseMove:n._handleReframeMouseMove,onMouseLeave:n._handleReframeMouseLeave,tag:lh.REFRAME}),n._draggerStart=new Wi({getBounds:n._getDraggingBounds,onDragEnd:n._handleScrubberDragEnd,onDragMove:n._handleScrubberDragUpdate,onDragStart:n._handleScrubberDragUpdate,onMouseEnter:n._handleScrubberEnterLeave,onMouseLeave:n._handleScrubberEnterLeave,tag:lh.SHIFT_START}),n._draggerEnd=new Wi({getBounds:n._getDraggingBounds,onDragEnd:n._handleScrubberDragEnd,onDragMove:n._handleScrubberDragUpdate,onDragStart:n._handleScrubberDragUpdate,onMouseEnter:n._handleScrubberEnterLeave,onMouseLeave:n._handleScrubberEnterLeave,tag:lh.SHIFT_END}),n._root=void 0,n.state={preventCursorLine:!1},n}return Object(h.a)(r,[{key:"componentWillUnmount",value:function(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}},{key:"_getMarkers",value:function(e,t,r){var n=function(e,t){var r=e<t?[e,t]:[t,e],n=Object(xe.a)(r,2),a=n[0],o=n[1];return{x:"".concat(100*a,"%"),width:"".concat(100*(o-a),"%"),leadingX:"".concat(100*t,"%")}}(e,t),a=V()({isShiftDrag:r,isReframeDrag:!r});return[c.createElement("rect",{key:"fill",className:"ViewingLayer--draggedShift ".concat(a),x:n.x,y:"0",width:n.width,height:this.props.height-2}),c.createElement("rect",{key:"edge",className:"ViewingLayer--draggedEdge ".concat(a),x:n.leadingX,y:"0",width:"1",height:this.props.height-2})]}},{key:"render",value:function(){var e=this.props,t=e.height,r=e.viewRange,n=e.numTicks,a=this.state.preventCursorLine,o=r.time,i=o.current,s=o.cursor,l=o.shiftStart,u=o.shiftEnd,f=o.reframe,d=null!=l||null!=u||null!=f,p=Object(xe.a)(i,2),h=p[0],m=p[1],v=0;h&&(v=100*h);var g,y=100;return m&&(y=100-100*m),d||null==s||a||(g="".concat(100*s,"%")),c.createElement("div",{"aria-hidden":!0,className:"ViewingLayer",style:{height:t}},(0!==h||1!==m)&&c.createElement(vi.a,{onClick:this._resetTimeZoomClickHandler,className:"ViewingLayer--resetZoom",htmlType:"button"},"Reset Selection"),c.createElement("svg",{height:t,className:"ViewingLayer--graph",ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},v>0&&c.createElement("rect",{x:0,y:0,height:"100%",width:"".concat(v,"%"),className:"ViewingLayer--inactive"}),y>0&&c.createElement("rect",{x:"".concat(100-y,"%"),y:0,height:"100%",width:"".concat(y,"%"),className:"ViewingLayer--inactive"}),c.createElement(ih,{numTicks:n}),g&&c.createElement("line",{className:"ViewingLayer--cursorGuide",x1:g,y1:"0",x2:g,y2:t-2,strokeWidth:"1"}),null!=l&&this._getMarkers(h,l,!0),null!=u&&this._getMarkers(m,u,!0),c.createElement(ch,{isDragging:null!=l,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:h||0}),c.createElement(ch,{isDragging:null!=u,position:m||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),null!=f&&this._getMarkers(f.anchor,f.shift,!1)),d&&c.createElement("div",{className:"ViewingLayer--fullOverlay"}))}}]),r}(c.PureComponent);function fh(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function dh(e){return{valueOffset:e.relativeStartTime,valueWidth:e.duration,serviceName:e.process.serviceName}}var ph=Object(pe.default)(function(e){return e.spans.map(dh)}),hh=function(e){Object(m.a)(r,e);var t=fh(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.trace,n=e.viewRange,a=e.updateNextViewRangeTime,o=e.updateViewRangeTime;if(!r)return c.createElement("div",null);var i=ph(r);return c.createElement("div",{className:"ub-pb2 ub-px2"},c.createElement(oh,{numTicks:4,duration:r.duration}),c.createElement("div",{className:"ub-relative"},c.createElement(ah,{valueWidth:r.duration,items:i}),c.createElement(uh,{viewRange:n,numTicks:4,height:t||60,updateViewRangeTime:o,updateNextViewRangeTime:a})))}}]),r}(c.PureComponent);hh.defaultProps={height:60};var mh="in-trace-search";r(1314);function vh(e){var t=e.clearSearch,r=e.focusUiFindMatches,n=e.forwardedRef,a=e.navigable,o=e.nextResult,i=e.prevResult,s=e.resultCount,l=e.textFilter,u=l?c.createElement("span",{className:"TracePageSearchBar--count"},s):null,f=V()("TracePageSearchBar--btn",{"is-disabled":!l}),d={"data-test":mh,className:"TracePageSearchBar--bar ub-flex-auto",name:"search",suffix:u};return c.createElement("div",{className:"TracePageSearchBar"},c.createElement(Y.a.Group,{className:"ub-justify-end",compact:!0,style:{display:"flex"}},c.createElement(Qo,{inputProps:d,forwardedRef:n,trackFindFunction:Sd}),a&&c.createElement(c.Fragment,null,c.createElement(vi.a,{className:V()(f,"TracePageSearchBar--locateBtn"),disabled:!l,htmlType:"button",onClick:r},c.createElement(Un.a,null)),c.createElement(vi.a,{className:f,disabled:!l,htmlType:"button",icon:"up",onClick:i}),c.createElement(vi.a,{className:f,disabled:!l,htmlType:"button",icon:"down",onClick:o})),c.createElement(vi.a,{className:f,disabled:!l,htmlType:"button",icon:"close",onClick:t})))}var gh=c.forwardRef(function(e,t){return c.createElement(vh,Object.assign({},e,{forwardedRef:t}))});r(1316);function yh(e){var t=e.className,r=e.dividerClassName,n=e.items;return c.createElement("ul",{className:"LabeledList ".concat(t||"")},n.map(function(e,t){var a=e.key,o=e.label,i=e.value,s=t<n.length-1&&c.createElement("li",{className:"LabeledList--item",key:"".concat(a,"--divider")},c.createElement(vl.a,{className:r,type:"vertical"}));return[c.createElement("li",{className:"LabeledList--item",key:a},c.createElement("span",{className:"LabeledList--label"},o),c.createElement("strong",null,i)),s]}))}var bh=Jn()(function(e){for(var t,r=new Set(e.map(function(e){return e.spanID})),n=function(n){if(e[n].references&&e[n].references.some(function(t){var a=t.traceID,o=t.spanID;return a===e[n].traceID&&r.has(o)}))return"continue";if(!t)return t=e[n],"continue";var a=e[n].references&&e[n].references.length||0,o=t.references&&t.references.length||0;(a<o||a===o&&e[n].startTime<t.startTime)&&(t=e[n])},a=0;a<e.length;a++)n(a);return t?"".concat(t.process.serviceName,": ").concat(t.operationName):""},function(e){return e.length?e[0].traceID:0}),Eh=r(567),Oh=r.n(Eh);function wh(e){var t=e.references?e.references.find(function(e){return"CHILD_OF"===e.refType}):null;return t?t.span:null}function jh(e,t){if("string"!==typeof e){if(e&&Array.isArray(e.parameters)&&"function"===typeof e.template)return e;throw new Error("Invalid template")}return{parameters:Ca(e),template:Ia.bind(null,e,t)}}function kh(e){if("string"===typeof e)return function(t){return t===e};if(Array.isArray(e))return function(t){return e.indexOf(t)>-1};if(e instanceof RegExp)return function(t){return e.test(t)};if("function"===typeof e)return e;if(null==e)return function(){return!0};throw new Error("Invalid value: ".concat(e))}var Nh=function(e){return e};function Sh(e,t){if(t)return t.find(function(t){return t.key===e})}function Dh(e,t){return e.template(t)}function Th(e,t,r,n){var a=r[n],o="logs",i=t.process.tags===r;i&&(o="process"),t.tags===r&&(o="tags");var c=[];return e.forEach(function(e){if(e.type(o)&&e.key(a.key)&&e.value(a.value)){var n={};e.parameters.every(function(c){var s=Sh(c,r);return s||i||(s=function(e,t){for(var r=t;r;){var n=Sh(e,r.tags)||Sh(e,r.process.tags);if(n)return n;r=wh(r)}}(c,t)),s?(n[c]=s.value,!0):(console.warn("Skipping link pattern, missing parameter ".concat(c," for key ").concat(a.key," in ").concat(o,"."),e.object),!1)})&&c.push({url:Dh(e.url,n),text:Dh(e.text,n)})}}),c}var xh,Rh,_h=(bt("linkPatterns")||[]).map(function(e){try{var t=jh(e.url,encodeURIComponent),r=jh(e.text,Nh);return{object:e,type:kh(e.type),key:kh(e.key),value:kh(e.value),url:t,text:r,parameters:Oh()(t.parameters.concat(r.parameters))}}catch(n){return console.error("Ignoring invalid link pattern: ".concat(n),e),null}}).filter(Boolean),Ih=Object(da.a)(10)(function(e){return e?function(e,t){var r=[],n=Object.keys(t).filter(function(e){return"string"===typeof t[e]||"number"===typeof t[e]});return e.filter(function(e){return e.type("traces")}).forEach(function(e){var a={};e.parameters.every(function(e){var r=e;return!!n.includes(r)&&(a[e]=t[r],!0)})&&r.push({url:Dh(e.url,a),text:Dh(e.text,a)})}),r}(_h,e):[]}),Ph=(xh=_h,Rh=new WeakMap,function(e,t,r){if(0===xh.length)return[];var n=t[r],a=Rh.get(n);return a||(a=Th(xh,e,t,r),Rh.set(n,a)),a}),Ch=(r(1326),function(e){return c.createElement("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",className:e.className},e.children," ",c.createElement(Ta,null))}),Mh=function(e){return c.createElement(U.a,null,e.map(function(e,t){var r=e.text,n=e.url;return c.createElement(U.a.Item,{key:"".concat(n,"-").concat(t)},c.createElement(Ch,{href:n},r))}))};function Vh(e){var t=e.links;return 1===t.length?c.createElement(Ch,{href:t[0].url,title:t[0].text,className:"TracePageHeader--back"}):c.createElement(B.a,{overlay:Mh(t),placement:"bottomRight",trigger:["click"]},c.createElement("a",{className:"TracePageHeader--back"},c.createElement(Ta,{isLarge:!0})))}var Lh=[{key:"timestamp",label:"Trace Start",renderer:function(e){var t,r=(t=e.startTime,Tr()(t/Os).format(Es)),n=r.match(/^(.+)(\.\d+)$/);return n?c.createElement("span",{className:"TracePageHeader--overviewItem--value"},n[1],c.createElement("span",{className:"TracePageHeader--overviewItem--valueDetail"},n[2])):r}},{key:"duration",label:"Duration",renderer:function(e){return Is(e.duration)}},{key:"service-count",label:"Services",renderer:function(e){return new Set(Rp()(e.processes).map(function(e){return e.serviceName})).size}},{key:"depth",label:"Depth",renderer:function(e){return Xe()(Tp()(e.spans,"depth"),"depth",0)+1}},{key:"span-count",label:"Total Spans",renderer:function(e){return e.spans.length}}];function Ah(e){var t=e.canCollapse,r=e.clearSearch,n=e.focusUiFindMatches,a=e.forwardedRef,o=e.hideMap,i=e.hideSummary,s=e.linkToStandalone,l=e.nextResult,u=e.onArchiveClicked,f=e.onSlimViewClicked,d=e.onTraceViewChange,p=e.prevResult,h=e.resultCount,m=e.showArchiveButton,v=e.showShortcutsHelp,g=e.showStandaloneLink,y=e.showViewOptions,b=e.slimView,E=e.textFilter,O=e.toSearch,w=e.trace,j=e.viewType,k=e.updateNextViewRangeTime,S=e.updateViewRangeTime,D=e.viewRange;if(!w)return null;var T=Ih(w),x=!i&&!b&&Lh.map(function(e){var t=e.renderer,r=Object(le.a)(e,["renderer"]);return Object(ue.a)({},r,{value:t(w)})}),R=c.createElement("h1",{className:"TracePageHeader--title ".concat(t?"is-collapsible":"")},c.createElement(sl,{traceName:bh(w.spans)})," ",c.createElement("small",{className:"u-tx-muted"},w.traceID.slice(0,7)));return c.createElement("header",{className:"TracePageHeader"},c.createElement("div",{className:"TracePageHeader--titleRow"},O&&c.createElement(N.a,{className:"TracePageHeader--back",to:O},c.createElement(Ip.a,null)),T&&T.length>0&&c.createElement(Vh,{links:T}),t?c.createElement("a",{className:"TracePageHeader--titleLink",onClick:f,role:"switch","aria-checked":!b},c.createElement(Vp.a,{className:"TracePageHeader--detailToggle ".concat(b?"":"is-expanded")}),R):R,c.createElement(gh,{clearSearch:r,focusUiFindMatches:n,nextResult:l,prevResult:p,ref:a,resultCount:h,textFilter:E,navigable:j===bp.TraceTimelineViewer}),v&&c.createElement(Jp,{className:"ub-m2"}),y&&c.createElement(Ap,{onTraceViewChange:d,traceID:w.traceID,viewType:j}),m&&c.createElement(vi.a,{className:"ub-mr2 ub-flex ub-items-center",htmlType:"button",onClick:u},c.createElement(Cp.a,{className:"TracePageHeader--archiveIcon"}),"Archive Trace"),g&&c.createElement(N.a,{className:"u-tx-inherit ub-nowrap ub-mx2",to:s,target:"_blank",rel:"noopener noreferrer"},c.createElement(Ta,{isLarge:!0}))),x&&c.createElement(yh,{className:"TracePageHeader--overviewItems",items:x}),!o&&!b&&c.createElement(hh,{trace:w,viewRange:D,updateNextViewRangeTime:k,updateViewRangeTime:S}))}var Fh,Bh,Hh=c.forwardRef(function(e,t){return c.createElement(Ah,Object.assign({},e,{forwardedRef:t}))}),Wh=function(){function e(t){Object(p.a)(this,e),this.isTagsOpen=void 0,this.isProcessOpen=void 0,this.logs=void 0,this.isWarningsOpen=void 0,this.isReferencesOpen=void 0;var r=t||{},n=r.isTagsOpen,a=r.isProcessOpen,o=r.isReferencesOpen,i=r.isWarningsOpen,c=r.logs;this.isTagsOpen=Boolean(n),this.isProcessOpen=Boolean(a),this.isReferencesOpen=Boolean(o),this.isWarningsOpen=Boolean(i),this.logs={isOpen:Boolean(c&&c.isOpen),openedItems:c&&c.openedItems?new Set(c.openedItems):new Set}}return Object(h.a)(e,[{key:"toggleTags",value:function(){var t=new e(this);return t.isTagsOpen=!this.isTagsOpen,t}},{key:"toggleProcess",value:function(){var t=new e(this);return t.isProcessOpen=!this.isProcessOpen,t}},{key:"toggleReferences",value:function(){var t=new e(this);return t.isReferencesOpen=!this.isReferencesOpen,t}},{key:"toggleWarnings",value:function(){var t=new e(this);return t.isWarningsOpen=!this.isWarningsOpen,t}},{key:"toggleLogs",value:function(){var t=new e(this);return t.logs.isOpen=!this.logs.isOpen,t}},{key:"toggleLogItem",value:function(t){var r=new e(this);return r.logs.openedItems.has(t)?r.logs.openedItems.delete(t):r.logs.openedItems.add(t),r}}]),e}(),Gh=r(568),Uh=r.n(Gh);function zh(e){return Xe()(Uh()(e.references,function(e){var t=e.span,r=e.refType;return t&&t.spanID&&("CHILD_OF"===r||"FOLLOWS_FROM"===r)}),"span")}function qh(e){var t=[];if(!e)return t;for(var r=zh(e);r;)t.push(r.spanID),r=zh(r);return t}function Kh(e,t){return e.filter(function(e){return e.hasChildren}).length===t.size}function Jh(){return{childrenHiddenIDs:new Set,detailStates:new Map,hoverIndentGuideIds:new Set,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:parseFloat(localStorage.getItem("spanNameColumnWidth")||"0.25"),traceID:null}}var Zh=Ra("@jaeger-ui/trace-timeline-viewer",["ADD_HOVER_INDENT_GUIDE_ID","CHILDREN_TOGGLE","CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH","COLLAPSE_ALL","COLLAPSE_ONE","DETAIL_TOGGLE","DETAIL_TAGS_TOGGLE","DETAIL_PROCESS_TOGGLE","DETAIL_LOGS_TOGGLE","DETAIL_LOG_ITEM_TOGGLE","DETAIL_WARNINGS_TOGGLE","DETAIL_REFERENCES_TOGGLE","EXPAND_ALL","EXPAND_ONE","FOCUS_UI_FIND_MATCHES","REMOVE_HOVER_INDENT_GUIDE_ID","SET_SPAN_NAME_COLUMN_WIDTH","SET_TRACE"]),Yh=Object(xa.a)((Fh={},Object(Nt.a)(Fh,Zh.ADD_HOVER_INDENT_GUIDE_ID,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.CHILDREN_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH,function(){return{}}),Object(Nt.a)(Fh,Zh.COLLAPSE_ALL,function(e){return{spans:e}}),Object(Nt.a)(Fh,Zh.COLLAPSE_ONE,function(e){return{spans:e}}),Object(Nt.a)(Fh,Zh.DETAIL_LOG_ITEM_TOGGLE,function(e,t){return{logItem:t,spanID:e}}),Object(Nt.a)(Fh,Zh.DETAIL_LOGS_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.EXPAND_ALL,function(){return{}}),Object(Nt.a)(Fh,Zh.EXPAND_ONE,function(e){return{spans:e}}),Object(Nt.a)(Fh,Zh.DETAIL_PROCESS_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.DETAIL_WARNINGS_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.DETAIL_REFERENCES_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.DETAIL_TAGS_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.DETAIL_TOGGLE,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.FOCUS_UI_FIND_MATCHES,function(e,t,r){return{trace:e,uiFind:t,allowHide:r}}),Object(Nt.a)(Fh,Zh.REMOVE_HOVER_INDENT_GUIDE_ID,function(e){return{spanID:e}}),Object(Nt.a)(Fh,Zh.SET_SPAN_NAME_COLUMN_WIDTH,function(e){return{width:e}}),Object(Nt.a)(Fh,Zh.SET_TRACE,function(e,t){return{trace:e,uiFind:t}}),Fh)).jaegerUi.traceTimelineViewer;function Qh(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Map,a=new Set,o=new Map,i=!1;t.forEach(function(e){n.set(e.spanID,e),r&&a.add(e.spanID)});var c=xf(e,t);return c&&c.size&&(c.forEach(function(e){var t=n.get(e);o.set(e,new Wh),qh(t).forEach(function(e){return a.delete(e)})}),i=!0),{childrenHiddenIDs:a,detailStates:o,shouldScrollToFirstUiFindMatch:i}}function $h(e,t,r){var n,a=r.spanID,o=t.detailStates.get(a);if(!o)return t;n="tags"===e?o.toggleTags():"process"===e?o.toggleProcess():"warnings"===e?o.toggleWarnings():"references"===e?o.toggleReferences():o.toggleLogs();var i=new Map(t.detailStates);return i.set(a,n),Object(ue.a)({},t,{detailStates:i})}var Xh=$h.bind(null,"tags"),em=$h.bind(null,"process"),tm=$h.bind(null,"logs"),rm=$h.bind(null,"warnings"),nm=$h.bind(null,"references");var am=Object(Fu.a)((Bh={},Object(Nt.a)(Bh,Zh.ADD_HOVER_INDENT_GUIDE_ID,Bu(function(e,t){var r=t.spanID,n=new Set(e.hoverIndentGuideIds);return n.add(r),Object(ue.a)({},e,{hoverIndentGuideIds:n})})),Object(Nt.a)(Bh,Zh.CHILDREN_TOGGLE,Bu(function(e,t){var r=t.spanID,n=new Set(e.childrenHiddenIDs);return n.has(r)?n.delete(r):n.add(r),Object(ue.a)({},e,{childrenHiddenIDs:n})})),Object(Nt.a)(Bh,Zh.CLEAR_SHOULD_SCROLL_TO_FIRST_UI_FIND_MATCH,Bu(function(e){return e.shouldScrollToFirstUiFindMatch?Object(ue.a)({},e,{shouldScrollToFirstUiFindMatch:!1}):e})),Object(Nt.a)(Bh,Zh.COLLAPSE_ALL,Bu(function(e,t){var r=t.spans;if(Kh(r,e.childrenHiddenIDs))return e;var n=r.reduce(function(e,t){return t.hasChildren&&e.add(t.spanID),e},new Set);return Object(ue.a)({},e,{childrenHiddenIDs:n})})),Object(Nt.a)(Bh,Zh.COLLAPSE_ONE,Bu(function(e,t){var r,n=t.spans;if(Kh(n,e.childrenHiddenIDs))return e;var a=n.reduce(function(e,t){return r&&t.depth<=r.depth?(e.add(r.spanID),t.hasChildren&&(r=t)):t.hasChildren&&!e.has(t.spanID)&&(r=t),e},new Set(e.childrenHiddenIDs));return r&&a.add(r.spanID),Object(ue.a)({},e,{childrenHiddenIDs:a})})),Object(Nt.a)(Bh,Zh.DETAIL_LOGS_TOGGLE,Bu(tm)),Object(Nt.a)(Bh,Zh.DETAIL_LOG_ITEM_TOGGLE,Bu(function(e,t){var r=t.spanID,n=t.logItem,a=e.detailStates.get(r);if(!a)return e;var o=a.toggleLogItem(n),i=new Map(e.detailStates);return i.set(r,o),Object(ue.a)({},e,{detailStates:i})})),Object(Nt.a)(Bh,Zh.DETAIL_PROCESS_TOGGLE,Bu(em)),Object(Nt.a)(Bh,Zh.DETAIL_WARNINGS_TOGGLE,Bu(rm)),Object(Nt.a)(Bh,Zh.DETAIL_REFERENCES_TOGGLE,Bu(nm)),Object(Nt.a)(Bh,Zh.DETAIL_TAGS_TOGGLE,Bu(Xh)),Object(Nt.a)(Bh,Zh.DETAIL_TOGGLE,Bu(function(e,t){var r=t.spanID,n=new Map(e.detailStates);return n.has(r)?n.delete(r):n.set(r,new Wh),Object(ue.a)({},e,{detailStates:n})})),Object(Nt.a)(Bh,Zh.EXPAND_ALL,Bu(function(e){var t=new Set;return Object(ue.a)({},e,{childrenHiddenIDs:t})})),Object(Nt.a)(Bh,Zh.EXPAND_ONE,Bu(function(e,t){var r=t.spans;if(0===e.childrenHiddenIDs.size)return e;var n=-1,a=!0,o=r.reduce(function(e,t){return t.depth<=n&&(a=!0),a&&e.has(t.spanID)&&(e.delete(t.spanID),a=!1,n=t.depth),e},new Set(e.childrenHiddenIDs));return Object(ue.a)({},e,{childrenHiddenIDs:o})})),Object(Nt.a)(Bh,Zh.FOCUS_UI_FIND_MATCHES,Bu(function(e,t){var r=t.uiFind,n=t.trace,a=t.allowHide;return r?Object(ue.a)({},e,Qh(r,n.spans,a)):e})),Object(Nt.a)(Bh,Zh.REMOVE_HOVER_INDENT_GUIDE_ID,Bu(function(e,t){var r=t.spanID,n=new Set(e.hoverIndentGuideIds);return n.delete(r),Object(ue.a)({},e,{hoverIndentGuideIds:n})})),Object(Nt.a)(Bh,Zh.SET_SPAN_NAME_COLUMN_WIDTH,Bu(function(e,t){var r=t.width;return localStorage.setItem("spanNameColumnWidth",r.toString()),Object(ue.a)({},e,{spanNameColumnWidth:r})})),Object(Nt.a)(Bh,Zh.SET_TRACE,Bu(function(e,t){var r=t.uiFind,n=t.trace,a=n.traceID,o=n.spans;if(a===e.traceID)return e;var i=e.spanNameColumnWidth;return Object.assign(Object(ue.a)({},Jh(),{spanNameColumnWidth:i,traceID:a}),r?Qh(r,o):null)})),Bh),Jh());r(1330);function om(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function im(e){return s.a.createElement("span",{className:"TimelineCollapser--tooltipTitle"},e)}var cm=function(e){Object(m.a)(r,e);var t=om(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).containerRef=void 0,n.getContainer=function(){return n.containerRef.current||document.createElement("div")},n.containerRef=s.a.createRef(),n}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.onExpandAll,r=e.onExpandOne,n=e.onCollapseAll,a=e.onCollapseOne;return s.a.createElement("div",{className:"TimelineCollapser",ref:this.containerRef},s.a.createElement(aa.a,{title:im("Expand +1"),getPopupContainer:this.getContainer},s.a.createElement(W.a,{type:"right",onClick:r,className:"TimelineCollapser--btn-expand"})),s.a.createElement(aa.a,{title:im("Collapse +1"),getPopupContainer:this.getContainer},s.a.createElement(W.a,{type:"right",onClick:a,className:"TimelineCollapser--btn"})),s.a.createElement(aa.a,{title:im("Expand All"),getPopupContainer:this.getContainer},s.a.createElement(W.a,{type:"double-right",onClick:t,className:"TimelineCollapser--btn-expand"})),s.a.createElement(aa.a,{title:im("Collapse All"),getPopupContainer:this.getContainer},s.a.createElement(W.a,{type:"double-right",onClick:n,className:"TimelineCollapser--btn"})))}}]),r}(s.a.PureComponent);r(1332);function sm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function lm(e,t,r){return e+r*(t-e)}function um(e,t,r){return(r-e)/(t-e)}function fm(e,t,r,n,a){var o=function(e,t){var r=e<t?[e,t]:[t,e],n=Object(xe.a)(r,2),a=n[0],o=n[1];return a>=1||o<=0?{isOutOfView:!0}:(a<0&&(a=0),o>1&&(o=1),{isDraggingLeft:e>t,left:"".concat(100*a,"%"),width:"".concat(100*(o-a),"%")})}(um(e,t,r),um(e,t,n));if(function(e){return Reflect.has(e,"isOutOfView")}(o))return null;var i=o.isDraggingLeft,s=o.left,l=o.width,u=V()({isDraggingLeft:i,isDraggingRight:!i,isReframeDrag:!a,isShiftDrag:a});return c.createElement("div",{className:"TimelineViewingLayer--dragged ".concat(u),style:{left:s,width:l}})}var dm=function(e){Object(m.a)(r,e);var t=sm(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._draggerReframe=void 0,n._root=void 0,n._getDraggingBounds=function(){var e=n._root.current;if(!e)throw new Error("Component must be mounted in order to determine DraggableBounds");var t=e.getBoundingClientRect();return{clientXLeft:t.left,width:t.width}},n._handleReframeMouseMove=function(e){var t=e.value,r=Object(xe.a)(n.props.viewRangeTime.current,2),a=lm(r[0],r[1],t);n.props.updateNextViewRangeTime({cursor:a})},n._handleReframeMouseLeave=function(){n.props.updateNextViewRangeTime({cursor:void 0})},n._getAnchorAndShift=function(e){var t=n.props.viewRangeTime,r=t.current,a=t.reframe,o=Object(xe.a)(r,2),i=lm(o[0],o[1],e);return{anchor:a?a.anchor:i,shift:i}},n._handleReframeDragUpdate=function(e){var t=e.value,r=n._getAnchorAndShift(t),a={reframe:{anchor:r.anchor,shift:r.shift}};n.props.updateNextViewRangeTime(a)},n._handleReframeDragEnd=function(e){var t=e.manager,r=e.value,a=n._getAnchorAndShift(r),o=a.anchor,i=a.shift,c=i<o?[i,o]:[o,i],s=Object(xe.a)(c,2),l=s[0],u=s[1];t.resetBounds(),n.props.updateViewRangeTime(l,u,"timeline-header")},n._draggerReframe=new Wi({getBounds:n._getDraggingBounds,onDragEnd:n._handleReframeDragEnd,onDragMove:n._handleReframeDragUpdate,onDragStart:n._handleReframeDragUpdate,onMouseLeave:n._handleReframeMouseLeave,onMouseMove:n._handleReframeMouseMove}),n._root=c.createRef(),n}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.boundsInvalidator;e.boundsInvalidator!==t&&this._draggerReframe.resetBounds()}},{key:"componentWillUnmount",value:function(){this._draggerReframe.dispose()}},{key:"render",value:function(){var e,t=this.props.viewRangeTime,r=t.current,n=t.cursor,a=t.reframe,o=t.shiftEnd,i=t.shiftStart,s=Object(xe.a)(r,2),l=s[0],u=s[1];return!(null!=a||null!=o||null!=i)&&null!=n&&n>=l&&n<=u&&(e="".concat(100*um(l,u,n),"%")),c.createElement("div",{"aria-hidden":!0,className:"TimelineViewingLayer",ref:this._root,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},null!=e&&c.createElement("div",{className:"TimelineViewingLayer--cursorGuide",style:{left:e}}),null!=a&&fm(l,u,a.anchor,a.shift,!1),null!=o&&fm(l,u,u,o,!0),null!=i&&fm(l,u,l,i,!0))}}]),r}(c.PureComponent);function pm(e,t,r){return!(!Array.isArray(r.tags)||!r.tags.length)&&r.tags.some(function(r){return r.key===e&&r.value===t})}var hm=pm.bind(null,"span.kind","client"),mm=pm.bind(null,"span.kind","server"),vm=pm.bind(null,"error",!0),gm=pm.bind(null,"error","true"),ym=function(e){return vm(e)||gm(e)};r(1334);function bm(e){var t,r=e.endTime,n=e.numTicks,a=e.showLabels,o=e.startTime;if(a){t=[];for(var i=(r||0)-(o||0),s=0;s<n;s++){var l=(o||0)+s/(n-1)*i;t.push(Is(l))}}for(var u=[],f=0;f<n;f++){var d=f/(n-1);u.push(c.createElement("div",{key:d,className:"Ticks--tick",style:{left:"".concat(100*d,"%")}},t&&c.createElement("span",{className:"Ticks--tickLabel ".concat(d>=1?"isEndAnchor":"")},t[f])))}return c.createElement("div",{className:"Ticks"},u)}bm.defaultProps={endTime:null,showLabels:null,startTime:null};r(1336);function Em(e){var t=e.children,r=e.className,n=void 0===r?"":r,a=Object(le.a)(e,["children","className"]);return c.createElement("div",Object.assign({className:"flex-row ".concat(n)},a),t)}function Om(e){var t=e.children,r=e.className,n=void 0===r?"":r,a=e.width,o=e.style,i=Object(le.a)(e,["children","className","width","style"]),s="".concat(100*a,"%"),l=Object(ue.a)({},o,{flexBasis:s,maxWidth:s});return c.createElement("div",Object.assign({className:"ub-relative ".concat(n),style:l},i),t)}Em.defaultProps={className:""},Om.defaultProps={className:"",style:{}},Em.Cell=Om;r(1338);function wm(e){var t=e.duration,r=e.nameColumnWidth,n=e.numTicks,a=e.onCollapseAll,o=e.onCollapseOne,i=e.onColummWidthChange,s=e.onExpandAll,l=e.onExpandOne,u=e.updateViewRangeTime,f=e.updateNextViewRangeTime,d=e.viewRangeTime,p=Object(xe.a)(d.current,2),h=p[0],m=p[1];return c.createElement(Em,{className:"TimelineHeaderRow"},c.createElement(Em.Cell,{className:"ub-flex ub-px2",width:r},c.createElement("h3",{className:"TimelineHeaderRow--title"},"Service & Operation"),c.createElement(cm,{onCollapseAll:a,onExpandAll:s,onCollapseOne:o,onExpandOne:l})),c.createElement(Em.Cell,{width:1-r},c.createElement(dm,{boundsInvalidator:r,updateNextViewRangeTime:f,updateViewRangeTime:u,viewRangeTime:d}),c.createElement(bm,{numTicks:n,startTime:h*t,endTime:m*t,showLabels:!0})),c.createElement(Ui,{position:r,onChange:i,min:.15,max:.85}))}var jm=r(89),km=r.n(jm),Nm=function(){function e(t){Object(p.a)(this,e),this.bufferLen=void 0,this.dataLen=void 0,this.heights=void 0,this.lastI=void 0,this.ys=void 0,this.ys=[],this.heights=[],this.bufferLen=t,this.dataLen=-1,this.lastI=-1}return Object(h.a)(e,[{key:"profileData",value:function(e){e!==this.dataLen&&(this.dataLen=e,this.ys.length=e,this.heights.length=e,this.lastI>=e&&(this.lastI=e-1))}},{key:"calcHeights",value:function(e,t,r){null!=r&&(this.lastI=r);var n=e+this.bufferLen;if(!(n<=this.lastI)){n>=this.heights.length&&(n=this.heights.length-1);var a=this.lastI;for(-1===this.lastI&&(a=0,this.ys[0]=0);a<=n;){var o=this.heights[a]=t(a);this.ys[a+1]=this.ys[a]+o,a++}this.lastI=n}}},{key:"calcYs",value:function(e,t){for(;(null==this.ys[this.lastI]||e>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,t)}},{key:"confirmHeight",value:function(e,t){var r=e;if(r>this.lastI)this.calcHeights(r,t);else{var n=t(r);if(n!==this.heights[r]){var a=n-this.heights[r];for(this.heights[r]=n;++r<=this.lastI;)this.ys[r]+=a;null!=this.ys[this.lastI+1]&&(this.ys[this.lastI+1]+=a)}}}},{key:"findFloorIndex",value:function(e,t){this.calcYs(e,t);var r,n=0,a=this.lastI;if(this.ys.length<2||e<this.ys[1])return 0;if(e>this.ys[a])return a;for(;n<a;)if(r=n+.5*(a-n)|0,e>this.ys[r]){if(e<=this.ys[r+1])return r;n=r}else{if(!(e<this.ys[r]))return r;if(e>=this.ys[r-1])return r-1;a=r}throw new Error("unable to find floor index for y=".concat(e))}},{key:"getRowPosition",value:function(e,t){return this.confirmHeight(e,t),{height:this.heights[e],y:this.ys[e]}}},{key:"getEstimatedHeight",value:function(){var e=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?0|e:e/(this.lastI+1)*this.heights.length|0}}]),e}();function Sm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Dm=function(e){Object(m.a)(r,e);var t=Sm(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e))._yPositions=void 0,n._knownHeights=void 0,n._startIndexDrawn=void 0,n._endIndexDrawn=void 0,n._startIndex=void 0,n._endIndex=void 0,n._viewHeight=void 0,n._scrollTop=void 0,n._isScrolledOrResized=void 0,n._htmlTopOffset=void 0,n._windowScrollListenerAdded=void 0,n._htmlElm=void 0,n._wrapperElm=void 0,n._itemHolderElm=void 0,n.getViewHeight=function(){return n._viewHeight},n.getBottomVisibleIndex=function(){var e=n._scrollTop+n._viewHeight;return n._yPositions.findFloorIndex(e,n._getHeight)},n.getTopVisibleIndex=function(){return n._yPositions.findFloorIndex(n._scrollTop,n._getHeight)},n.getRowPosition=function(e){return n._yPositions.getRowPosition(e,n._getHeight)},n._onScroll=function(){n._isScrolledOrResized||(n._isScrolledOrResized=!0,window.requestAnimationFrame(n._positionList))},n._positionList=function(){if(n._isScrolledOrResized=!1,n._wrapperElm){n._calcViewIndexes();var e=n.props.viewBufferMin>n._startIndex?0:n._startIndex-n.props.viewBufferMin,t=n.props.viewBufferMin<n.props.dataLength-n._endIndex?n._endIndex+n.props.viewBufferMin:n.props.dataLength-1;(e<n._startIndexDrawn||t>n._endIndexDrawn)&&n.forceUpdate()}},n._initWrapper=function(e){n._wrapperElm=e,!n.props.windowScroller&&e&&(n._viewHeight=e.clientHeight)},n._initItemHolder=function(e){n._itemHolderElm=e,n._scanItemHeights()},n._scanItemHeights=function(){var e=n.props.getIndexFromKey;if(n._itemHolderElm){for(var t=null,r=null,a=!1,o=n._itemHolderElm.childNodes,i=o.length,c=0;c<i;c++){var s=o[c],l=s.getAttribute("data-item-key");if(l){var u=(s.firstElementChild||s).clientHeight;u!==n._knownHeights.get(l)&&(n._knownHeights.set(l,u),a?r=l:(a=!0,t=r=l))}else console.warn("itemKey not found")}if(null!=t&&null!=r){var f=e(t),d=r===t?f:e(r);n._yPositions.calcHeights(d,n._getHeight,f),n.forceUpdate()}}},n._getHeight=function(e){var t=n.props.getKeyFromIndex(e),r=n._knownHeights.get(t);return null!=r&&r===r?r:n.props.itemHeightGetter(e,t)},n._yPositions=new Nm(200),n._knownHeights=new Map,n._startIndexDrawn=Math.pow(2,20),n._endIndexDrawn=-Math.pow(2,20),n._startIndex=0,n._endIndex=0,n._viewHeight=-1,n._scrollTop=-1,n._isScrolledOrResized=!1,n._htmlTopOffset=-1,n._windowScrollListenerAdded=!1,n._htmlElm=document.documentElement,n._wrapperElm=void 0,n._itemHolderElm=void 0,n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){if(this.props.windowScroller){if(this._wrapperElm){var e=this._wrapperElm.getBoundingClientRect().top;this._htmlTopOffset=e+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}}},{key:"componentDidUpdate",value:function(){this._itemHolderElm&&this._scanItemHeights()}},{key:"componentWillUnmount",value:function(){this._windowScrollListenerAdded&&window.removeEventListener("scroll",this._onScroll)}},{key:"_isViewChanged",value:function(){if(!this._wrapperElm)return!1;var e=this.props.windowScroller,t=e?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,r=e?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return t!==this._viewHeight||r!==this._scrollTop}},{key:"_calcViewIndexes",value:function(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm)return this._viewHeight=-1,this._startIndex=0,void(this._endIndex=0);this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}var e=this._scrollTop,t=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(e,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(t,this._getHeight)}},{key:"render",value:function(){var e,t,r=this.props,n=r.dataLength,a=r.getKeyFromIndex,o=r.initialDraw,i=void 0===o?300:o,s=r.itemRenderer,l=r.viewBuffer,u=r.viewBufferMin,f=this._getHeight,d=[];if(this._yPositions.profileData(n),this._wrapperElm){this._isViewChanged()&&this._calcViewIndexes();var p=u>this._startIndex?0:this._startIndex-u,h=u<n-this._endIndex?this._endIndex+u:n-1;p<this._startIndexDrawn||h>this._endIndexDrawn?(e=l>this._startIndex?0:this._startIndex-l,(t=this._endIndex+l)>=n&&(t=n-1)):(e=this._startIndexDrawn,t=this._endIndexDrawn>n-1?n-1:this._endIndexDrawn)}else e=0,t=(i<n?i:n)-1;this._yPositions.calcHeights(t,f,e||-1),this._startIndexDrawn=e,this._endIndexDrawn=t,d.length=t-e+1;for(var m=e;m<=t;m++){var v=this._yPositions.getRowPosition(m,f),g=v.y,y={height:v.height,top:g,position:"absolute"},b=a(m),E={"data-item-key":b};d.push(s(b,y,m,E))}var O={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(O.onScroll=this._onScroll,O.style.height="100%",O.style.overflowY="auto");var w={position:"relative",height:this._yPositions.getEstimatedHeight()};return c.createElement("div",O,c.createElement("div",{style:w},c.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},d)))}}]),r}(c.Component);Dm.defaultProps={initialDraw:300,itemsWrapperClassName:"",windowScroller:!1};var Tm=r(365),xm=r.n(Tm),Rm=r(569),_m=r.n(Rm),Im=r(570),Pm=r.n(Im);r(1340);function Cm(e){var t=e.reference,r=e.children,n=e.className,a=e.focusSpan,o=Object(le.a)(e,["reference","children","className","focusSpan"]);return delete o.onClick,t.span?s.a.createElement("a",Object.assign({role:"button",onClick:function(){return a(t.spanID)},className:n},o),r):s.a.createElement("a",Object.assign({href:ee(t.traceID,t.spanID),target:"_blank",rel:"noopener noreferrer",className:n},o),r)}function Mm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Vm=function(e){Object(m.a)(r,e);var t=Mm(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).referencesList=function(t){return s.a.createElement(U.a,null,t.map(function(t){var r=t.span,n=t.spanID;return s.a.createElement(U.a.Item,{key:"".concat(n)},s.a.createElement(Cm,{reference:t,focusSpan:e.props.focusSpan,className:"ReferencesButton--TraceRefLink"},r?"".concat(r.process.serviceName,":").concat(r.operationName," - ").concat(t.spanID):"(another trace) - ".concat(t.spanID),!r&&s.a.createElement(Ta,null)))}))},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.references,r=e.children,n=e.tooltipText,a=e.focusSpan,o={arrowPointAtCenter:!0,mouseLeaveDelay:.5,placement:"bottom",title:n,overlayClassName:"ReferencesButton--tooltip"};if(t.length>1)return s.a.createElement(aa.a,o,s.a.createElement(B.a,{overlay:this.referencesList(t),placement:"bottomRight",trigger:["click"]},s.a.createElement("a",{className:"ReferencesButton-MultiParent"},r)));var i=t[0];return s.a.createElement(aa.a,o,s.a.createElement(Cm,{reference:i,focusSpan:a,className:"ReferencesButton-MultiParent"},r))}}]),r}(s.a.PureComponent),Lm=r(109),Am=r.n(Lm);r(1342);function Fm(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Bm=function(e){Object(m.a)(r,e);var t=Fm(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).ancestorIds=void 0,n.handleMouseLeave=function(e,t){e.relatedTarget instanceof HTMLSpanElement&&Xe()(e,"relatedTarget.dataset.ancestorId")===t||n.props.removeHoverIndentGuideId(t)},n.handleMouseEnter=function(e,t){e.relatedTarget instanceof HTMLSpanElement&&Xe()(e,"relatedTarget.dataset.ancestorId")===t||n.props.addHoverIndentGuideId(t)},n.ancestorIds=qh(e.span),n.ancestorIds.push("root"),n.ancestorIds.reverse(),n}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.childrenVisible,n=t.onClick,a=t.showChildrenIcon,o=t.span,i=o.hasChildren,c=o.spanID,l=i?{onClick:n,role:"switch","aria-checked":r}:null,u=a&&i&&(r?s.a.createElement(Am.a,null):s.a.createElement(To.a,null));return s.a.createElement("span",Object.assign({className:"SpanTreeOffset ".concat(i?"is-parent":"")},l),this.ancestorIds.map(function(t){return s.a.createElement("span",{key:t,className:V()("SpanTreeOffset--indentGuide",{"is-active":e.props.hoverIndentGuideIds.has(t)}),"data-ancestor-id":t,onMouseEnter:function(r){return e.handleMouseEnter(r,t)},onMouseLeave:function(r){return e.handleMouseLeave(r,t)}})}),u&&s.a.createElement("span",{className:"SpanTreeOffset--iconWrapper",onMouseEnter:function(t){return e.handleMouseEnter(t,c)},onMouseLeave:function(t){return e.handleMouseLeave(t,c)}},u))}}]),r}(s.a.PureComponent);Bm.defaultProps={childrenVisible:!1,onClick:void 0,showChildrenIcon:!0};var Hm=Object(E.b)(function(e){return{hoverIndentGuideIds:e.traceTimeline.hoverIndentGuideIds}},function(e){var t=Object(ar.b)(Yh,e);return{addHoverIndentGuideId:t.addHoverIndentGuideId,removeHoverIndentGuideId:t.removeHoverIndentGuideId}})(Bm),Wm=r(571),Gm=r.n(Wm),Um=r(572),zm=r.n(Um),qm=r(133),Km=r.n(qm),Jm="label",Zm=r(573),Ym=r.n(Zm),Qm=(r(1359),/^(\[|\{)/);var $m=function(e){return c.createElement("div",{className:"json-markup"},c.createElement("span",{className:"json-markup-string"},e))};function Xm(e){var t={__html:Ym()(e)};return c.createElement("div",{dangerouslySetInnerHTML:t})}function ev(e){var t;if("string"===typeof e){var r=function(e){try{return Qm.test(e)?JSON.parse(e):e}catch(t){return e}}(e);t="string"===typeof r?$m(r):Xm(r)}else t=Xm(e);return c.createElement("div",{className:"ub-inline-block"},t)}var tv=function(e){return c.createElement("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer"},e.children," ",c.createElement(W.a,{className:"KeyValueTable--linkIcon",type:"export"}))};tv.defaultProps={title:""};var rv=function(e){return c.createElement(U.a,null,e.map(function(e,t){var r=e.text,n=e.url;return c.createElement(U.a.Item,{key:"".concat(n,"-").concat(t)},c.createElement(tv,{href:n},r))}))};function nv(e){var t=e.data,r=e.linksGetter;return c.createElement("div",{className:"KeyValueTable u-simple-scrollbars"},c.createElement("table",{className:"u-width-100"},c.createElement("tbody",{className:"KeyValueTable--body"},t.map(function(e,n){var a,o=ev(e.value),i=r?r(t,n):null;return a=i&&1===i.length?c.createElement("div",null,c.createElement(tv,{href:i[0].url,title:i[0].text},o)):i&&i.length>1?c.createElement("div",null,c.createElement(B.a,{overlay:rv(i),placement:"bottomRight",trigger:["click"]},c.createElement("a",null,o," ",c.createElement(W.a,{className:"KeyValueTable--linkIcon",type:"profile"})))):o,c.createElement("tr",{className:"KeyValueTable--row",key:"".concat(e.key,"-").concat(n)},c.createElement("td",{className:"KeyValueTable--keyColumn"},e.key),c.createElement("td",null,a),c.createElement("td",{className:"KeyValueTable--copyColumn"},c.createElement(df,{className:"KeyValueTable--copyIcon",copyText:JSON.stringify(e,null,2),tooltipTitle:"Copy JSON"})))}))))}r(1361);function av(e){var t=e.data;return Array.isArray(t)&&t.length?c.createElement("ul",{className:"AccordianKeyValues--summary"},t.map(function(e,t){return c.createElement("li",{className:"AccordianKeyValues--summaryItem",key:"".concat(e.key,"-").concat(t)},c.createElement("span",{className:"AccordianKeyValues--summaryLabel"},e.key),c.createElement("span",{className:"AccordianKeyValues--summaryDelim"},"="),String(e.value))})):null}function ov(e){var t=e.className,r=e.data,n=e.highContrast,a=e.interactive,o=e.isOpen,i=e.label,s=e.linksGetter,l=e.onToggle,u=!Array.isArray(r)||!r.length,f=V()("u-align-icon",{"AccordianKeyValues--emptyIcon":u}),d=null,p=null;return a&&(d=o?c.createElement(Am.a,{className:f}):c.createElement(Km.a,{className:f}),p={"aria-checked":o,onClick:u?null:l,role:"switch"}),c.createElement("div",{className:V()(t,"u-tx-ellipsis")},c.createElement("div",Object.assign({className:V()("AccordianKeyValues--header",{"is-empty":u,"is-high-contrast":n})},p),d,c.createElement("strong",{"data-test":Jm},i,o||":"),!o&&c.createElement(av,{data:r})),o&&c.createElement(nv,{data:r,linksGetter:s}))}av.defaultProps={data:null},ov.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};r(1363);function iv(e){var t=e.interactive,r=e.isOpen,n=e.linksGetter,a=e.logs,o=e.openedItems,i=e.onItemToggle,s=e.onToggle,l=e.timestamp,u=null,f="span",d=null;return t&&(u=r?c.createElement(Am.a,{className:"u-align-icon"}):c.createElement(Km.a,{className:"u-align-icon"}),f="a",d={"aria-checked":r,onClick:s,role:"switch"}),c.createElement("div",{className:"AccordianLogs"},c.createElement(f,Object.assign({className:V()("AccordianLogs--header",{"is-open":r})},d),u," ",c.createElement("strong",null,"Logs")," (",a.length,")"),r&&c.createElement("div",{className:"AccordianLogs--content"},zm()(a,"timestamp").map(function(e,r){return c.createElement(ov,{key:"".concat(e.timestamp,"-").concat(r),className:r<a.length-1?"ub-mb1":null,data:e.fields||[],highContrast:!0,interactive:t,isOpen:!!o&&o.has(e),label:"".concat(Is(e.timestamp-l)),linksGetter:n,onToggle:t&&i?function(){return i(e)}:null})}),c.createElement("small",{className:"AccordianLogs--footer"},"Log timestamps are relative to the start time of the full trace.")))}iv.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};r(1365);function cv(e){return"".concat((100*e).toFixed(1),"%")}var sv=Object(_l.a)(Object(_l.d)("label","setLabel",function(e){return e.shortLabel}),Object(_l.c)(function(e){var t=e.setLabel,r=e.shortLabel,n=e.longLabel;return{setLongLabel:function(){return t(n)},setShortLabel:function(){return t(r)}}}),Object(_l.b)(["label","rpc","viewStart","viewEnd"]))(function(e){var t=e.viewEnd,r=e.viewStart,n=e.getViewedBounds,a=e.color,o=e.label,i=e.hintSide,c=e.onClick,l=e.setLongLabel,u=e.setShortLabel,f=e.rpc,d=e.traceStartTime,p=e.span,h=Gm()(p.logs,function(e){var t=n(e.timestamp,e.timestamp).start;return cv(Math.round(500*t)/500)});return s.a.createElement("div",{className:"SpanBar--wrapper",onClick:c,onMouseOut:u,onMouseOver:l,"aria-hidden":!0},s.a.createElement("div",{"aria-label":o,className:"SpanBar--bar",style:{background:a,left:cv(r),width:cv(t-r)}},s.a.createElement("div",{className:"SpanBar--label is-".concat(i)},o)),s.a.createElement("div",null,Object.keys(h).map(function(e){return s.a.createElement(Wn.a,{key:e,arrowPointAtCenter:!0,overlayClassName:"SpanBar--logHint",placement:"topLeft",content:s.a.createElement(iv,{interactive:!1,isOpen:!0,logs:h[e],timestamp:d})},s.a.createElement("div",{className:"SpanBar--logMarker",style:{left:e}}))})),f&&s.a.createElement("div",{className:"SpanBar--rpc",style:{background:f.color,left:cv(f.viewStart),width:cv(f.viewEnd-f.viewStart)}}))});r(1367);function lv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var uv=function(e){Object(m.a)(r,e);var t=lv(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._detailToggle=function(){e.props.onDetailToggled(e.props.span.spanID)},e._childrenToggle=function(){e.props.onChildrenToggled(e.props.span.spanID)},e}return Object(h.a)(r,[{key:"render",value:function(){var e,t,r=this.props,n=r.className,a=r.color,o=r.columnDivision,i=r.isChildrenExpanded,s=r.isDetailExpanded,l=r.isMatchingFilter,u=r.numTicks,f=r.rpc,d=r.noInstrumentedServer,p=r.showErrorIcon,h=r.getViewedBounds,m=r.traceStartTime,v=r.span,g=r.focusSpan,y=v.duration,b=v.hasChildren,E=v.operationName,O=v.process.serviceName,w=Is(y),j=h(v.startTime,v.startTime+v.duration),k=j.start,N=j.end,S="".concat(O,"::").concat(E);return k>1-N?(e="".concat(S," | ").concat(w),t="left"):(e="".concat(w," | ").concat(S),t="right"),c.createElement(Em,{className:"\n          span-row\n          ".concat(n||"","\n          ").concat(s?"is-expanded":"","\n          ").concat(l?"is-matching-filter":"","\n        ")},c.createElement(Em.Cell,{className:"span-name-column",width:o},c.createElement("div",{className:"span-name-wrapper ".concat(l?"is-matching-filter":"")},c.createElement(Hm,{childrenVisible:i,span:v,onClick:b?this._childrenToggle:void 0}),c.createElement("a",{className:"span-name ".concat(s?"is-detail-expanded":""),"aria-checked":s,onClick:this._detailToggle,role:"switch",style:{borderColor:a},tabIndex:0},c.createElement("span",{className:"span-svc-name ".concat(b&&!i?"is-children-collapsed":"")},p&&c.createElement(El.a,{className:"SpanBarRow--errorIcon"}),O," ",f&&c.createElement("span",null,c.createElement(xm.a,null)," ",c.createElement("i",{className:"SpanBarRow--rpcColorMarker",style:{background:f.color}}),f.serviceName),d&&c.createElement("span",null,c.createElement(xm.a,null)," ",c.createElement("i",{className:"SpanBarRow--rpcColorMarker",style:{background:d.color}}),d.serviceName)),c.createElement("small",{className:"endpoint-name"},f?f.operationName:E)),v.references&&v.references.length>1&&c.createElement(Vm,{references:v.references,tooltipText:"Contains multiple references",focusSpan:g},c.createElement(_m.a,null)),v.subsidiarilyReferencedBy&&v.subsidiarilyReferencedBy.length>0&&c.createElement(Vm,{references:v.subsidiarilyReferencedBy,tooltipText:"This span is referenced by ".concat(1===v.subsidiarilyReferencedBy.length?"another span":"multiple other spans"),focusSpan:g},c.createElement(Pm.a,null)))),c.createElement(Em.Cell,{className:"span-view",style:{cursor:"pointer"},width:1-o,onClick:this._detailToggle},c.createElement(bm,{numTicks:u}),c.createElement(sv,{rpc:f,viewStart:k,viewEnd:N,getViewedBounds:h,color:a,shortLabel:w,longLabel:e,hintSide:t,traceStartTime:m,span:v})))}}]),r}(c.PureComponent);uv.defaultProps={className:"",rpc:null};r(1369);function fv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}function dv(e){var t=e.data,r=e.focusSpan;return c.createElement("div",{className:"ReferencesList u-simple-scrollbars"},c.createElement("ul",{className:"ReferencesList--List"},t.map(function(e){return c.createElement("li",{className:"ReferencesList--Item",key:"".concat(e.spanID)},c.createElement(Cm,{reference:e,focusSpan:r},c.createElement("span",{className:"ReferencesList--itemContent"},e.span?c.createElement("span",null,c.createElement("span",{className:"span-svc-name"},e.span.process.serviceName),c.createElement("small",{className:"endpoint-name"},e.span.operationName)):c.createElement("span",{className:"span-svc-name"},"< span in another trace >"),c.createElement("small",{className:"SpanReference--debugInfo"},c.createElement("span",{className:"SpanReference--debugLabel","data-label":"Reference Type:"},e.refType),c.createElement("span",{className:"SpanReference--debugLabel","data-label":"SpanID:"},e.spanID)))))})))}var pv=function(e){Object(m.a)(r,e);var t=fv(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.data,r=e.highContrast,n=e.interactive,a=e.isOpen,o=e.onToggle,i=e.focusSpan,s=!Array.isArray(t)||!t.length,l=V()("u-align-icon",{"AccordianKReferences--emptyIcon":s}),u=null,f=null;return n&&(u=a?c.createElement(Am.a,{className:l}):c.createElement(Km.a,{className:l}),f={"aria-checked":a,onClick:s?null:o,role:"switch"}),c.createElement("div",{className:"AccordianReferences"},c.createElement("div",Object.assign({className:V()("AccordianReferences--header","AccordianReferences--header",{"is-empty":s,"is-high-contrast":r,"is-open":a})},f),u,c.createElement("strong",null,c.createElement("span",{className:"AccordianReferences--label"},"References"))," ","(",t.length,")"),a&&c.createElement(dv,{data:t,focusSpan:i}))}}]),r}(c.PureComponent);pv.defaultProps={highContrast:!1,interactive:!0,onToggle:null};r(1371);function hv(e){var t=e.data;return c.createElement("div",{className:"TextList u-simple-scrollbars"},c.createElement("ul",{className:"TextList--List "},t.map(function(e,t){return c.createElement("li",{key:"".concat(t)},e)})))}r(1373);function mv(e){var t=e.className,r=e.data,n=e.headerClassName,a=e.highContrast,o=e.interactive,i=e.isOpen,s=e.label,l=e.onToggle,u=!Array.isArray(r)||!r.length,f=V()("u-align-icon",{"AccordianKeyValues--emptyIcon":u}),d=null,p=null;return o&&(d=i?c.createElement(Am.a,{className:f}):c.createElement(Km.a,{className:f}),p={"aria-checked":i,onClick:u?null:l,role:"switch"}),c.createElement("div",{className:t||""},c.createElement("div",Object.assign({className:V()("AccordianText--header",n,{"is-empty":u,"is-high-contrast":a,"is-open":i})},p),d," ",c.createElement("strong",null,s)," (",r.length,")"),i&&c.createElement(hv,{data:r}))}mv.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};r(1375);function vv(e){var t=e.detailState,r=e.linksGetter,n=e.logItemToggle,a=e.logsToggle,o=e.processToggle,i=e.span,c=e.tagsToggle,l=e.traceStartTime,u=e.warningsToggle,f=e.referencesToggle,d=e.focusSpan,p=t.isTagsOpen,h=t.isProcessOpen,m=t.logs,v=t.isWarningsOpen,g=t.isReferencesOpen,y=i.operationName,b=i.process,E=i.duration,O=i.relativeStartTime,w=i.spanID,j=i.logs,k=i.tags,N=i.warnings,S=i.references,D=[{key:"svc",label:"Service:",value:b.serviceName},{key:"duration",label:"Duration:",value:Is(E)},{key:"start",label:"Start Time:",value:Is(O)}],T="".concat(window.location.origin).concat(window.location.pathname,"?uiFind=").concat(w);return s.a.createElement("div",null,s.a.createElement("div",{className:"ub-flex ub-items-center"},s.a.createElement("h2",{className:"ub-flex-auto ub-m0"},y),s.a.createElement(yh,{className:"ub-tx-right-align",dividerClassName:"SpanDetail--divider",items:D})),s.a.createElement(vl.a,{className:"SpanDetail--divider ub-my1"}),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(ov,{data:k,label:"Tags",linksGetter:r,isOpen:p,onToggle:function(){return c(w)}}),b.tags&&s.a.createElement(ov,{className:"ub-mb1",data:b.tags,label:"Process",linksGetter:r,isOpen:h,onToggle:function(){return o(w)}})),j&&j.length>0&&s.a.createElement(iv,{linksGetter:r,logs:j,isOpen:m.isOpen,openedItems:m.openedItems,onToggle:function(){return a(w)},onItemToggle:function(e){return n(w,e)},timestamp:l}),N&&N.length>0&&s.a.createElement(mv,{className:"AccordianWarnings",headerClassName:"AccordianWarnings--header",label:s.a.createElement("span",{className:"AccordianWarnings--label"},"Warnings"),data:N,isOpen:v,onToggle:function(){return u(w)}}),S&&S.length>0&&(S.length>1||"CHILD_OF"!==S[0].refType)&&s.a.createElement(pv,{data:S,isOpen:g,onToggle:function(){return f(w)},focusSpan:d}),s.a.createElement("small",{className:"SpanDetail--debugInfo"},s.a.createElement("span",{className:"SpanDetail--debugLabel","data-label":"SpanID:"})," ",w,s.a.createElement(df,{copyText:T,icon:"link",placement:"topRight",tooltipTitle:"Copy deep link to this span"}))))}r(1377);function gv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var yv=function(e){Object(m.a)(r,e);var t=gv(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._detailToggle=function(){e.props.onDetailToggled(e.props.span.spanID)},e._linksGetter=function(t,r){var n=e.props;return(0,n.linksGetter)(n.span,t,r)},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.color,r=e.columnDivision,n=e.detailState,a=e.logItemToggle,o=e.logsToggle,i=e.processToggle,c=e.referencesToggle,l=e.warningsToggle,u=e.span,f=e.tagsToggle,d=e.traceStartTime,p=e.focusSpan;return s.a.createElement(Em,{className:"detail-row"},s.a.createElement(Em.Cell,{width:r},s.a.createElement(Hm,{span:u,showChildrenIcon:!1}),s.a.createElement("span",null,s.a.createElement("span",{className:"detail-row-expanded-accent","aria-checked":"true",onClick:this._detailToggle,role:"switch",style:{borderColor:t}}))),s.a.createElement(Em.Cell,{width:1-r},s.a.createElement("div",{className:"detail-info-wrapper",style:{borderTopColor:t}},s.a.createElement(vv,{detailState:n,linksGetter:this._linksGetter,logItemToggle:a,logsToggle:o,processToggle:i,referencesToggle:c,warningsToggle:l,span:u,tagsToggle:f,traceStartTime:d,focusSpan:p}))))}}]),r}(s.a.PureComponent);r(1379);function bv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ev={bar:28,detail:161,detailWithLogs:197};var Ov=Object(pe.default)(function(e,t,r){return e?function(e,t,r){if(!e)return[];for(var n=null,a=[],o=0;o<e.length;o++){var i=e[o],c=i.spanID,s=i.depth,l=!1;null!=n&&(s>=n?l=!0:n=null),l||(t.has(c)&&(n=s+1),a.push({span:i,isDetail:!1,spanIndex:o}),r.has(c)&&a.push({span:i,isDetail:!0,spanIndex:o}))}return a}(e.spans,t,r):[]}),wv=Object(pe.default)(function(e){var t=e.min,r=e.max,n=e.viewStart,a=e.viewEnd,o=r-t,i=t+n*o,c=r-(1-a)*o-i;return function(e,t){return{start:(e-i)/c,end:(t-i)/c}}},km.a),jv=Object(pe.default)(function(e){var t=Object(xe.a)(e,2),r=t[0],n=t[1];return V()({"clipping-left":r>0,"clipping-right":n<1})},km.a),kv=function(e){Object(m.a)(r,e);var t=bv(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).listView=void 0,n.focusSpan=function(e){var t=n.props,r=t.trace,a=t.focusUiFindMatches,o=t.location,i=t.history;r&&(Ko({location:o,history:i,uiFind:e}),a(r,e,!1))},n.getViewRange=function(){return n.props.currentViewRangeTime},n.getSearchedSpanIDs=function(){return n.props.findMatchesIDs},n.getCollapsedChildren=function(){return n.props.childrenHiddenIDs},n.mapRowIndexToSpanIndex=function(e){return n.getRowStates()[e].spanIndex},n.mapSpanIndexToRowIndex=function(e){for(var t=n.getRowStates().length,r=0;r<t;r++){if(n.getRowStates()[r].spanIndex===e)return r}throw new Error("unable to find row for span index: ".concat(e))},n.setListView=function(e){var t=n.listView!==e;n.listView=e,e&&t&&n.props.registerAccessors(n.getAccessors())},n.getKeyFromIndex=function(e){var t=n.getRowStates()[e],r=t.isDetail,a=t.span;return"".concat(a.spanID,"--").concat(r?"detail":"bar")},n.getIndexFromKey=function(e){for(var t=e.split("--"),r=t[0],a="detail"===t[1],o=n.getRowStates().length,i=0;i<o;i++){var c=n.getRowStates()[i],s=c.span,l=c.isDetail;if(s.spanID===r&&l===a)return i}return-1},n.getRowHeight=function(e){var t=n.getRowStates()[e],r=t.span;return t.isDetail?Array.isArray(r.logs)&&r.logs.length?Ev.detailWithLogs:Ev.detail:Ev.bar},n.linksGetter=function(e,t,r){return Ph(e,t,r)},n.renderRow=function(e,t,r,a){var o=n.getRowStates()[r],i=o.isDetail,c=o.span,s=o.spanIndex;return i?n.renderSpanDetailRow(c,e,t,a):n.renderSpanBarRow(c,s,e,t,a)},(0,e.setTrace)(e.trace,e.uiFind),n}return Object(h.a)(r,[{key:"shouldComponentUpdate",value:function(e){for(var t=Object.keys(e),r=0;r<t.length;r+=1)if(e[t[r]]!==this.props[t[r]]){if("shouldScrollToFirstUiFindMatch"!==t[r])return!0;if(e[t[r]])return!0}return!1}},{key:"componentDidUpdate",value:function(e){var t=e.registerAccessors,r=e.trace,n=this.props,a=n.shouldScrollToFirstUiFindMatch,o=n.clearShouldScrollToFirstUiFindMatch,i=n.scrollToFirstVisibleSpan,c=n.registerAccessors,s=n.setTrace,l=n.trace,u=n.uiFind;r!==l&&s(l,u),this.listView&&t!==c&&c(this.getAccessors()),a&&(i(),o())}},{key:"getRowStates",value:function(){var e=this.props,t=e.childrenHiddenIDs,r=e.detailStates,n=e.trace;return Ov(n,t,r)}},{key:"getClippingCssClasses",value:function(){var e=this.props.currentViewRangeTime;return jv(e)}},{key:"getViewedBounds",value:function(){var e=this.props,t=e.currentViewRangeTime,r=e.trace,n=Object(xe.a)(t,2),a=n[0],o=n[1];return wv({min:r.startTime,max:r.endTime,viewStart:a,viewEnd:o})}},{key:"getAccessors",value:function(){var e=this.listView;if(!e)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:e.getViewHeight,getBottomRowIndexVisible:e.getBottomVisibleIndex,getTopRowIndexVisible:e.getTopVisibleIndex,getRowPosition:e.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}},{key:"renderSpanBarRow",value:function(e,t,r,n,a){var o=e.spanID,i=e.process.serviceName,s=this.props,l=s.childrenHiddenIDs,u=s.childrenToggle,f=s.detailStates,d=s.detailToggle,p=s.findMatchesIDs,h=s.spanNameColumnWidth,m=s.trace;if(!m)return null;var v=jl.getColorByKey(i),g=l.has(o),y=f.has(o),b=!!p&&p.has(o),E=ym(e)||g&&function(e,t){for(var r=e[t].depth,n=t+1;n<e.length&&e[n].depth>r;n++)if(ym(e[n]))return!0;return!1}(m.spans,t),O=null;if(g){var w=function(e){if(e.length<=1||!hm(e[0]))return!1;for(var t=e[0].depth+1,r=1;r<e.length&&e[r].depth===t;){if(mm(e[r]))return e[r];r++}return null}(m.spans.slice(t));if(w){var j=this.getViewedBounds()(w.startTime,w.startTime+w.duration);O={color:jl.getColorByKey(w.process.serviceName),operationName:w.operationName,serviceName:w.process.serviceName,viewEnd:j.end,viewStart:j.start}}}var k=e.tags.find(function(e){return e.key===jf}),N=null;return!e.hasChildren&&k&&function(e){return e.tags.some(function(e){var t=e.key,r=e.value;return"span.kind"===t&&"client"===r})}(e)&&(N={serviceName:k.value,color:jl.getColorByKey(k.value)}),c.createElement("div",Object.assign({className:"VirtualizedTraceView--row",key:r,style:n},a),c.createElement(uv,{className:this.getClippingCssClasses(),color:v,columnDivision:h,isChildrenExpanded:!g,isDetailExpanded:y,isMatchingFilter:b,numTicks:5,onDetailToggled:d,onChildrenToggled:u,rpc:O,noInstrumentedServer:N,showErrorIcon:E,getViewedBounds:this.getViewedBounds(),traceStartTime:m.startTime,span:e,focusSpan:this.focusSpan}))}},{key:"renderSpanDetailRow",value:function(e,t,r,n){var a=e.spanID,o=e.process.serviceName,i=this.props,s=i.detailLogItemToggle,l=i.detailLogsToggle,u=i.detailProcessToggle,f=i.detailReferencesToggle,d=i.detailWarningsToggle,p=i.detailStates,h=i.detailTagsToggle,m=i.detailToggle,v=i.spanNameColumnWidth,g=i.trace,y=p.get(a);if(!g||!y)return null;var b=jl.getColorByKey(o);return c.createElement("div",Object.assign({className:"VirtualizedTraceView--row",key:t,style:Object(ue.a)({},r,{zIndex:1})},n),c.createElement(yv,{color:b,columnDivision:v,onDetailToggled:m,detailState:y,linksGetter:this.linksGetter,logItemToggle:s,logsToggle:l,processToggle:u,referencesToggle:f,warningsToggle:d,span:e,tagsToggle:h,traceStartTime:g.startTime,focusSpan:this.focusSpan}))}},{key:"render",value:function(){return c.createElement("div",{className:"VirtualizedTraceView--spans"},c.createElement(Dm,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:300,viewBufferMin:100,itemsWrapperClassName:"VirtualizedTraceView--rowsWrapper",getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!0}))}}]),r}(c.Component);var Nv=Object(A.a)(Object(E.b)(function(e){return Object(ue.a)({},Yo(e),e.traceTimeline)},function(e){return Object(ar.b)(Yh,e)})(kv));r(1381);function Sv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Dv=function(e){Object(m.a)(r,e);var t=Sv(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).collapseAll=function(){e.props.collapseAll(e.props.trace.spans)},e.collapseOne=function(){e.props.collapseOne(e.props.trace.spans)},e.expandAll=function(){e.props.expandAll()},e.expandOne=function(){e.props.expandOne(e.props.trace.spans)},e}return Object(h.a)(r,[{key:"componentDidMount",value:function(){Pd({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}},{key:"render",value:function(){var e=this.props,t=e.setSpanNameColumnWidth,r=e.updateNextViewRangeTime,n=e.updateViewRangeTime,a=e.viewRange,o=Object(le.a)(e,["setSpanNameColumnWidth","updateNextViewRangeTime","updateViewRangeTime","viewRange"]),i=o.spanNameColumnWidth,c=o.trace;return s.a.createElement("div",{className:"TraceTimelineViewer"},s.a.createElement(wm,{duration:c.duration,nameColumnWidth:i,numTicks:5,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:t,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:a.time,updateNextViewRangeTime:r,updateViewRangeTime:n}),s.a.createElement(Nv,Object.assign({},o,{currentViewRangeTime:a.time.current})))}}]),r}(s.a.PureComponent);var Tv=Object(E.b)(function(e){return{spanNameColumnWidth:e.traceTimeline.spanNameColumnWidth}},function(e){var t=Object(ar.b)(Yh,e);return{setSpanNameColumnWidth:t.setSpanNameColumnWidth,expandAll:t.expandAll,expandOne:t.expandOne,collapseAll:t.collapseAll,collapseOne:t.collapseOne}})(Dv);r(1383),r(1385);function xv(e){var t={opacity:e.sortIndex===e.index?1:.2},r=e.sortAsc&&e.sortIndex===e.index?"up":"down";return s.a.createElement("th",{className:"HeaderTable--th"},e.element.title,s.a.createElement("button",{type:"submit",className:"HeaderTable--sortButton",onClick:function(){return e.sortClick(e.index)}},s.a.createElement(W.a,{style:t,type:r})))}r(1387);function Rv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var _v=function(e){Object(m.a)(r,e);var t=Rv(r);function r(e){var n;Object(p.a)(this,r);var a=(n=t.call(this,e)).props.values.map(function(e){return{uid:hr.uniqueId("id"),value:e}});return n.state={element:a},n}return Object(h.a)(r,[{key:"render",value:function(){var e,t,r=this,n={background:this.props.colorToPercent,borderColor:this.props.colorToPercent,cursor:"default"},a={background:this.props.searchColor,borderColor:this.props.searchColor,cursor:"default"},o={borderLeft:"4px solid transparent",paddingLeft:"0.6em",borderColor:this.props.color};"undefined"===this.props.type?(null!==this.props.valueNameSelector2&&"undefined"!==this.props.type&&(n.cursor="pointer"),e=n):"transparent"===this.props.searchColor?(null!==this.props.valueNameSelector2&&(n.cursor="pointer"),e=n):(null!==this.props.valueNameSelector2&&(n.cursor="pointer"),e=a),t=""!==this.props.color?o:"undefined"===this.props.type?{color:"rgb(153,153,153)",fontStyle:"italic"}:void 0;var i="sql"===this.props.valueNameSelector1&&"undefined"!==this.props.type?function(){return r.props.togglePopup(r.props.name)}:void 0;return s.a.createElement("tr",{className:"MainTableData--tr",onClick:function(){return r.props.clickColumn(r.props.name)},style:e},s.a.createElement("td",{className:"MainTableData--td"},s.a.createElement("a",{role:"button",onClick:i,style:{color:"inherit"}},s.a.createElement("label",{title:this.props.name,className:"MainTableData--label",style:t},this.props.name))),this.state.element.map(function(e,t){return s.a.createElement("td",{key:e.uid,className:"MainTableData--td"}," ",r.props.columnsArray[t+1].isDecimal?e.value.toFixed(2):e.value,r.props.columnsArray[t+1].suffix)}))}}]),r}(c.Component);r(1389);function Iv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Pv=function(e){Object(m.a)(r,e);var t=Iv(r);function r(e){var n;Object(p.a)(this,r);var a=(n=t.call(this,e)).props.values.map(function(e){return{uid:hr.uniqueId("id"),value:e}});return n.state={element:a},n}return Object(h.a)(r,[{key:"render",value:function(){var e,t=this,r={background:this.props.colorToPercent,borderColor:this.props.colorToPercent,color:"rgb(153,153,153)",fontStyle:"italic"},n={background:this.props.colorToPercent,borderColor:this.props.colorToPercent},a={background:this.props.searchColor,borderColor:this.props.searchColor};e="undefined"===this.props.type?r:"rgb(248,248,248)"===this.props.searchColor?n:a;var o,i={borderColor:this.props.color},c={borderColor:this.props.color,marginLeft:"12px"};o="Service Name"===this.props.valueNameSelector2?c:i;var l="sql"===this.props.valueNameSelector2&&"undefined"!==this.props.type?function(){return t.props.togglePopup(t.props.name)}:void 0;return s.a.createElement("tr",{className:"DetailTableData--tr",style:e},s.a.createElement("td",{className:"DetailTableData--td"},s.a.createElement("a",{role:"button",onClick:l,style:{color:"inherit"}},s.a.createElement("label",{title:this.props.name,className:"DetailTableData--serviceBorder",style:o},this.props.name))),this.state.element.map(function(e,r){return s.a.createElement("td",{key:e.uid,className:"DetailTableData--td"},t.props.columnsArray[r+1].isDecimal?Number(e.value).toFixed(2):e.value,t.props.columnsArray[r+1].suffix)}))}}]),r}(c.Component),Cv="Service Name",Mv="Operation Name";function Vv(e,t,r){return r!==Cv&&r!==Mv?function(e,t,r){for(var n=t.spans,a=[],o=0;o<e.length;o++)if("undefined"!==e[o].type)for(var i=0;i<n.length;i++)for(var c=0;c<n[i].tags.length;c++)r===n[i].tags[c].key&&a.push(n[i]);a=Object(Re.a)(new Set(a));var s=mr()(a).map("tags").flatten().value(),l=mr()(s).map("key").uniq().value();return l=mr.a.filter(l,function(e){return e!==r}),(a=[]).push(Cv),a.push(Mv),a=a.concat(l)}(e,t,r):function(e,t){var r=[],n=e.spans;t===Cv?r.push(Mv):r.push(Cv);for(var a=0;a<n.length;a++)for(var o=0;o<n[a].tags.length;o++)r.push(n[a].tags[o].key);return r=Object(Re.a)(new Set(r))}(t,r)}var Lv="Service Name",Av="Operation Name";function Fv(e){var t=hr.minBy(e,function(e){return e.relativeStartTime});return void 0!==t?{duration:t.duration,lowestStartTime:t.relativeStartTime}:{duration:-1,lowestStartTime:-1}}function Bv(e,t,r){for(var n=t,a=!1,o=0;o<r.length;o++)if(e+n>=r[o].relativeStartTime){if(e+n<r[o].relativeStartTime+r[o].duration)n=r[o].relativeStartTime+r[o].duration-e+n;r.splice(o,1),a=!0;break}return{allOverlay:r,duration:n,didDelete:a}}function Hv(e,t,r,n){var a=r,o=0,i={allOverlay:e,duration:o,didDelete:!1},c=hr.difference(t,e),s=0,l=0,u=Fv(e);s=u.lowestStartTime,o=u.duration;do{if(!(i=Bv(s,o,i.allOverlay)).didDelete&&i.allOverlay.length>0){l=i.duration;var f=Fv(i.allOverlay);s=f.lowestStartTime,o=f.duration}}while(i.allOverlay.length>1);o=i.duration+l;for(var d=0;d<c.length;d++)o+=c[d].duration;return a+=n.duration-o}function Wv(e,t,r,n){var a=n;a.count+=1,a.total+=t.duration,a.min>t.duration&&(a.min=t.duration),a.max<t.duration&&(a.max=t.duration);var o=0,i=!1,c=!1,s=[],l=[];if(t.hasChildren){for(var u=[],f=0;f<r.length;f++)1===r[f].references.length&&t.spanID===r[f].references[0].spanID&&u.push(r[f]);if(1===u.length)o=t.relativeStartTime+t.duration>=u[0].relativeStartTime+u[0].duration?t.duration-u[0].duration:u[0].relativeStartTime-t.relativeStartTime;else{for(var d=0;d<u.length;d++)t.duration+t.relativeStartTime<u[d].duration+u[d].relativeStartTime&&(i=!0,l.push(u[d]));for(var p=0;p<u.length;p++)for(var h=0;h<u.length;h++)u[p].spanID!==u[h].spanID&&u[p].relativeStartTime<=u[h].relativeStartTime&&u[p].relativeStartTime+u[p].duration>=u[h].relativeStartTime&&(c=!0,s.push(u[p]),s.push(u[h]));if(s=Object(Re.a)(new Set(s)),i||c)if(i&&c)if(hr.isEmpty(hr.xor(s,l))){var m=hr.minBy(l,function(e){return e.relativeStartTime}),v=hr.difference(u,l);o=m.relativeStartTime-t.relativeStartTime;for(var g=0;g<v.length;g++)o-=v[g].duration}else{for(var y=hr.difference(s,l),b=hr.difference(u,l),E=hr.minBy(l,function(e){return e.relativeStartTime}),O=[],w=0;w<y.length;w++)!E.relativeStartTime<=y[w].relativeStartTime&&O.push(y[w]);for(var j=0;j<O.length;j++)O[j].relativeStartTime+O[j].duration>E.relativeStartTime&&(O[j].duration-=O[j].relativeStartTime+O[j].duration-E.relativeStartTime,O[j].duration<0&&(O[j].duration=0));o=Hv(O,b,o,t),o-=t.relativeStartTime+t.duration-E.relativeStartTime}else if(i){o=l[0].relativeStartTime-t.relativeStartTime;for(var k=0;k<u.length;k++)u[k].spanID!==l[0].spanID&&(o-=u[k].duration)}else o=Hv(s,u,o,t);else{o=t.duration;for(var N=0;N<u.length;N++)o-=u[N].duration}}}else o+=t.duration;a.selfMin>o&&(a.selfMin=o),a.selfMax<o&&(a.selfMax=o),a.selfTotal+=o;var S=100/e.duration;return a.percent=a.selfTotal*S,a}function Gv(e){var t=e;return t.total=Math.round(t.total/1e3*100)/100,t.avg=Math.round(t.avg/1e3*100)/100,t.min=Math.round(t.min/1e3*100)/100,t.max=Math.round(t.max/1e3*100)/100,t.selfTotal=Math.round(t.selfTotal/1e3*100)/100,t.selfAvg=Math.round(t.selfAvg/1e3*100)/100,t.selfMin=Math.round(t.selfMin/1e3*100)/100,t.selfMax=Math.round(t.selfMax/1e3*100)/100,t.percent=Math.round(t.percent/1*100)/100,t}function Uv(e,t,r,n,a,o,i){for(var c=[],s=0;s<e.length;s++){for(var l="",u={selfTotal:0,selfAvg:0,selfMin:i.duration,selfMax:0,total:0,avg:0,min:i.duration,max:0,count:0,percent:0},f=0;f<t.length;f++)if(o)for(var d=0;d<t[f].tags.length;d++)e[s]===t[f].tags[d].value&&(u=Wv(i,t[f],r,u));else n===Lv?e[s]===t[f].process.serviceName&&(u=Wv(i,t[f],r,u),l=jl.getColorByKey(t[f].process.serviceName)):e[s]===t[f].operationName&&(u=Wv(i,t[f],r,u));u.selfAvg=u.selfTotal/u.count,u.avg=u.total/u.count;var p={type:"defined",name:e[s],count:u.count,total:u.total,avg:u.avg,min:u.min,max:u.max,isDetail:!0,selfTotal:u.selfTotal,selfAvg:u.selfAvg,selfMin:u.selfMin,selfMax:u.selfMax,percent:u.percent,color:l,searchColor:"",parentElement:a,colorToPercent:"rgb(248,248,248)",traceID:""};p=Gv(p),c.push(p)}return c}function zv(e,t,r,n){for(var a=n.spans,o=[],i=0;i<e.length;i++)if(!e[i].isDetail){for(var c=[],s=[],l=0;l<a.length;l++)if(t===Lv)e[i].name===a[l].process.serviceName&&(c.push(a[l]),s.push(a[l].operationName));else if(t===Av)e[i].name===a[l].operationName&&(c.push(a[l]),s.push(a[l].process.serviceName));else for(var u=0;u<a[l].tags.length;u++)e[i].name===a[l].tags[u].value&&(c.push(a[l]),r===Av?s.push(a[l].operationName):r===Lv&&s.push(a[l].process.serviceName));var f=[];if(r===Lv||r===Av)f=Uv(s=Object(Re.a)(new Set(s)),c,a,r,e[i].name,!1,n);else{s=[];for(var d=0;d<c.length;d++)for(var p=0;p<c[d].tags.length;p++)c[d].tags[p].key===r&&s.push(c[d].tags[p].value);f=Uv(s=Object(Re.a)(new Set(s)),c,a,r,e[i].name,!0,n)}if(o.push(e[i]),f.length>0)for(var h=0;h<f.length;h++)o.push(f[h])}return r!==Lv&&r!==Av?function(e,t,r){for(var n=r.spans,a=[],o=0;o<e.length;o++)if(a.push(e[o]),!e[o].isDetail){for(var i={selfTotal:0,selfAvg:0,selfMin:r.duration,selfMax:0,total:0,avg:0,min:r.duration,max:0,count:0,percent:0},c=0;c<n.length;c++)if(e[o].name===n[c].process.serviceName||e[o].name===n[c].operationName){for(var s=!0,l=0;l<n[c].tags.length;l++)if(n[c].tags[l].key===t){s=!1;break}s&&(i=Wv(r,n[c],n,i))}if(i.avg=i.total/i.count,i.selfAvg=i.selfTotal/i.count,0!==i.count){var u={type:"undefined",name:"Without Tag: ".concat(t),count:i.count,total:i.total,avg:i.avg,min:i.min,max:i.max,isDetail:!0,selfTotal:i.selfTotal,selfAvg:i.selfAvg,selfMin:i.selfMin,selfMax:i.selfMax,percent:i.percent,color:"",searchColor:"",parentElement:e[o].name,colorToPercent:"rgb(248,248,248)",traceID:""};u=Gv(u),a.push(u)}}return a}(o,r,n):o}function qv(e,t){return function(e,t){var r="",n=[],a=t.spans;if(e===Lv)for(var o=hr.chain(a).groupBy(function(e){return e.process.serviceName}).map(function(e,t){return{key:t}}).uniq().value(),i=0;i<o.length;i++)n.push(o[i].key);else if(e===Av)for(var c=hr.chain(a).groupBy(function(e){return e.operationName}).map(function(e,t){return{key:t}}).uniq().value(),s=0;s<c.length;s++)n.push(c[s].key);else{for(var l=0;l<a.length;l++)for(var u=0;u<a[l].tags.length;u++)a[l].tags[u].key===e&&n.push(a[l].tags[u].value);n=Object(Re.a)(new Set(n))}for(var f=[],d=[],p=0;p<n.length;p++){for(var h={selfTotal:0,selfMin:t.duration,selfMax:0,selfAvg:0,total:0,avg:0,min:t.duration,max:0,count:0,percent:0},m=0;m<a.length;m++)if(e===Lv)a[m].process.serviceName===n[p]&&(h=Wv(t,a[m],a,h),r=jl.getColorByKey(a[m].process.serviceName));else if(e===Av)a[m].operationName===n[p]&&(h=Wv(t,a[m],a,h));else for(var v=0;v<a[m].tags.length;v++)a[m].tags[v].value===n[p]&&(h=Wv(t,a[m],a,h));h.selfAvg=h.selfTotal/h.count,h.avg=h.total/h.count;var g={type:"defined",name:n[p],count:h.count,total:h.total,avg:h.avg,min:h.min,max:h.max,isDetail:!1,selfTotal:h.selfTotal,selfAvg:h.selfAvg,selfMin:h.selfMin,selfMax:h.selfMax,percent:h.percent,color:r,searchColor:"",parentElement:"none",colorToPercent:"tranparent",traceID:""};g=Gv(g),f.push(g)}if(e!==Lv&&e!==Av){for(var y=0;y<a.length;y++){for(var b=!1,E=0;E<a[y].tags.length;E++)for(var O=0;O<n.length;O++)a[y].tags[E].value===n[O]&&(b=!0);b||d.push(a[y])}for(var w={selfTotal:0,selfAvg:0,selfMin:t.duration,selfMax:0,total:0,avg:0,min:t.duration,max:0,count:0,percent:0},j=0;j<d.length;j++)w=Wv(t,d[j],a,w);if(0!==w.count){w.selfAvg=w.selfTotal/w.count,w.avg=w.total/w.count;var k={type:"undefined",name:"Without Tag: ".concat(e),count:w.count,total:w.total,avg:w.avg,min:w.min,max:w.max,isDetail:!1,selfTotal:w.selfTotal,selfAvg:w.selfAvg,selfMin:w.selfMin,selfMax:w.selfMax,percent:w.percent,color:"",searchColor:"transparent",parentElement:"",colorToPercent:"rgb(248,248,248)",traceID:""};k=Gv(k),f.push(k)}}return f}(e,t)}function Kv(e,t,r,n){return"Reset"!==r?zv(e,t,r,n):qv(t,n)}function Jv(e,t,r){for(var n,a,o=e,i=0;i<o.length;i++)if(r)if("percent"===t)n=236-o[i].percent/100*166,a="rgb(248,".concat(n,",").concat(n,")"),o[i].colorToPercent=a;else{for(var c=0,s=0;s<o.length;s++)c<o[s][t]&&(c=o[s][t]);var l=100/c/100;n=236-o[i][t]*l*166,a="rgb(248,".concat(n,",").concat(n,")"),o[i].colorToPercent=a}else o[i].isDetail?o[i].colorToPercent="rgb(248,248,248)":o[i].colorToPercent="transparent";return o}r(1391);function Zv(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Yv=new Map([["Count","count"],["Total","total"],["Avg","avg"],["Min","min"],["Max","max"],["ST Total","selfTotal"],["ST Avg","selfAvg"],["ST Min","selfMin"],["ST Max","selfMax"],["ST in Duration","percent"]]),Qv=function(e){Object(m.a)(r,e);var t=Zv(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).props.handler(qv("Service Name",n.props.trace),qv("Service Name",n.props.trace),"Service Name",null),n.state={valueNameSelector1:"Service Name",valueNameSelector2:null,valueNameSelector3:"Count",checkboxStatus:!1},n.setValueNameSelector1=n.setValueNameSelector1.bind(Object(Ff.a)(n)),n.setValueNameSelector2=n.setValueNameSelector2.bind(Object(Ff.a)(n)),n.setValueNameSelector3=n.setValueNameSelector3.bind(Object(Ff.a)(n)),n.checkboxButton=n.checkboxButton.bind(Object(Ff.a)(n)),n.clearValue=n.clearValue.bind(Object(Ff.a)(n)),n}return Object(h.a)(r,[{key:"getValue",value:function(){var e=Yv.get(this.state.valueNameSelector3);return void 0===e&&(e=""),e}},{key:"setValueNameSelector1",value:function(e){this.setState({valueNameSelector1:e,valueNameSelector2:null});var t=Jv(qv(e,this.props.trace),this.getValue(),this.state.checkboxStatus),r=Jv(qv(e,this.props.trace),this.getValue(),this.state.checkboxStatus);this.props.handler(t,r,e,null)}},{key:"setValueNameSelector2",value:function(e){this.setState({valueNameSelector2:e});var t=Jv(Kv(this.props.tableValue,this.state.valueNameSelector1,e,this.props.trace),this.getValue(),this.state.checkboxStatus),r=Jv(Kv(this.props.wholeTable,this.state.valueNameSelector1,e,this.props.trace),this.getValue(),this.state.checkboxStatus);this.props.handler(t,r,this.state.valueNameSelector1,e)}},{key:"setValueNameSelector3",value:function(e){this.setState({valueNameSelector3:e});var t=Yv.get(e);void 0===t&&(t="");var r=Jv(this.props.tableValue,t,this.state.checkboxStatus),n=Jv(this.props.wholeTable,t,this.state.checkboxStatus);this.props.handler(r,n,this.state.valueNameSelector1,this.state.valueNameSelector2)}},{key:"checkboxButton",value:function(e){this.setState({checkboxStatus:e.target.checked});var t=Jv(this.props.tableValue,this.getValue(),e.target.checked),r=Jv(this.props.wholeTable,this.getValue(),e.target.checked);this.props.handler(t,r,this.state.valueNameSelector1,this.state.valueNameSelector2)}},{key:"clearValue",value:function(){this.setState({valueNameSelector2:null});var e=Jv(qv(this.state.valueNameSelector1,this.props.trace),this.getValue(),this.state.checkboxStatus),t=Jv(qv(this.state.valueNameSelector1,this.props.trace),this.getValue(),this.state.checkboxStatus);this.props.handler(e,t,this.state.valueNameSelector1,null)}},{key:"render",value:function(){var e=function(e){var t=e.spans,r=mr()(t).map("tags").flatten().value(),n=mr()(r).map("key").uniq().value();return mr.a.concat(Cv,Mv,n)}(this.props.trace),t=Vv(this.props.wholeTable,this.props.trace,this.state.valueNameSelector1);return s.a.createElement("div",{className:"TraceStatisticsHeader"},s.a.createElement(Lo,{label:"Group By",placeholder:!1,options:e,value:this.state.valueNameSelector1,setValue:this.setValueNameSelector1,required:!0}),s.a.createElement(Lo,{label:"Sub-Group",placeholder:"No item selected",options:t,value:this.state.valueNameSelector2,setValue:this.setValueNameSelector2,clearValue:this.clearValue,required:!1}),s.a.createElement("div",{className:"colorDropdown--TraceStatisticsHeader"},s.a.createElement(Lo,{label:"Color by",placeholder:!1,options:Array.from(Yv.keys()),value:this.state.valueNameSelector3,setValue:this.setValueNameSelector3,required:!0})),s.a.createElement("div",{className:"checkbox--TraceStatisticsHeader"},s.a.createElement(Bn.a,{onChange:this.checkboxButton})))}}]),r}(c.Component);function $v(e,t,r){return e.sort(function(e,n){var a=e[t],o=n[t];return r?a<o?-1:a>o?1:0:a<o?1:a>o?-1:0})}function Xv(e,t,r){for(var n=[],a=[],o=0;o<e.length;o++)e[o].isDetail?n.push(e[o]):a.push(e[o]);$v(a,t,r);for(var i=[],c=0;c<n.length;c++)if(0===i.length)i.push(n[c]);else{var s={parentElement:n[c].parentElement};hr.some(i,s)||i.push(n[c])}for(var l=function(e){var o=hr.chain(n).filter(function(t){return t.parentElement===i[e].parentElement}).groupBy(function(e){return e.parentElement}).map(function(e){return{parentElement:t,groupedArry:e}}).value()[0].groupedArry;if($v(o,t,r),o.length>0){for(var c=0,s=0;s<a.length;s++)a[s].name===o[0].parentElement&&(c=s);for(var l=0;l<o.length;l++)a.splice(c+1,0,o[l]),c+=1}},u=0;u<i.length;u++)l(u);return a}r(1393);function eg(e){var t='"'.concat(e.popupContent,'"');return s.a.createElement("div",{className:"PopupSQL"},s.a.createElement("div",{className:"PopupSQL--inner"},s.a.createElement("h3",{className:"PopupSQL--header"},'Tag: "SQL" '," "),s.a.createElement("textarea",{readOnly:!0,className:"PopupSQL--sqlContent",value:t}),s.a.createElement(vi.a,{className:"PopupSQL--closeButton",onClick:function(){return e.closePopup("")}},"close"," ")))}function tg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var rg=[{title:"Name",attribute:"name",suffix:"",isDecimal:!1},{title:"Count",attribute:"count",suffix:"",isDecimal:!1},{title:"Total",attribute:"total",suffix:"ms",isDecimal:!0},{title:"Avg",attribute:"avg",suffix:"ms",isDecimal:!0},{title:"Min",attribute:"min",suffix:"ms",isDecimal:!0},{title:"Max",attribute:"max",suffix:"ms",isDecimal:!0},{title:"ST Total",attribute:"selfTotal",suffix:"ms",isDecimal:!0},{title:"ST Avg",attribute:"selfAvg",suffix:"ms",isDecimal:!0},{title:"ST Min",attribute:"selfMin",suffix:"ms",isDecimal:!0},{title:"ST Max",attribute:"selfMax",suffix:"ms",isDecimal:!0},{title:"ST in Duration",attribute:"percent",suffix:"%",isDecimal:!0}],ng=function(e){Object(m.a)(r,e);var t=tg(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).sortTableWithOthers=function(e,t,r){var n,a=-1,o=-1,i=!1,c=[],s=[];for(n=0;n<e.length;n++)"undefined"!==e[n].type?c.push(e[n]):e[n].isDetail?i=!0:a=n;if(c=Xv(c,rg[t].attribute,r),-1!==a&&c.push(e[a]),!i)return c;var l=[];for(n=0;n<e.length;n++)e[n].isDetail||l.push(e[n]);for(l=Xv(l,rg[t].attribute,r),n=0;n<l.length;n++){s.push(l[n]);for(var u=[],f=0;f<e.length;f++)l[n].name===e[f].parentElement&&"undefined"!==e[f].type?u.push(e[f]):l[n].name===e[f].parentElement&&"undefined"===e[f].type&&(o=f);u=Xv(u,rg[t].attribute,r),-1!==o&&(u.push(e[o]),o=-1);for(var d=0;d<u.length;d++)s.push(u[d])}return s},n.searchInTable=function(e,t,r){for(var n=t,a=0;a<n.length;a++)n[a].isDetail||"undefined"===n[a].type?(n[a].type,n[a].searchColor="rgb(248,248,248)"):n[a].searchColor="transparent";if("undefined"!==typeof e&&e.forEach(function(e){for(var t=e.split("\v"),r=0;r<n.length;r++)-1!==t[t.length-1].indexOf(n[r].name)&&("none"===n[r].parentElement?n[r].searchColor="rgb(255,243,215)":-1!==t[t.length-1].indexOf(n[r].parentElement)&&(n[r].searchColor="rgb(255,243,215)"))}),r)for(var o=0;o<n.length;o++)if(-1!==n[o].name.indexOf(r)){n[o].searchColor="rgb(255,243,215)";for(var i=0;i<n.length;i++)n[i].parentElement===n[o].name&&(n[i].searchColor="rgb(255,243,215)");if(n[o].isDetail)for(var c=0;c<n.length;c++)n[o].parentElement===n[c].name&&(n[c].searchColor="rgb(255,243,215)")}return n},n.state={tableValue:[],sortIndex:1,sortAsc:!1,showPopup:!1,popupContent:"",wholeTable:[],valueNameSelector1:"Service Name",valueNameSelector2:null},n.handler=n.handler.bind(Object(Ff.a)(n)),n.sortClick=n.sortClick.bind(Object(Ff.a)(n)),n.togglePopup=n.togglePopup.bind(Object(Ff.a)(n)),n.clickColumn=n.clickColumn.bind(Object(Ff.a)(n)),n.searchInTable(n.props.uiFindVertexKeys,n.state.tableValue,n.props.uiFind),n}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(e){this.props.uiFindVertexKeys!==e.uiFindVertexKeys&&this.changeTableValueSearch()}},{key:"changeTableValueSearch",value:function(){this.searchInTable(this.props.uiFindVertexKeys,this.state.tableValue,this.props.uiFind);var e=this.state.tableValue;this.setState(function(t){return Object(ue.a)({},t,{tableValue:e})})}},{key:"handler",value:function(e,t,r,n){var a=this;this.setState(function(o){return Object(ue.a)({},o,{tableValue:a.searchInTable(a.props.uiFindVertexKeys,a.sortTableWithOthers(e,1,!1),a.props.uiFind),sortIndex:1,sortAsc:!1,valueNameSelector1:r,valueNameSelector2:n,wholeTable:t})})}},{key:"togglePopup",value:function(e){var t=this.state.showPopup;this.setState(function(r){return Object(ue.a)({},r,{showPopup:!t,popupContent:e})})}},{key:"sortClick",value:function(e){var t=this,r=this.state,n=r.tableValue,a=r.sortIndex,o=r.sortAsc;a!==e?this.setState(function(r){return Object(ue.a)({},r,{sortIndex:e,sortAsc:!1,tableValue:t.sortTableWithOthers(n,e,!1)})}):this.setState(function(r){return Object(ue.a)({},r,{sortAsc:!o,tableValue:t.sortTableWithOthers(n,e,!o)})})}},{key:"clickColumn",value:function(e){if(null!==this.state.valueNameSelector2){for(var t=!0,r=this.state.tableValue,n=[],a=0;a<r.length;a++)r[a].parentElement===e&&(t=!1),r[a].parentElement!==e&&n.push(r[a]);if(t){n=[];for(var o=0;o<r.length;o++)if(r[o].name!==e)n.push(r[o]);else{n.push(r[o]);for(var i=0;i<this.state.wholeTable.length;i++)this.state.wholeTable[i].parentElement===e&&n.push(this.state.wholeTable[i])}n=this.searchInTable(this.props.uiFindVertexKeys,n,this.props.uiFind),n=this.sortTableWithOthers(n,this.state.sortIndex,this.state.sortAsc)}this.setState({tableValue:n})}}},{key:"renderTableData",value:function(){var e=this;return this.state.tableValue.map(function(t){var r=t.count,n=t.total,a=t.avg,o=t.min,i=t.max,c=t.selfTotal,l=t.selfAvg,u=t.selfMin,f=t.selfMax,d=t.percent,p=t.color,h=t.searchColor,m=t.colorToPercent,v=[r,n,a,o,i,c,l,u,f,d],g=hr.uniqueId("id");return t.isDetail?s.a.createElement(Pv,{key:g,type:t.type,name:t.name,searchColor:h,values:v,columnsArray:rg,color:p,togglePopup:e.togglePopup,valueNameSelector2:e.state.valueNameSelector2,colorToPercent:m}):s.a.createElement(_v,{key:g,type:t.type,name:t.name,searchColor:h,values:v,columnsArray:rg,togglePopup:e.togglePopup,valueNameSelector1:e.state.valueNameSelector1,valueNameSelector2:e.state.valueNameSelector2,color:p,clickColumn:e.clickColumn,colorToPercent:m})})}},{key:"renderTableHead",value:function(){var e=this,t=this.state,r=t.sortAsc,n=t.sortIndex;return s.a.createElement("tr",null,rg.map(function(t,a){return s.a.createElement(xv,{element:t,key:t.title,sortIndex:n,index:a,sortClick:e.sortClick,sortAsc:r})}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",{className:"title--TraceStatistics"}," Trace Statistics"),s.a.createElement(Qv,{trace:this.props.trace,tableValue:this.state.tableValue,wholeTable:this.state.wholeTable,handler:this.handler}),this.state.showPopup?s.a.createElement(eg,{closePopup:this.togglePopup,popupContent:this.state.popupContent}):null,s.a.createElement("table",{className:"test1893"},s.a.createElement("tbody",{className:"DetailTraceTableTbody--TraceStatistics"},this.renderTableHead(),this.renderTableData())))}}]),r}(c.Component),ag=r(204),og=r.n(ag);r(1395);function ig(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var cg=Ac.a.Option;var sg=function(e){Object(m.a)(r,e);var t=ig(r);function r(e,n){var a;Object(p.a)(this,r),a=t.call(this,e,n);var o=new Set,i=new Set,c=new Map;return a.props.trace.spans.forEach(function(e){o.add(e.process.serviceName),i.add(e.operationName);var t=c.get(e.process.serviceName)||[];t.push(e.operationName),c.set(e.process.serviceName,t)}),a.state={searchText:"",searchedColumn:"",data:a.props.trace.spans,serviceNamesList:Object(Re.a)(o),operationNamesList:Object(Re.a)(i),serviceNameOperationsMap:c,filteredData:a.props.trace.spans,filtered:{},selectedServiceName:[],selectedOperationName:[]},a.handleResetFilter=a.handleResetFilter.bind(Object(Ff.a)(a)),a.uniqueOperationNameOptions=a.uniqueOperationNameOptions.bind(Object(Ff.a)(a)),a}return Object(h.a)(r,[{key:"handleResetFilter",value:function(){this.setState(function(e){return{selectedServiceName:[],selectedOperationName:[],filteredData:e.data}})}},{key:"uniqueOperationNameOptions",value:function(){var e=[],t=this.state.serviceNameOperationsMap;return this.state.filtered["process.serviceName"]?this.state.filtered["process.serviceName"].forEach(function(r){e=e.concat(t.get(r)||[])}):e=this.state.operationNamesList,Object(Re.a)(new Set(e))}},{key:"onFilteredChangeCustom",value:function(e,t){var r=this.state.filtered;r[t]=e;var n=this.state.data.filter(function(e){var t;return Object.keys(r).every(function(n){if(r[n].length){var a=function(e,t){return e.split(".").reduce(function(e,t){return e?e[t]:null},t)}(n,e);t=r[n].includes(a)}else t=!0;return t}),t});this.setState(function(e){return Object(ue.a)({},e,{filtered:r,filteredData:n})})}},{key:"render",value:function(){var e=this,t=[{title:"Service Name",dataIndex:"process.serviceName",width:"25%"},{title:"Operation",dataIndex:"operationName",width:"25%"},{title:"ID",dataIndex:"spanID",render:function(e,t){return s.a.createElement("a",{href:_("/trace/".concat(t.traceID,"?uiFind=").concat(e)),target:"_blank",rel:"noopener noreferrer"},e)}},{title:"Duration",dataIndex:"duration",sorter:function(e,t){return e.duration-t.duration},render:function(e){return function(e){if(e<1e3)return"".concat(e,"\u03bcs");var t=Cs(e);return"".concat(Tr.a.duration(e/1e3,"ms").as(t)).concat(Ms(t))}(parseInt(e,10))}},{title:"Start Time",dataIndex:"startTime",sorter:function(e,t){return e.startTime-t.startTime},render:function(e){return Tr()(e/1e3).format("DD MMM YYYY hh:mm A")}}];return s.a.createElement("div",null,s.a.createElement("h3",{className:"title--TraceSpanView"}," Trace Tabular View"),s.a.createElement(Ic.a,{type:"flex",style:{marginTop:"8px"}},s.a.createElement(Cc.a,{span:7},s.a.createElement(og.a,{label:"Service Name",labelCol:{span:6},wrapperCol:{span:18},className:"serviceNameDD"},s.a.createElement(Ac.a,{allowClear:!0,showSearch:!0,mode:"multiple",style:{width:"100%"},maxTagCount:4,value:this.state.selectedServiceName,maxTagPlaceholder:"+ ".concat(this.state.selectedServiceName.length-4," Selected"),placeholder:"Please Select Service ",onChange:function(t){e.setState(function(e){return Object(ue.a)({},e,{selectedServiceName:t})}),e.onFilteredChangeCustom(t,"process.serviceName")}},this.state.serviceNamesList.map(function(e){return s.a.createElement(cg,{key:e},e," ")})))),s.a.createElement(Cc.a,{span:9},s.a.createElement(og.a,{label:"Operation Name",labelCol:{span:6},wrapperCol:{span:18},className:"operationNameDD"},s.a.createElement(Ac.a,{allowClear:!0,showSearch:!0,mode:"multiple",style:{width:"100%"},maxTagCount:4,value:this.state.selectedOperationName,maxTagPlaceholder:"+ ".concat(this.state.selectedOperationName.length-4," Selected"),placeholder:"Please Select Operation",onChange:function(t){e.setState(function(e){return Object(ue.a)({},e,{selectedOperationName:t})}),e.onFilteredChangeCustom(t,"operationName")}},this.uniqueOperationNameOptions().map(function(e){return s.a.createElement(cg,{key:e},e," ")})))),s.a.createElement(Cc.a,{span:2,push:6},s.a.createElement(og.a,{className:"reset-filter"},s.a.createElement(vi.a,{type:"primary",htmlType:"button",onClick:this.handleResetFilter},"Reset Filters")))),s.a.createElement(ti.a,{className:"span-table span-view-table",columns:t,dataSource:this.state.filteredData,pagination:{total:this.state.filteredData.length,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showQuickJumper:!0},rowKey:"spanID"}))}}]),r}(c.Component),lg=r(366),ug=(r(1400),r(1402),function(e){var t=e.trace,r=t&&t.data?Object(lg.convertJaegerTraceToProfile)(t.data):null;return s.a.createElement("div",{className:"Flamegraph-wrapper"},s.a.createElement(lg.FlamegraphRenderer,{colorMode:"light",profile:r}))});r(1404);function fg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var dg={panLeft:[-.005,-.005],panLeftFast:[-.05,-.05],panRight:[.005,.005],panRightFast:[.05,.05],zoomIn:[.005,-.005],zoomInFast:[.05,-.05],zoomOut:[-.005,.005],zoomOutFast:[-.05,.05]};var pg=function(e){Object(m.a)(r,e);var t=fg(r);function r(e){var n;Object(p.a)(this,r),(n=t.call(this,e)).state=void 0,n._headerElm=void 0,n._filterSpans=void 0,n._searchBar=void 0,n._scrollManager=void 0,n.traceDagEV=void 0,n.setHeaderHeight=function(e){n._headerElm=e,e?n.state.headerHeight!==e.clientHeight&&n.setState({headerHeight:e.clientHeight}):n.state.headerHeight&&n.setState({headerHeight:null})},n.clearSearch=function(){var e=n.props;Ko({history:e.history,location:e.location,trackFindFunction:Sd}),n._searchBar.current&&n._searchBar.current.blur()},n.focusOnSearchBar=function(){n._searchBar.current&&n._searchBar.current.focus()},n.updateViewRangeTime=function(e,t,r){r&&Dd(r,[e,t],n.state.viewRange.time.current);var a={current:[e,t]};n.setState(function(e){return{viewRange:Object(ue.a)({},e.viewRange,{time:a})}})},n.updateNextViewRangeTime=function(e){n.setState(function(t){var r=Object(ue.a)({},t.viewRange.time,e);return{viewRange:Object(ue.a)({},t.viewRange,{time:r})}})},n.toggleSlimView=function(){var e=n.state.slimView;Sp(!e),n.setState({slimView:!e})},n.setTraceView=function(e){n.props.trace&&n.props.trace.data&&e===bp.TraceGraph&&(n.traceDagEV=Zd(n.props.trace.data)),n.setState({viewType:e})},n.archiveTrace=function(){var e=n.props,t=e.id;(0,e.archiveTrace)(t)},n.acknowledgeArchive=function(){var e=n.props,t=e.id;(0,e.acknowledgeArchive)(t)},n.focusUiFindMatches=function(){var e=n.props,t=e.trace,r=e.focusUiFindMatches,a=e.uiFind;t&&t.data&&(Jt(bd,Od),r(t.data,a))},n.nextResult=function(){Jt(bd,wd),n._scrollManager.scrollToNextVisibleSpan()},n.prevResult=function(){Jt(bd,jd),n._scrollManager.scrollToPrevVisibleSpan()};var a=e.embedded,o=e.trace;return n.state={headerHeight:null,slimView:Boolean(a&&a.timeline.collapseTitle),viewType:bp.TraceTimelineViewer,viewRange:{time:{current:[0,1]}}},n._headerElm=null,n._filterSpans=Jn()(xf,function(e){return"".concat(e," ").concat(Xe()(n.props.trace,"traceID")," ").concat(Xe()(n.props.trace,"data.spans.length"))}),n._scrollManager=new zd(o&&o.data,{scrollBy:Hd,scrollTo:Wd}),n._searchBar=c.createRef(),Cd(),n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this;if(this.ensureTraceFetched(),this.updateViewRangeTime(0,1),!this._scrollManager)throw new Error("Invalid state - scrollManager is unset");var t,r=this._scrollManager,n=r.scrollPageDown,a=r.scrollPageUp,o=r.scrollToNextVisibleSpan,i=r.scrollToPrevVisibleSpan,c=(t=function(t,r){return e._adjustViewRange(t,r,"kbd")},sd()(dg,function(e){var r=Object(xe.a)(e,2),n=r[0],a=r[1];return function(e){e.preventDefault(),t(n,a)}}));c.scrollPageDown=n,c.scrollPageUp=a,c.scrollToNextVisibleSpan=o,c.scrollToPrevVisibleSpan=i,c.clearSearch=this.clearSearch,c.searchSpans=this.focusOnSearchBar,Pd(c)}},{key:"componentDidUpdate",value:function(e){var t=e.id,r=this.props,n=r.id,a=r.trace;this._scrollManager.setTrace(a&&a.data),this.setHeaderHeight(this._headerElm),a?t!==n&&(this.updateViewRangeTime(0,1),this.clearSearch()):this.ensureTraceFetched()}},{key:"componentWillUnmount",value:function(){Cd(),Md&&(Md.cancel(),Md=void 0),this._scrollManager.destroy(),this._scrollManager=new zd(void 0,{scrollBy:Hd,scrollTo:Wd})}},{key:"_adjustViewRange",value:function(e,t,r){var n=Object(xe.a)(this.state.viewRange.time.current,2),a=n[0],o=n[1],i=id()(a+e,0,.99),c=id()(o+t,.01,1);if(c-i<.01)if(e<0&&t<0)c=i+.01;else if(e>0&&t>0)c=i+.01;else{var s=a+(o-a)/2;i=s-.005,c=s+.005}this.updateViewRangeTime(i,c,r)}},{key:"ensureTraceFetched",value:function(){var e=this.props,t=e.fetchTrace,r=e.location,n=e.trace,a=e.id;if(n){var o=this.props.history;a&&a!==a.toLowerCase()&&o.replace(te(a.toLowerCase(),r.state))}else t(a)}},{key:"render",value:function(){var e=this.props,t=e.archiveEnabled,r=e.archiveTraceState,n=e.embedded,a=e.id,o=e.uiFind,i=e.trace,s=e.location.state,l=this.state,u=l.slimView,f=l.viewType,d=l.headerHeight,p=l.viewRange;if(!i||i.state===st.LOADING)return c.createElement(jr,{className:"u-mt-vast",centered:!0});var h=i.data;if(i.state===st.ERROR||!h)return c.createElement(x,{className:"ub-m3",error:i.error||"Unknown error"});var m,v,g=0;o&&(g=f===bp.TraceGraph?(m=Rf(o,Xe()(this.traceDagEV,"vertices",[])))?m.size:0:(v=this._filterSpans(o,Xe()(i,"data.spans")))?v.size:0);var y,b=Boolean(n),E={focusUiFindMatches:this.focusUiFindMatches,slimView:u,textFilter:o,viewType:f,viewRange:p,canCollapse:!n||!n.timeline.hideSummary||!n.timeline.hideMinimap,clearSearch:this.clearSearch,hideMap:Boolean(f!==bp.TraceTimelineViewer||n&&n.timeline.hideMinimap),hideSummary:Boolean(n&&n.timeline.hideSummary),linkToStandalone:ee(a),nextResult:this.nextResult,onArchiveClicked:this.archiveTrace,onSlimViewClicked:this.toggleSlimView,onTraceViewChange:this.setTraceView,prevResult:this.prevResult,ref:this._searchBar,resultCount:g,showArchiveButton:!b&&t,showShortcutsHelp:!b,showStandaloneLink:b,showViewOptions:!b,toSearch:s&&s.fromSearch||null,trace:h,updateNextViewRangeTime:this.updateNextViewRangeTime,updateViewRangeTime:this.updateViewRangeTime};return bp.TraceTimelineViewer===f&&d?y=c.createElement(Tv,{registerAccessors:this._scrollManager.setAccessors,scrollToFirstVisibleSpan:this._scrollManager.scrollToFirstVisibleSpan,findMatchesIDs:v,trace:h,updateNextViewRangeTime:this.updateNextViewRangeTime,updateViewRangeTime:this.updateViewRangeTime,viewRange:p}):bp.TraceGraph===f&&d?y=c.createElement(mp,{headerHeight:d,ev:this.traceDagEV,uiFind:o,uiFindVertexKeys:m}):bp.TraceStatistics===f&&d?y=c.createElement(ng,{trace:h,uiFindVertexKeys:v,uiFind:o}):bp.TraceSpansView===f&&d?y=c.createElement(sg,{trace:h,uiFindVertexKeys:v,uiFind:o}):bp.TraceFlamegraph===f&&d&&(y=c.createElement(ug,{trace:i})),c.createElement("div",null,t&&c.createElement(hd,{acknowledge:this.acknowledgeArchive,archivedState:r}),c.createElement("div",{className:"Tracepage--headerSection",ref:this.setHeaderHeight},c.createElement(Hh,E)),d?c.createElement("section",{style:{paddingTop:d}},y):null)}}]),r}(c.PureComponent);var hg=Object(E.b)(function(e,t){var r=t.match.params.id,n=e.archive,a=e.config,o=e.embedded,i=e.router,c=e.trace.traces,s=r?c[r]:null,l=r?n[r]:null,u=Boolean(a.archiveEnabled),f=i.location.state,d=f&&f.fromSearch||null;return Object(ue.a)({},Yo(e),{archiveEnabled:u,archiveTraceState:l,embedded:o,id:r,searchUrl:d,trace:s})},function(e){var t=Object(ar.b)(n,e).fetchTrace,r=Object(ar.b)(gd,e),a=r.archiveTrace;return{acknowledgeArchive:r.acknowledge,archiveTrace:a,fetchTrace:t,focusUiFindMatches:Object(ar.b)(Yh,e).focusUiFindMatches}})(pg),mg=(r(512),r(273)),vg=r.n(mg);r(1408);function gg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var yg=function(e){var t=new Date(e),r=t.getHours().toString(),n=t.getMinutes().toString();return"".concat(1===r.length?"0".concat(r):r,":").concat(1===n.length?"0".concat(n):n)},bg=function(e){Object(m.a)(r,e);var t=gg(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).height=242,e.colors=["#DCA3D2","#EA9977","#869ADD"],e.state={crosshairValues:[]},e}return Object(h.a)(r,[{key:"getData",value:function(){var e=this.props.metricsData;return null===e?[]:Array.isArray(e)?e:[e]}},{key:"renderLines",value:function(){var e=this,t=this.props,r=t.metricsData,n=t.color;if(r){var a=[],o=0;return this.getData().forEach(function(t,r){a.push(c.createElement(Rl.a,{key:o++,data:t.metricPoints?t.metricPoints:[],getNull:function(e){return null!==e.y},onNearestX:function(t,r){var n=r.index;e.setState({crosshairValues:e.getData().map(function(e){return Object(ue.a)({},e.metricPoints[n],{label:e.quantile})})})},opacity:.1,color:[n||e.colors[r]]})),a.push(c.createElement(Rl.f,{getNull:function(e){return null!==e.y},key:o++,data:t.metricPoints?t.metricPoints:[],color:[n||e.colors[r]]}))}),a}return[]}},{key:"generatePlaceholder",value:function(e){var t=this.props.width;return c.createElement("div",{className:"center-placeholder",style:{width:t,height:this.height-74}},e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.width,n=t.yDomain,a=t.showHorizontalLines,o=t.showLegend,i=t.loading,s=t.metricsData,l=t.marginClassName,u=t.name,f=t.error,d=t.yAxisTickFormat,p=t.xDomain,h=this.generatePlaceholder(c.createElement(jr,{centered:!0})),m=this.generatePlaceholder("No Data"),v=this.generatePlaceholder("Couldn\u2019t fetch data"),g=c.createElement(Rl.i,{margin:{bottom:25},onMouseLeave:function(){return e.setState({crosshairValues:[]})},width:r,height:this.height-74,xDomain:p,yDomain:n},a?c.createElement(Rl.e,null):null,c.createElement(Rl.h,{tickFormat:yg,tickTotal:Math.floor(r/60)}),c.createElement(Rl.j,{tickFormat:d}),this.renderLines(),c.createElement(Rl.b,{values:this.state.crosshairValues},c.createElement("div",{className:"crosshair-value"},this.state.crosshairValues[0]&&"".concat(new Date(this.state.crosshairValues[0].x).toLocaleDateString()," ").concat(new Date(this.state.crosshairValues[0].x).toLocaleTimeString()),this.state.crosshairValues.reverse().map(function(e){return o?c.createElement("div",{key:e.label},"P",100*e.label,": ",e.y):c.createElement("div",{key:e.label},e.y)}))),o?c.createElement(Rl.c,{className:"legend-label",orientation:"horizontal",items:this.getData().map(function(t,r){return{color:e.colors[r],title:"".concat(100*t.quantile,"th")}}).reverse()}):null);return!i&&p.length>0&&(h=null===s?m:g),f&&(h=v),c.createElement("div",{className:"graph-container ".concat(l),style:{height:this.height}},c.createElement("h3",{className:"graph-header"},u),h)}}]),r}(c.PureComponent),Eg=(r(506),r(355)),Og=r.n(Eg);r(1410);function wg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var jg=function(e){Object(m.a)(r,e);var t=wg(r);function r(){return Object(p.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props,t=e.dataPoints,n=e.yDomain,a=e.color;if(e.error)return r.generatePlaceholder("Couldn\u2019t fetch data");if(0===t.length)return r.generatePlaceholder("No Data");var o={};return n&&(o.yDomain=n),c.createElement("div",{className:"ops-container"},c.createElement(Rl.i,{margin:{left:0,right:0,bottom:1,top:2},width:100,height:15},c.createElement(Rl.a,Object.assign({className:"area-series-example ops-graph-style",curve:"curveLinear",color:a,data:t},o)),c.createElement(Rl.f,Object.assign({className:"area-elevated-line-series",color:a,data:t},o))))}}],[{key:"generatePlaceholder",value:function(e){return c.createElement("div",{className:"ops-graph-placeholder"},e)}}]),r}(c.PureComponent),kg=(r(1412),"".concat("jaeger/ux/trace/spm","/view-traces")),Ng="".concat("jaeger/ux/trace/spm","/sort-operations");function Sg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Dg=new Map([["name","Name"],["latency","P95 Latency"],["requests","Request rate"],["errRates","Error rate"],["impact","Impact"]]);function Tg(e){return e<.1?"< 0.1":"".concat(e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}var xg=function(e){Object(m.a)(r,e);var t=Sg(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hoveredRowKey:-1,tableSorting:{order:"descend",columnKey:"impact"}},e}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.loading,n=t.error;if(r)return c.createElement(jr,{centered:!0});if(n.opsCalls&&n.opsErrors&&n.opsLatencies)return c.createElement("div",{className:"ops-table-error-placeholder"},"Couldn\u2019t fetch data");var a=[{title:Dg.get("name"),className:"header-item",dataIndex:"name",key:"name",sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:Dg.get("latency"),className:"header-item",dataIndex:"latency",key:"latency",sorter:function(e,t){return e.latency-t.latency},render:function(e,t){return c.createElement("div",{className:"column-container"},c.createElement(jg,{dataPoints:t.dataPoints.service_operation_latencies,color:"#869ADD",error:n.opsLatencies}),c.createElement("div",{className:"table-graph-avg"},"number"===typeof e&&t.dataPoints.service_operation_latencies.length>0?function(e){var t=Cs(e),r=Tg(Vs(e,t));return"".concat(r).concat(Ms(t))}(1e3*e):""))}},{title:Dg.get("requests"),className:"header-item",dataIndex:"requests",key:"requests",sorter:function(e,t){return e.requests-t.requests},render:function(e,t){return c.createElement("div",{className:"column-container"},c.createElement(jg,{dataPoints:t.dataPoints.service_operation_call_rate,color:"#4795BA",error:n.opsCalls}),c.createElement("div",{className:"table-graph-avg"},"number"===typeof e&&t.dataPoints.service_operation_call_rate.length>0?"".concat(Tg(e)," req/s"):""))}},{title:Dg.get("errRates"),className:"header-item",dataIndex:"errRates",key:"errRates",sorter:function(e,t){return e.errRates-t.errRates},render:function(e,t){return c.createElement("div",{className:"column-container"},c.createElement(jg,{dataPoints:t.dataPoints.service_operation_error_rate,color:"#CD513A",yDomain:[0,1],error:n.opsErrors}),c.createElement("div",{className:"table-graph-avg"},"number"===typeof e&&t.dataPoints.service_operation_error_rate.length>0?"".concat(Tg(100*e),"%"):""))}},{title:c.createElement("div",{style:{paddingTop:1}},c.createElement("span",{style:{float:"left",color:"#459798"}},Dg.get("impact")," \xa0",c.createElement(aa.a,{overlayClassName:"impact-tooltip",placement:"top",title:"The result of multiplying avg. duration and requests per minute, showing the most used and slowest endpoints"},c.createElement(W.a,{type:"info-circle"})))),className:"header-item",dataIndex:"impact",key:"impact",defaultSortOrder:"descend",sorter:function(e,t){return e.impact-t.impact},render:function(t,r){var n=null;if(e.state.hoveredRowKey===r.key){var a=e.props,o=a.endTime,i=a.lookback,s=a.serviceName;n=c.createElement(vi.a,{href:_("/search?end=".concat(o,"000&limit=20&lookback=").concat(i/36e5,"h&maxDuration&minDuration&operation=").concat(encodeURIComponent(r.name),"&service=").concat(s,"&start=").concat(o-i,"000")),target:"blank",onClick:function(){return e=r.name,Jt(kg,e);var e}},"View traces")}return{children:c.createElement("div",{className:"column-container"},c.createElement(Og.a,{className:"impact",percent:100*t,strokeLinecap:"square",strokeColor:"#459798",showInfo:!1}),c.createElement("div",{className:"view-trace-button"},n))}}}];return c.createElement(Ic.a,null,c.createElement(ti.a,{rowClassName:function(){return"table-row"},columns:a,dataSource:this.props.data,pagination:{defaultPageSize:20,showSizeChanger:!0,pageSizeOptions:["20","50","100"]},onRow:function(){return{onMouseEnter:function(t){e.setState({hoveredRowKey:parseInt(t.currentTarget.getAttribute("data-row-key"),10)})},onMouseLeave:function(){e.setState({hoveredRowKey:-1})}}},onChange:function(t,r,n){var a=n.columnKey,o=n.order;if(!km()({columnKey:a,order:o},e.state.tableSorting)){var i=Dg.get(a||e.state.tableSorting.columnKey);Jt(Ng,i),e.setState({tableSorting:{columnKey:a,order:o}})}}}))}}]),r}(c.PureComponent),Rg=(r(1414),r(574)),_g=r.n(Rg);function Ig(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Pg=function(e){Object(m.a)(r,e);var t=Ig(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).config=void 0,n.config=bt("monitor.emptyState"),n}return Object(h.a)(r,[{key:"render",value:function(){var e=this;return c.createElement(Cc.a,null,c.createElement(Ic.a,{justify:"center"},c.createElement(Cc.a,{span:8,offset:8},c.createElement("img",{className:"monitor-preview-image-empty-state",alt:"jaeger-monitor-tab-preview",src:_g.a}))),c.createElement(Ic.a,{justify:"center"},c.createElement(Cc.a,{span:6,offset:9,className:"center-empty-state"},this.config.mainTitle&&c.createElement("h2",{className:"main-title-empty-state"},this.config.mainTitle),this.config.subTitle&&c.createElement("h3",{className:"sub-title-empty-state"},this.config.subTitle),this.config.description&&c.createElement("h4",{className:"description-empty-state"},this.config.description),this.config.button&&this.config.button.text&&c.createElement(vi.a,{className:"button-empty-state",onClick:function(){return e.config.button&&e.config.button.onClick&&e.config.button.onClick()}},this.config.button.text),this.config.alert&&c.createElement(Ic.a,{justify:"center"},c.createElement(Cc.a,{span:20,offset:2},c.createElement(vg.a,{message:this.config.alert.message,type:this.config.alert.type,showIcon:!0}))))))}}]),r}(c.PureComponent),Cg=(r(1417),"".concat("jaeger/ux/trace/spm","/view-all-traces")),Mg="".concat("jaeger/ux/trace/spm","/select-service"),Vg="".concat("jaeger/ux/trace/spm","/select-timeframe"),Lg="".concat("jaeger/ux/trace/spm","/search-operation"),Ag=function(){return Jt(Cg,"click")};function Fg(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Bg=ia()(function(e){return function(e){return Jt(Lg,e)}(e)},1e3),Hg=Y.a.Search,Wg=As({AntInputComponent:fs,onChangeAdapter:function(e){return e?e.value:null}}),Gg=Object(zc.a)("serviceForm"),Ug=36e5,zg=[{label:"Last 5 minutes",value:3e5},{label:"Last 15 minutes",value:9e5},{label:"Last 30 minutes",value:18e5},{label:"Last Hour",value:Ug},{label:"Last 2 hours",value:2*Ug},{label:"Last 6 hours",value:6*Ug},{label:"Last 12 hours",value:12*Ug},{label:"Last 24 hours",value:24*Ug},{label:"Last 2 days",value:48*Ug}],qg=function(e){if(!e)return null;var t=e.metricPoints.map(function(e){return Object(ue.a)({},e,{y:100*e.y})});return Object(ue.a)({},e,{metricPoints:t})},Kg=function(e){Object(m.a)(r,e);var t=Fg(r);function r(e){var n;return Object(p.a)(this,r),(n=t.call(this,e)).docsLink=void 0,n.graphDivWrapper=void 0,n.serviceSelectorValue="",n.endTime=Date.now(),n.state={graphWidth:300,serviceOpsMetrics:void 0,searchOps:"",graphXDomain:[]},n.graphDivWrapper=c.createRef(),n.docsLink=bt("monitor.docsLink"),n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchServices,r=e.services;t(),0!==r.length&&this.fetchMetrics(),window.addEventListener("resize",this.updateDimensions.bind(this)),this.updateDimensions.apply(this),this.calcGraphXDomain()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selectedService,n=t.selectedTimeFrame,a=t.services;e.selectedService!==r||e.selectedTimeFrame!==n?this.fetchMetrics():km()(e.services,a)||this.fetchMetrics(),e.selectedTimeFrame!==this.props.selectedTimeFrame&&this.calcGraphXDomain()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"calcGraphXDomain",value:function(){var e=Date.now();this.setState({graphXDomain:[e-this.props.selectedTimeFrame,e]})}},{key:"updateDimensions",value:function(){this.graphDivWrapper.current&&this.setState({graphWidth:this.graphDivWrapper.current.offsetWidth-24})}},{key:"fetchMetrics",value:function(){var e=this.props,t=e.selectedService,r=e.selectedTimeFrame,n=e.fetchAllServiceMetrics,a=e.fetchAggregatedServiceMetrics,o=e.services,i=t||o[0];if(i){this.endTime=Date.now(),Vc.a.set("lastAtmSearchTimeframe",r),Vc.a.set("lastAtmSearchService",this.getSelectedService());var c={quantile:.95,endTs:this.endTime,lookback:r,step:6e4,ratePer:6e5};n(i,c),a(i,c),this.setState({serviceOpsMetrics:void 0,searchOps:""})}}},{key:"getSelectedService",value:function(){var e=this.props,t=e.selectedService,r=e.services;return t||Vc.a.get("lastAtmSearchService")||r[0]}},{key:"render",value:function(){var e=this,t=this.props,r=t.services,n=t.metrics,a=t.selectedTimeFrame,o=t.servicesLoading,i=n.serviceMetrics?n.serviceMetrics.service_latencies:null,s=function(e){var t=0;if(e&&Array.isArray(e)){var r=e.map(function(e){return e.max});t=Math.max.apply(Math,Object(Re.a)(r))}else e&&(t=e.max);return Cs(1e3*t)}(i),l=n.serviceMetrics?n.serviceMetrics.service_error_rate:null;return o?c.createElement(jr,{vcentered:!0,centered:!0}):!1===n.isATMActivated?c.createElement(Pg,null):c.createElement(c.Fragment,null,de()(n&&n.serviceMetrics&&n.serviceMetrics.service_latencies)&&c.createElement(vg.a,{message:c.createElement(c.Fragment,null,"No data yet! Please see these",c.createElement(N.a,{to:{pathname:this.docsLink},target:"_blank"},"\xa0instructions\xa0"),"on how to set up your span metrics."),type:"warning",showIcon:!0}),c.createElement("div",{className:"service-view-container"},c.createElement(Ic.a,null,c.createElement(Cc.a,{span:6},c.createElement("h2",{className:"service-selector-header"},"Choose service"),c.createElement(Uc.a,{onChange:function(e,t){return Jt(Mg,t)},name:"service",component:Wg,placeholder:"Select A Service",props:{className:"select-a-service-input",value:this.getSelectedService(),disabled:n.operationMetricsLoading,clearable:!1,options:r.map(function(e){return{label:e,value:e}}),required:!0}}))),c.createElement(Ic.a,null,c.createElement(Cc.a,{span:16},c.createElement("p",{className:"operations-metrics-text"},'Aggregation of all "',this.getSelectedService(),'" metrics in selected timeframe.'," ",c.createElement("a",{href:_("/search?end=".concat(Date.now(),"000&limit=20&lookback=").concat(a/36e5,"h&maxDuration&minDuration&service=").concat(this.getSelectedService(),"&start=").concat(Date.now()-a,"000")),target:"blank",onClick:Ag},"View all traces"))),c.createElement(Cc.a,{span:8,className:"timeframe-selector"},c.createElement(Uc.a,{name:"timeframe",component:Wg,placeholder:"Select A Timeframe",onChange:function(e,t){var r=zg.find(function(e){return e.value===t}).label;Jt(Vg,r)},props:{className:"select-a-timeframe-input",defaultValue:zg[3],value:a,disabled:n.operationMetricsLoading,clearable:!1,options:zg,required:!0}}))),c.createElement(Ic.a,null,c.createElement(Cc.a,{span:8},c.createElement("div",{ref:this.graphDivWrapper}),c.createElement(bg,{key:"latency",error:n.serviceError.service_latencies_50&&n.serviceError.service_latencies_75&&n.serviceError.service_latencies_95,loading:n.loading,name:"Latency (".concat(Ms(s),")"),width:this.state.graphWidth,metricsData:i,showLegend:!0,marginClassName:"latency-margins",showHorizontalLines:!0,yAxisTickFormat:function(e){return function(e,t){return Vs(1e3*e,t)}(e,s)},xDomain:this.state.graphXDomain})),c.createElement(Cc.a,{span:8},c.createElement(bg,{key:"errRate",error:n.serviceError.service_error_rate,loading:n.loading,name:"Error rate (%)",width:this.state.graphWidth,metricsData:qg(l),marginClassName:"error-rate-margins",color:"#CD513A",yDomain:[0,100],xDomain:this.state.graphXDomain})),c.createElement(Cc.a,{span:8},c.createElement(bg,{key:"requests",loading:n.loading,error:n.serviceError.service_call_rate,name:"Request rate (req/s)",width:this.state.graphWidth,metricsData:n.serviceMetrics?n.serviceMetrics.service_call_rate:null,showHorizontalLines:!0,color:"#4795BA",marginClassName:"request-margins",xDomain:this.state.graphXDomain}))),c.createElement(Ic.a,{className:"operation-table-block"},c.createElement(Ic.a,null,c.createElement(Cc.a,{span:16},c.createElement("h2",{className:"table-header"},"Operations metrics under ",this.getSelectedService())," ",c.createElement("span",{className:"over-the-last"},"Over the ",function(e){if(void 0===e)return"";var t=zg.find(function(t){return t.value===e});return void 0===t?"":t.label.toLowerCase()}(a))),c.createElement(Cc.a,{span:8,className:"select-operation-column"},c.createElement(Hg,{placeholder:"Search operation",className:"select-operation-input",value:this.state.searchOps,disabled:!0===n.operationMetricsLoading||void 0===n.serviceOpsMetrics,onChange:function(t){var r=n.serviceOpsMetrics.filter(function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())});e.setState({searchOps:t.target.value,serviceOpsMetrics:r}),Bg(t.target.value)}}))),c.createElement(Ic.a,null,c.createElement(xg,{loading:n.operationMetricsLoading,error:n.opsError,data:void 0===this.state.serviceOpsMetrics?n.serviceOpsMetrics:this.state.serviceOpsMetrics,endTime:this.endTime,lookback:a,serviceName:this.getSelectedService()})))))}}]),r}(c.PureComponent);var Jg,Zg=Object(E.b)(function(e){var t=e.services,r=e.metrics;return{services:t.services||[],servicesLoading:t.loading,metrics:r,selectedService:Gg(e,"service")||Vc.a.get("lastAtmSearchService"),selectedTimeFrame:Gg(e,"timeframe")||Vc.a.get("lastAtmSearchTimeframe")||Ug}},function(e){var t=Object(ar.b)(n,e);return{fetchServices:t.fetchServices,fetchAllServiceMetrics:t.fetchAllServiceMetrics,fetchAggregatedServiceMetrics:t.fetchAggregatedServiceMetrics}})(Object(qc.a)({form:"serviceForm"})(Kg)),Yg=function(){return c.createElement(Zg,null)},Qg=r(276);var $g,Xg=Object(Fu.a)((Jg={},Object(Nt.a)(Jg,"".concat(qr,"_PENDING"),function(e){return Object(ue.a)({},e,{loading:!0})}),Object(Nt.a)(Jg,"".concat(qr,"_FULFILLED"),function(e,t){var r=t.payload;return Object(ue.a)({},e,{dependencies:r.data,loading:!1})}),Object(Nt.a)(Jg,"".concat(qr,"_REJECTED"),function(e,t){var r=t.payload;return Object(ue.a)({},e,{error:r,dependencies:[],loading:!1})}),Jg),{dependencies:[],loading:!1,error:null});function ey(e,t){var r=t.visibilityIndices,n=t.viewModifier,a=fc(t),o=e[a];if(!o||o.state!==st.DONE)return console.warn("Cannot change view modifiers for unloaded Deep Dependency Graph"),e;var i=new Map(o.viewModifiers);return(r||Array.from(i.keys())).forEach(function(e){var t=n?(i.get(e)||0)&~n:he.None;t===he.None?i.delete(e):i.set(e,t)}),Object(ue.a)({},e,Object(Nt.a)({},a,Object(ue.a)({},o,{viewModifiers:i})))}var ty=Object(Fu.a)(($g={},Object(Nt.a)($g,"".concat(zr,"_PENDING"),function(e,t){var r=fc(t.meta.query);return Object(ue.a)({},e,Object(Nt.a)({},r,{state:st.LOADING}))}),Object(Nt.a)($g,"".concat(zr,"_FULFILLED"),Hu(function(e,t){var r=t.meta,n=t.payload,a=r.query,o=a.service,i=a.operation,c=fc(a);return Object(ue.a)({},e,Object(Nt.a)({},c,{model:Al(n,{service:o,operation:i}),state:st.DONE,viewModifiers:new Map}))})),Object(Nt.a)($g,"".concat(zr,"_REJECTED"),Hu(function(e,t){var r=t.meta,n=t.payload,a=fc(r.query);return Object(ue.a)({},e,Object(Nt.a)({},a,{error:n,state:st.ERROR}))})),Object(Nt.a)($g,oc.ADD_VIEW_MODIFIER,Bu(function(e,t){var r=t.visibilityIndices,n=t.viewModifier,a=fc(t),o=e[a];if(!o||o.state!==st.DONE)return console.warn("Cannot set view modifiers for unloaded Deep Dependency Graph"),e;var i=new Map(o.viewModifiers);return r.forEach(function(e){i.set(e,(i.get(e)||0)|n)}),Object(ue.a)({},e,Object(Nt.a)({},a,Object(ue.a)({},o,{viewModifiers:i})))})),Object(Nt.a)($g,oc.CLEAR_VIEW_MODIFIERS_FROM_INDICES,Bu(ey)),Object(Nt.a)($g,oc.REMOVE_VIEW_MODIFIER,Bu(ey)),Object(Nt.a)($g,oc.REMOVE_VIEW_MODIFIER_FROM_INDICES,Bu(ey)),$g),{});var ry,ny=Object(Fu.a)(Object(Nt.a)({},"".concat(Ha.GET_DECORATION,"_FULFILLED"),Bu(function(e,t){return t?Object.keys(t).reduce(function(e,r){var n=t[r],a=n.withOp,o=n.withoutOp,i=[];o&&Object.keys(o).forEach(function(e){var t=o[e];"number"===typeof t&&i.push(t)});var c=[];if(a&&Object.keys(a).forEach(function(e){Object.keys(a[e]).forEach(function(t){var r=a[e][t];"number"===typeof r&&c.push(r)})}),e[r]){var s=e[r],l=s.withOpMax,u=s.withoutOpMax;"number"===typeof l&&c.push(l),"number"===typeof u&&i.push(u);var f=Math.max.apply(Math,c),d=Math.max.apply(Math,i);return Object(ue.a)({},e,Object(Nt.a)({},r,{withOp:a?Object.keys(a).reduce(function(e,t){return Object(ue.a)({},e,Object(Nt.a)({},t,Object.assign({},e[t],a[t])))},e[r].withOp||{}):e[r].withOp,withOpMax:f,withoutOp:o?Object.assign({},e[r].withoutOp,o):e[r].withoutOp,withoutOpMax:d}))}var p=Math.max.apply(Math,c),h=Math.max.apply(Math,i);return Object(ue.a)({},e,Object(Nt.a)({},r,{withOp:a,withOpMax:p,withoutOp:o,withoutOpMax:h}))},e):e})),{});var ay,oy,iy=Object(Fu.a)((ry={},Object(Nt.a)(ry,"".concat(Wr,"_PENDING"),function(e){return Object(ue.a)({},e,{loading:!0})}),Object(Nt.a)(ry,"".concat(Wr,"_FULFILLED"),function(e,t){var r=t.payload.data||[];return r.sort(Ql),Object(ue.a)({},e,{services:r,error:null,loading:!1})}),Object(Nt.a)(ry,"".concat(Wr,"_REJECTED"),function(e,t){var r=t.payload;return Object(ue.a)({},e,{error:r,loading:!1,services:[]})}),Object(Nt.a)(ry,"".concat(Ur,"_PENDING"),function(e,t){var r=t.meta.serviceName,n=Object(ue.a)({},e.operationsForService,Object(Nt.a)({},r,[]));return Object(ue.a)({},e,{serverOpsForService:n})}),Object(Nt.a)(ry,"".concat(Ur,"_FULFILLED"),function(e,t){var r=t.meta.serviceName,n=t.payload.data;if(!Array.isArray(n))return e;var a=Object(ue.a)({},e.operationsForService,Object(Nt.a)({},r,n.map(function(e){return e.name}).sort(Ql)));return Object(ue.a)({},e,{serverOpsForService:a})}),Object(Nt.a)(ry,"".concat(Gr,"_PENDING"),function(e,t){var r=t.meta.serviceName,n=Object(ue.a)({},e.operationsForService,Object(Nt.a)({},r,[]));return Object(ue.a)({},e,{operationsForService:n})}),Object(Nt.a)(ry,"".concat(Gr,"_FULFILLED"),function(e,t){var r=t.meta,n=t.payload.data;Array.isArray(n)&&n.sort(Ql);var a=Object(ue.a)({},e.operationsForService,Object(Nt.a)({},r.serviceName,n||[]));return Object(ue.a)({},e,{operationsForService:a})}),ry),{error:null,loading:!1,operationsForService:{},serverOpsForService:{},services:null}),cy={serviceError:{service_latencies_50:null,service_latencies_75:null,service_latencies_95:null,service_call_rate:null,service_error_rate:null},opsError:{opsLatencies:null,opsCalls:null,opsErrors:null},isATMActivated:null,loading:!1,operationMetricsLoading:null,serviceMetrics:null,serviceOpsMetrics:void 0};function sy(e){var t=e.traceID;if(!t)return null;t=t.toLowerCase();var r=0,n=Number.MAX_SAFE_INTEGER,a=new Map,o=new Map;e.spans=e.spans.filter(function(e){return Boolean(e.startTime)});for(var i=e.spans.length,c=0;c<i;c++){var s=e.spans[c],l=s.startTime,u=s.duration,f=s.processID,d=s.spanID;l<n&&(n=l),l+u>r&&(r=l+u);var p=a.get(d);null!=p?(console.warn("Dupe spanID, ".concat(p+1," x ").concat(d),s,o.get(d)),km()(s,o.get(d))&&console.warn("\t two spans with same ID have `isEqual(...) === true`"),a.set(d,p+1),d="".concat(d,"_").concat(p),s.spanID=d):a.set(d,1),s.process=e.processes[f],o.set(d,s)}var h=au(e),m=[],v={};h.walk(function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("__root__"!==e){var i=o.get(e);if(i){var c=i.process.serviceName;v[c]=(v[c]||0)+1,i.relativeStartTime=i.startTime-n,i.depth=a-1,i.hasChildren=r.children.length>0,i.warnings=i.warnings||[],i.tags=i.tags||[],i.references=i.references||[];var s=function(e){var t=new Map;return{tags:e.reduce(function(e,r){return e.some(function(e){return e.key===r.key&&e.value===r.value})?t.set("".concat(r.key,":").concat(r.value),'Duplicate tag "'.concat(r.key,":").concat(r.value,'"')):e.push(r),e},[]),warnings:Array.from(t.values())}}(i.tags);i.tags=function(e,t){var r=e.slice(),n=(t||[]).map(function(e){return e.toLowerCase()});return r.sort(function(e,t){for(var r=e.key.toLowerCase(),a=t.key.toLowerCase(),o=0;o<n.length;o++){var i=n[o];if(r.startsWith(i)&&!a.startsWith(i))return-1;if(!r.startsWith(i)&&a.startsWith(i))return 1}return r>a?1:r<a?-1:0}),r}(s.tags,bt("topTagPrefixes")),i.warnings=i.warnings.concat(s.warnings),i.references.forEach(function(r,n){var a=o.get(r.spanID);a&&(r.span=a,n>0&&(a.subsidiarilyReferencedBy=a.subsidiarilyReferencedBy||[],a.subsidiarilyReferencedBy.push({spanID:e,traceID:t,span:i,refType:r.refType})))}),m.push(i)}}});var g=bh(m);return{services:Object.keys(v).map(function(e){return{name:e,numberOfSpans:v[e]}}),spans:m,traceID:t,traceName:g,processes:e.processes,duration:r-n,startTime:n,endTime:r}}var ly,uy,fy={config:function(e){return void 0===e?yt():e},dependencies:Xg,ddg:ty,embedded:function(e){if(void 0===e){var t=Xe()(window,"location.search");return t?function(e){var t=$.a.parse(e),r=t.uiEmbed,n=Object(le.a)(t,["uiEmbed"]);return r!==Su?null:{version:Su,searchHideGraph:n[Du.searchHideGraph]===Nu,timeline:{collapseTitle:n[Du.timeline.collapseTitle]===Nu,hideMinimap:n[Du.timeline.hideMinimap]===Nu,hideSummary:n[Du.timeline.hideSummary]===Nu}}}(t):null}return e},pathAgnosticDecorations:ny,services:iy,metrics:Object(Fu.a)((ay={},Object(Nt.a)(ay,"".concat(Kr,"_PENDING"),function(e){return Object(ue.a)({},e,{serviceError:cy.serviceError,loading:!0})}),Object(Nt.a)(ay,"".concat(Kr,"_FULFILLED"),function(e,t){var r=t.payload,n={service_latencies:null,service_call_rate:null,service_error_rate:null},a={service_latencies_50:null,service_latencies_75:null,service_latencies_95:null,service_call_rate:null,service_error_rate:null},o=!0;return r&&r.forEach(function(e,t){if("fulfilled"===e.status){var r=e.value;if(r.metrics[0]){var i=0,c={serviceName:r.metrics[0].labels[0].value,quantile:r.quantile,max:0,metricPoints:r.metrics[0].metricPoints.map(function(e){var t;try{t=parseFloat(e.gaugeValue.doubleValue.toFixed(2)),i=t>i?t:i}catch(r){t=null}return{x:new Date(e.timestamp).getTime(),y:t}})};c.max=i,"service_latencies"===r.name?(null===n[r.name]&&(n[r.name]=[]),n[r.name].push(c)):n[r.name]=c}}else switch("object"===typeof e.reason&&501===e.reason.httpStatus&&(o=!1),t){case 0:a.service_latencies_50=e.reason;break;case 1:a.service_latencies_75=e.reason;break;case 2:a.service_latencies_95=e.reason;break;case 3:a.service_call_rate=e.reason;break;case 4:a.service_error_rate=e.reason}}),Object(ue.a)({},e,{serviceMetrics:n,serviceError:a,loading:!1,isATMActivated:o})}),Object(Nt.a)(ay,"".concat(Jr,"_PENDING"),function(e){return Object(ue.a)({},e,{opsError:cy.opsError,operationMetricsLoading:!0})}),Object(Nt.a)(ay,"".concat(Jr,"_FULFILLED"),function(e,t){var r=t.payload,n={opsLatencies:null,opsCalls:null,opsErrors:null},a=null,o=void 0;if(r){r.forEach(function(e,t){if("fulfilled"===e.status){var r=e.value;r.metrics.forEach(function(e){null===a&&(a={});var t=null,n={service_operation_latencies:0,service_operation_call_rate:0,service_operation_error_rate:0};e.labels.forEach(function(e){"operation"===e.name&&(t=e.value)}),t&&(void 0===a[t]&&(a[t]={name:t,metricPoints:{service_operation_latencies:[],service_operation_call_rate:[],service_operation_error_rate:[],avg:{service_operation_latencies:null,service_operation_call_rate:null,service_operation_error_rate:null}}}),a[t].metricPoints[r.name]=e.metricPoints.map(function(e){var t;try{t=parseFloat(e.gaugeValue.doubleValue.toFixed(2)),n[r.name]+=t}catch(a){t=null}return{x:new Date(e.timestamp).getTime(),y:t}}),a[t].metricPoints.avg[r.name]=e.metricPoints.length>0?parseFloat((n[r.name]/e.metricPoints.length).toFixed(2)):null)})}else switch(t){case 0:n.opsLatencies=e.reason;break;case 1:n.opsCalls=e.reason;break;case 2:n.opsErrors=e.reason}});var i={min:0,max:0};a&&((o=Object.keys(a).map(function(e,t){var r=0;return null!==a[e].metricPoints.avg.service_operation_latencies&&null!==a[e].metricPoints.avg.service_operation_call_rate&&(r=a[e].metricPoints.avg.service_operation_latencies*a[e].metricPoints.avg.service_operation_call_rate/100),0===t?(i.max=r,i.min=r):(i.max=i.max<r?r:i.max,i.min=i.min>r?r:i.min),{key:t,name:a[e].name,latency:a[e].metricPoints.avg.service_operation_latencies||0,requests:a[e].metricPoints.avg.service_operation_call_rate||0,errRates:a[e].metricPoints.avg.service_operation_error_rate||0,impact:r,dataPoints:a[e].metricPoints}}))&&1===o.length?o.forEach(function(e,t){o[t].impact=1}):o&&o.length>1&&o.forEach(function(e,t){i.max-i.min===0?o[t].impact=0:o[t].impact=(e.impact-i.min)/(i.max-i.min)}))}return Object(ue.a)({},e,{serviceOpsMetrics:o,opsError:n,operationMetricsLoading:!1})}),ay),cy),trace:Object(Fu.a)((oy={},Object(Nt.a)(oy,"".concat(Ar,"_PENDING"),function(e,t){var r=t.meta.id,n=Object(ue.a)({},e.traces,Object(Nt.a)({},r,{id:r,state:st.LOADING}));return Object(ue.a)({},e,{traces:n})}),Object(Nt.a)(oy,"".concat(Ar,"_FULFILLED"),function(e,t){var r,n=t.meta,a=t.payload,o=n.id,i=sy(a.data[0]);r=i?{data:i,id:o,state:st.DONE}:{id:o,state:st.ERROR,error:new Error("Invalid trace data recieved.")};var c=Object(ue.a)({},e.traces,Object(Nt.a)({},o,r));return Object(ue.a)({},e,{traces:c})}),Object(Nt.a)(oy,"".concat(Ar,"_REJECTED"),function(e,t){var r=t.meta,n=t.payload,a=r.id,o={id:a,error:n,state:st.ERROR},i=Object(ue.a)({},e.traces,Object(Nt.a)({},a,o));return Object(ue.a)({},e,{traces:i})}),Object(Nt.a)(oy,"".concat(Fr,"_PENDING"),function(e,t){var r=t.meta.ids,n=Object(ue.a)({},e.traces);return r.forEach(function(e){n[e]={id:e,state:st.LOADING}}),Object(ue.a)({},e,{traces:n})}),Object(Nt.a)(oy,"".concat(Fr,"_FULFILLED"),function(e,t){var r=t.payload,n=Object(ue.a)({},e.traces);return r.data.forEach(function(e){var t=sy(e);n[t.traceID]={data:t,id:t.traceID,state:st.DONE}}),r.errors&&r.errors.forEach(function(e){var t=e.msg,r=e.traceID,a=new Error("Error: ".concat(t," - ").concat(r));n[r]={error:a,id:r,state:st.ERROR}}),Object(ue.a)({},e,{traces:n})}),Object(Nt.a)(oy,"".concat(Fr,"_REJECTED"),function(e,t){var r=t.meta,n=t.payload,a=r.ids,o=Object(ue.a)({},e.traces),i=n;return a.forEach(function(e){o[e]={error:i,id:e,state:st.ERROR}}),Object(ue.a)({},e,{traces:o})}),Object(Nt.a)(oy,"".concat(Hr,"_PENDING"),function(e,t){var r={query:t.meta.query,results:[],state:st.LOADING};return Object(ue.a)({},e,{search:r})}),Object(Nt.a)(oy,"".concat(Hr,"_FULFILLED"),function(e,t){var r=t.meta,n=t.payload;if(!km()(e.search.query,r.query))return e;for(var a=n.data.map(sy),o={},i=[],c=0;c<a.length;c++){var s=a[c],l=s.traceID;o[l]={data:s,id:l,state:st.DONE},i.push(l)}var u=Object(ue.a)({},e.traces,o),f=Object(ue.a)({},e.search,{results:i,state:st.DONE});return Object(ue.a)({},e,{search:f,traces:u})}),Object(Nt.a)(oy,"".concat(Hr,"_REJECTED"),function(e,t){var r=t.meta,n=t.payload;if(!km()(e.search.query,r.query))return e;var a=Object(ue.a)({},e.search,{error:n,results:[],state:st.ERROR});return Object(ue.a)({},e,{search:a})}),Object(Nt.a)(oy,"".concat(Au,"_PENDING"),function(e){var t=e.search;return Object(ue.a)({},e,{search:Object(ue.a)({},t,{state:st.LOADING})})}),Object(Nt.a)(oy,"".concat(Au,"_FULFILLED"),function(e,t){for(var r=t.payload.data.map(sy),n={},a=new Set(e.search.results),o=0;o<r.length;o++){var i=r[o],c=i.traceID;n[c]={data:i,id:c,state:st.DONE},a.add(c)}var s=Object(ue.a)({},e.traces,n),l=Object(ue.a)({},e.search,{results:Array.from(a),state:st.DONE});return Object(ue.a)({},e,{search:l,traces:s})}),Object(Nt.a)(oy,"".concat(Au,"_REJECTED"),function(e,t){var r={error:t.payload,results:[],state:st.ERROR};return Object(ue.a)({},e,{search:r})}),oy),{traces:{},search:{query:null,results:[]}}),form:Qg.a},dy=r(575),py=r(174),hy="jaeger/ux/trace/timeline",my="".concat(hy,"/column"),vy="".concat(hy,"/expand-collapse"),gy="".concat(hy,"/logs"),yy="".concat(hy,"/logs/item"),by="".concat(hy,"/parent"),Ey="".concat(hy,"/process"),Oy="".concat(hy,"/row"),wy="".concat(hy,"/tags");function jy(e,t){var r=t.payload;return r?e.getState().traceTimeline.detailStates.get(r.spanID):void 0}function ky(e,t,r){var n=jy(e,t);n&&r(n)}var Ny=function(e){return Jt(gy,yp(e.logs.isOpen))},Sy=function(e){return Jt(Ey,yp(e.isProcessOpen))},Dy=function(e){return Jt(wy,yp(e.isTagsOpen))},Ty=(ly={},Object(Nt.a)(ly,Zh.CHILDREN_TOGGLE,function(e,t){var r=t.payload;if(r){var n=e.getState(),a=n.traceTimeline.traceID;if(a){var o=r.spanID,i=n.traceTimeline.childrenHiddenIDs.has(o),c=n.trace.traces[a]||n.trace.traces[a.replace(/^0*/,"")];if(c&&c.data){var s=c.data.spans.find(function(e){return e.spanID===o});s&&Jt(by,yp(!i),s.depth)}}}}),Object(Nt.a)(ly,Zh.DETAIL_TOGGLE,function(e,t){return r=Boolean(jy(e,t)),Jt(Oy,yp(r));var r}),Object(Nt.a)(ly,Zh.DETAIL_TAGS_TOGGLE,function(e,t){return ky(e,t,Dy)}),Object(Nt.a)(ly,Zh.DETAIL_PROCESS_TOGGLE,function(e,t){return ky(e,t,Sy)}),Object(Nt.a)(ly,Zh.DETAIL_LOGS_TOGGLE,function(e,t){return ky(e,t,Ny)}),ly),xy=Object(ue.a)({},Ty,(uy={},Object(Nt.a)(uy,Zh.COLLAPSE_ALL,function(){return Jt(vy,"collapse-all")}),Object(Nt.a)(uy,Zh.COLLAPSE_ONE,function(){return Jt(vy,"collapse-one")}),Object(Nt.a)(uy,Zh.DETAIL_LOG_ITEM_TOGGLE,function(e,t){var r=jy(e,t),n=t.payload;if(r&&n&&"logItem"in n){var a=n.logItem,o=Boolean(r.logs.openedItems.has(a));Jt(yy,yp(o))}}),Object(Nt.a)(uy,Zh.EXPAND_ALL,function(){return Jt(vy,"expand-all")}),Object(Nt.a)(uy,Zh.EXPAND_ONE,function(){return Jt(vy,"expand-one")}),Object(Nt.a)(uy,Zh.SET_SPAN_NAME_COLUMN_WIDTH,function(e,t){var r=t.payload;return r&&Jt(my,"resize",Math.round(1e3*r.width))}),uy)),Ry=Object(ue.a)({},xy,is);var _y=Yt?function(e){return function(t){return function(r){var n=r.type;return"function"===typeof Ry[n]&&Ry[n](e,r),t(r)}}}:void 0,Iy=function(e){return function(t){return function(r){return"@@redux-form/CHANGE"===r.type&&"searchSideBar"===r.meta.form&&"service"===r.meta.field&&"-"!==r.payload&&(e.dispatch(Gr(r.payload)),e.dispatch(Object(py.a)("searchSideBar","operation","all"))),t(r)}}},Py=function(e){return function(t){return function(r){if(r.type===String(Hr)){var n=ze(r.meta.query);e.dispatch(Object(k.b)(n))}return t(r)}}},Cy=Object(dy.a)();var My=function(){var e=bt("scripts");e&&e.forEach(function(e){if("inline"===e.type){var t=document.createTextNode(e.text),r=document.createElement("script");r.append(t),document.body.appendChild(r)}})};r(1419),r(1421),r(1423);function Vy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(v.a)(this,r)}}var Ly=b()(),Ay=function(e){Object(m.a)(r,e);var t=Vy(r);function r(e){var n,a;return Object(p.a)(this,r),(n=t.call(this,e)).store=(a=Ly,Object(ar.e)(Object(ar.c)(Object(ue.a)({},fy,{archive:yd,traceDiff:zu,traceTimeline:am,router:k.d})),Object(ar.d)(ar.a.apply(void 0,Object(Re.a)(Object.keys(o).map(function(e){return o[e]}).filter(Boolean)).concat([Object(k.c)(a)])),function(e){return e}))),Pr.apiRoot=Rr,My(),n}return Object(h.a)(r,[{key:"render",value:function(){return s.a.createElement(E.a,{store:this.store},s.a.createElement(k.a,{history:Ly},s.a.createElement(tr,null,s.a.createElement(O.a,null,s.a.createElement(w.a,{path:Ge,component:of}),s.a.createElement(w.a,{path:Ke,component:ad}),s.a.createElement(w.a,{path:X,component:hg}),s.a.createElement(w.a,{path:ie,component:rn}),s.a.createElement(w.a,{path:be,component:hc}),s.a.createElement(w.a,{path:Ne,component:Rc}),s.a.createElement(w.a,{path:Ye,component:Yg}),s.a.createElement(j.a,{exact:!0,path:"/",to:Ge}),s.a.createElement(j.a,{exact:!0,path:_(),to:Ge}),s.a.createElement(j.a,{exact:!0,path:_("/"),to:Ge}),s.a.createElement(w.a,{component:I})))))}}]),r}(c.Component);r(1425),r(1427),r(1429),r(1431),r(1433),r(1435);Zt?Zt.context(function(){f.a.render(s.a.createElement(l.a,null,s.a.createElement(Ay,null)),d.document.getElementById("jaeger-ui-root"))}):f.a.render(s.a.createElement(l.a,null,s.a.createElement(Ay,null)),d.document.getElementById("jaeger-ui-root"))},149:function(e,t,r){"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ELayoutPhase=t.ELayerType=void 0,t.ELayoutPhase=n,function(e){e.NoData="NoData",e.CalcSizes="CalcSizes",e.CalcPositions="CalcPositions",e.CalcEdges="CalcEdges",e.Done="Done"}(n||(t.ELayoutPhase=n={})),t.ELayerType=a,function(e){e.Html="html",e.Svg="svg"}(a||(t.ELayerType=a={}))},250:function(e,t,r){"use strict";var n=r(288),a=r(44),o=r(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"zoomIdentity",{enumerable:!0,get:function(){return c.zoomIdentity}});var i=r(15),c=r(513),s=r(963),l=function(){function e(t){var r=this;a(this,e),this.elem=null,this.contentSize=null,this.selection=null,this.updateCallback=void 0,this.zoom=void 0,this.currentTransform=c.zoomIdentity,this.resetZoom=function(){var e=r.elem,t=r.selection,n=r.contentSize;if(e&&t&&n){var a=e.clientHeight,o=e.clientWidth;r.currentTransform=(0,s.fitWithinContainer)(n.width,n.height,o,a),r.zoom.transform(t,r.currentTransform),r.updateCallback(r.currentTransform)}else r.updateCallback(c.zoomIdentity)},this.onZoomed=function(){r.elem&&(r.currentTransform=(0,c.zoomTransform)(r.elem),r.updateCallback(r.currentTransform))},this.constrainZoom=function(e,t){if(!r.contentSize)return e;var a=r.contentSize,o=a.height,i=a.width,c=n(t,2),l=n(c[1],2),u=l[0],f=l[1];return(0,s.constrainZoom)(e,i,o,u,f)},this.updateCallback=t,this.zoom=(0,c.zoom)().scaleExtent(s.DEFAULT_SCALE_EXTENT).constrain(this.constrainZoom).on("zoom",this.onZoomed)}return o(e,[{key:"setElement",value:function(e){e!==this.elem&&(this.elem=e,this.selection=(0,i.select)(e),this.selection.call(this.zoom),this.setExtent(),this.resetZoom())}},{key:"setContentSize",value:function(e){this.contentSize&&this.contentSize.height===e.height&&this.contentSize.width===e.width||(this.contentSize=e),this.setExtent(),this.resetZoom()}},{key:"getProps",value:function(){var e=this.currentTransform,t=e.x,r=e.y,n=e.k,a=this.contentSize||{},o=a.height,i=void 0===o?1:o,c=a.width,s=void 0===c?1:c,l=this.elem||{},u=l.clientHeight,f=void 0===u?1:u,d=l.clientWidth;return{contentHeight:i,contentWidth:s,k:n,viewportHeight:f,viewportWidth:void 0===d?1:d,x:t,y:r,viewAll:this.resetZoom}}},{key:"setExtent",value:function(){var e=this.elem,t=this.contentSize;if(e&&t){var r=e.clientHeight,n=e.clientWidth,a=(0,s.getScaleExtent)(t.width,t.height,n,r);this.zoom.scaleExtent(a)}}}],[{key:"getZoomAttr",value:function(e){return(0,s.getZoomAttr)(e)}},{key:"getZoomStyle",value:function(e){return(0,s.getZoomStyle)(e)}}]),e}();t.default=l},251:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=p(r(966)),f=r(94),d=p(r(250));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var m={left:0,minHeight:"100%",minWidth:"100%",position:"absolute",top:0},v=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.classNamePart,n=e.getClassName,a=e.defs,o=e.extraWrapper,i=e.graphState,c=e.setOnContainer,s=e.standalone,p=e.topLayer,h=(0,f.assignMergeCss)({className:n(r)},(0,f.getProps)(c,i)),v=l.createElement("g",h,a&&l.createElement("defs",null,a.map(function(e){return l.createElement(u.default,Object.assign({key:e.localId},e,{getClassName:n,graphState:i}))})),t);if(o&&(v=l.createElement("g",o,v)),!s&&!p)return v;var g=i.zoomTransform;return l.createElement("svg",{className:n("SvgLayer"),style:m},l.createElement("g",{className:n("SvgLayer--transformer"),transform:d.default.getZoomAttr(g)},v))}}]),r}(l.PureComponent);t.default=v},333:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(94),d=(l=r(250))&&l.__esModule?l:{default:l};function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h={left:0,position:"absolute",top:0},m=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.classNamePart,n=e.getClassName,a=e.graphState,o=e.setOnContainer,i=e.standalone,c=e.topLayer,s=a.zoomTransform,l={style:c||i?d.default.getZoomStyle(s):{}},p=(0,f.assignMergeCss)({className:n(r),style:h},l,(0,f.getProps)(o,a));return u.createElement("div",p,t)}}]),r}(u.PureComponent);t.default=m},334:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=h(r(333)),f=h(r(967)),d=h(r(251)),p=r(149);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var v=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props.renderNode,t=this.props.graphState,r=t.layoutVertices,n=t.renderUtils;if(!r||!e)return null;var a=this.props,o=a.getClassName,i=a.layerType,c=a.setOnNode,s=i===p.ELayerType.Html?u.default:d.default;return l.createElement(s,Object.assign({},this.props,{classNamePart:"NodesLayer"}),l.createElement(f.default,{getClassName:o,layerType:i,layoutVertices:r,renderNode:e,renderUtils:n,setOnNode:c}))}}]),r}(l.PureComponent);t.default=v},348:function(e,t,r){"use strict";(function(e){var r=document.querySelector("base");if(!r)throw new Error("<base> element not found");var n=r?r.href:"".concat(e.location.origin,"/");window.__webpack_public_path__=n,t.a=n}).call(this,r(62))},353:function(e,t,r){"use strict";function n(){var e=new Map;return function(t,r){var n=e.get(t);return n||(e.set(t,r),r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.makeCacheScope=n;var a=Object.assign(n(),{makeScope:n});t.default=a},469:function(e,t,r){"use strict";var n=r(104),a=r(44),o=r(45),i=r(53),c=r(54),s=r(51);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),p=g(r(333)),h=g(r(964)),m=g(r(251)),v=r(149);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function b(e){for(var t=[],r=0;r<e;r++)t.push(d.createRef());return t}var E=function(e){i(r,e);var t=f(r);function r(e){var n;a(this,r),n=t.call(this,e);var o=e.graphState.vertices;return n.state={vertices:o,nodeRefs:b(o.length)},n}return o(r,[{key:"componentDidMount",value:function(){this.measureNodes()}},{key:"componentDidUpdate",value:function(){this.measureNodes()}},{key:"measureNodes",value:function(){var e=this.props.graphState,t=e.layoutPhase,r=e.vertices;if(t===v.ELayoutPhase.CalcSizes){var n=this.state.nodeRefs;if(n){for(var a=this.props,o=a.layerType,i=a.measureNode,c=a.senderKey,s=a.setSizeVertices,l=null,f=i&&{layerType:o,getWrapper:function(){if(l)return l.getRef();throw new Error("Invalid scenario")},getWrapperSize:function(){if(l)return l.measure();throw new Error("Invalid scenario")}},d=[],p=0;p<n.length;p++){l=n[p].current;var h=r[p];l&&d.push(u({vertex:h},i&&f?i(h,f):l.measure()))}s(c,d)}}}},{key:"render",value:function(){var e=this.state.nodeRefs;if(e){var t=this.props,r=t.getClassName,n=t.graphState,a=n.layoutVertices,o=n.renderUtils,i=n.vertices,c=t.layerType,s=t.renderNode,l=t.setOnNode,u=c===v.ELayerType.Html?p.default:m.default;return d.createElement(u,Object.assign({classNamePart:"MeasurableNodesLayer"},this.props),d.createElement(h.default,{nodeRefs:e,getClassName:r,layerType:c,renderNode:s,renderUtils:o,vertices:i,layoutVertices:a,setOnNode:l}))}return null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.graphState.vertices;return r===t.vertices?null:{vertices:r,nodeRefs:b(r.length)}}}]),r}(d.PureComponent);t.default=E},470:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=d(r(970)),f=d(r(251));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h={stroke:"#000"},m=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.graphState,n=e.markerEndId,a=e.markerStartId,o=e.setOnEdge,i=r.layoutEdges,c=r.renderUtils;return i?l.createElement(f.default,Object.assign({},this.props,{classNamePart:"SvgEdgesLayer",extraWrapper:h}),l.createElement(u.default,{getClassName:t,layoutEdges:i,markerEndId:n,markerStartId:a,renderUtils:c,setOnEdge:o})):null}}]),r}(l.PureComponent);t.default=m},471:function(e,t,r){"use strict";var n=r(104);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.MiniMap=f,t.default=void 0;var i,c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),s=(i=r(973))&&i.__esModule?i:{default:i};function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var u=80;function f(e){var t=function(e){var t=e.className,r=e.classNamePrefix,n="".concat(r||"plexus","-MiniMap");return{root:"".concat(n," ").concat(t||""),item:"".concat(n,"--item"),map:"".concat(n,"--map"),mapActive:"".concat(n,"--mapActive"),button:"".concat(n,"--button")}}(e),r=function(e){var t=e.contentHeight,r=e.contentWidth;return t>r?{height:u,width:u*r/t}:{height:u*t/r,width:u}}(e),n=function(e,t){var r=e.contentHeight,n=e.contentWidth,a=e.viewportHeight,o=e.viewportWidth,i=e.k,c=void 0===i?1:i,s=e.x,l=void 0===s?1:s,u=e.y,f=void 0===u?1:u,d=t.height,p=t.width,h=r*c,m=n*c,v=Math.max(-l/m,0),g=Math.min((-l+o)/m,1),y=Math.max(-f/h,0),b=Math.min((-f+a)/h,1);return{transform:"\n      translate(".concat((v*p).toFixed(2),"px, ").concat((y*d).toFixed(2),"px)\n      scale(").concat(g-v,", ").concat(b-y,")\n    "),transformOrigin:"0 0"}}(e,r);return c.createElement("div",{className:t.root},c.createElement("div",{className:"".concat(t.item," ").concat(t.map),style:r},c.createElement("div",{className:t.mapActive,style:o(o({},n),r)})),c.createElement("div",{className:"".concat(t.item," ").concat(t.button),onClick:e.viewAll,role:"button"},s.default))}f.defaultProps={className:"",classNamePrefix:"plexus"};var d=c.memo(f);t.default=d},472:function(e,t,r){"use strict";var n,a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.EWorkerPhase=t.EWorkerErrorType=t.ECoordinatorPhase=void 0,t.EWorkerErrorType=n,function(e){e.Error="Error",e.LayoutError="LayoutError"}(n||(t.EWorkerErrorType=n={})),t.ECoordinatorPhase=a,function(e){e.Done="Done",e.DotOnly="DotOnly",e.Edges="Edges",e.NotStarted="NotStarted",e.Positions="Positions"}(a||(t.ECoordinatorPhase=a={})),t.EWorkerPhase=o,function(e){e[e.DotOnly=a.DotOnly]="DotOnly",e[e.Edges=a.Edges]="Edges",e[e.Positions=a.Positions]="Positions"}(o||(t.EWorkerPhase=o={}))},556:function(e,t,r){e.exports=r.p+"static/media/jaeger-logo.a7093b12.svg"},574:function(e,t,r){e.exports=r.p+"static/media/monitor.c9164c96.png"},602:function(e,t,r){e.exports=r(1437)},617:function(e,t,r){},669:function(e,t,r){},769:function(e){e.exports={private:!0,name:"jaeger-ui",version:"1.27.2",main:"src/index.js",license:"Apache-2.0",homepage:".",workspaces:{nohoist:["customize-cra","customize-cra/**","react-scripts","react-scripts/**","react-app-rewired","react-app-rewired/**"]},repository:{type:"git",url:"https://github.com/jaegertracing/jaeger-ui.git",directory:"packages/jaeger-ui"},devDependencies:{"@types/match-sorter":"^2.3.0","@types/react-window":"^1.8.0","babel-plugin-import":"1.13.5",bluebird:"^3.5.0","customize-cra":"0.2.9",enzyme:"^3.8.0","enzyme-adapter-react-16":"^1.2.0","enzyme-to-json":"^3.3.0","http-proxy-middleware":"^2.0.6","jest-junit":"^14.0.1",less:"3.13.1","less-loader":"4.1.0","less-vars-to-js":"^1.2.1","react-app-rewired":"2.2.1","react-scripts":"2.1.3","react-test-renderer":"^16.14.0",sinon:"7.3.2","source-map-explorer":"^2.5.3"},dependencies:{"@jaegertracing/plexus":"0.2.0","@pyroscope/flamegraph":"0.21.4","@types/classnames":"^2.2.7","@types/deep-freeze":"^0.1.1","@types/history":"^4.7.2","@types/lodash":"^4.14.123","@types/memoize-one":"5.1.2","@types/moment":"^2.13.0","@types/object-hash":"^2.2.1","@types/react-copy-to-clipboard":"^5.0.4","@types/react-helmet":"^6.1.5","@types/react-icons":"2.2.7","@types/react-redux":"^5.0.6","@types/react-router-dom":"^4.3.1","@types/react-virtualized-select":"^3.0.7","@types/recompose":"^0.30.5","@types/redux-actions":"2.2.1",antd:"3.8.0",chance:"^1.0.10",classnames:"^2.2.5",combokeys:"^3.0.0","copy-to-clipboard":"^3.1.0",cytoscape:"^3.2.1","cytoscape-dagre":"^2.0.0","d3-scale":"^1.0.6",dagre:"^0.8.5","deep-freeze":"^0.0.1",drange:"^2.0.0",fuzzy:"^0.1.3",global:"^4.3.2",history:"^4.6.3","is-promise":"^4.0.0","isomorphic-fetch":"^3.0.0","json-markup":"^1.1.0",lodash:"^4.17.19",logfmt:"^1.2.0","lru-memoize":"^1.1.0","match-sorter":"^3.1.1","memoize-one":"^6.0.0",moment:"^2.18.1","object-hash":"^3.0.0","prop-types":"^15.5.10","query-string":"^6.3.0","raven-js":"^3.22.1",react:"^16.3.2","react-circular-progressbar":"^2.0.3","react-dimensions":"^1.3.0","react-dom":"^16.3.2","react-ga":"^3.3.1","react-helmet":"^6.1.0","react-icons":"2.2.7","react-metrics":"^2.3.2","react-redux":"^5.0.6","react-router-dom":"4.3.1","react-router-redux":"5.0.0-alpha.8","react-virtualized-select":"^3.1.0","react-vis":"^1.7.2","react-vis-force":"^0.3.1","react-window":"^1.8.3",recompose:"^0.30.0",redux:"^3.7.2","redux-actions":"^2.2.1","redux-async-middleware":"^0.0.0","redux-form":"^8.3.8","redux-promise-middleware":"^4.3.0",reselect:"^4.1.6",store:"^2.0.12","ts-key-enum":"^2.0.0","tween-functions":"^1.2.0",typescript:"3.5.3","u-basscss":"2.0.1"},scripts:{analyze:"source-map-explorer build/static/js/main.*",build:"REACT_APP_VSN_STATE=$(../../scripts/get-tracking-version.js) react-app-rewired build",coverage:"yarn run test --coverage","start:ga-debug":"REACT_APP_GA_DEBUG=1 REACT_APP_VSN_STATE=$(../../scripts/get-tracking-version.js) react-app-rewired start",start:"react-app-rewired start","test-dev":"react-app-rewired test --env=jsdom",test:"CI=1 react-app-rewired test --env=jsdom --color"},jest:{globalSetup:"./jest.global-setup.js",collectCoverageFrom:["!src/setup*.js","!src/utils/DraggableManager/demo/*.tsx","!src/utils/test/**/*.js","!src/demo/**/*.js","!src/types/*"],reporters:["default","jest-junit"]},browserslist:[">0.5%","not dead","not ie <= 11","not op_mini all"]}},78:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Digraph",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DirectedGraph",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"LayoutManager",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"cacheAs",{enumerable:!0,get:function(){return n.default}}),t.default=void 0;var n=c(r(353)),a=c(r(956)),o=c(r(974)),i=c(r(985));function c(e){return e&&e.__esModule?e:{default:e}}var s={cacheAs:n.default,Digraph:a.default,DirectedGraph:o.default,LayoutManager:i.default};t.default=s},787:function(e,t,r){},939:function(e,t,r){},94:function(e,t,r){"use strict";var n=r(468),a=r(104),o=r(148),i=["className","style"],c=["className","style"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t){var r=e.className,n=e.style,a=o(e,i),s=t.className,u=t.style,f=o(t,c);return s&&(r=r?"".concat(r," ").concat(s):s),u&&"object"===typeof u&&(n=n?l(l({},n),u):u),l(l({className:r,style:n},a),f)}function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(u)}Object.defineProperty(t,"__esModule",{value:!0}),t.assignMergeCss=f,t.getProps=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!e)return{};var o=(Array.isArray(e)?e:[e]).map(function(e){return"function"===typeof e?e.apply(void 0,r)||{}:e});return f.apply(void 0,n(o))},t.getValueScaler=void 0,t.isSamePropSetter=function(e,t){if(Array.isArray(e))return!(!Array.isArray(t)||e.length!==t.length)&&!e.some(function(e,r){return e!==t[r]});return e===t};var d=function(){var e={expAdjuster:.5,factorMax:1,factorMin:0,valueMax:1,valueMin:.3};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=l(l({},e),t),n=r.expAdjuster,a=r.factorMax,o=r.factorMin,i=r.valueMax,c=r.valueMin;return function(e){return e>=a?i:e<=o?c:c+Math.pow((e-o)/(a-o),n)*(i-c)}}}();t.getValueScaler=d},942:function(e,t,r){},956:function(e,t,r){"use strict";var n=r(104),a=r(148),o=r(44),i=r(45),c=r(53),s=r(54),l=r(51),u=["sizeVertices"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=T(r(0)),m=S(r(32)),v=S(r(959)),g=S(r(469)),y=S(r(334)),b=r(969),E=S(r(470)),O=S(r(972)),w=r(149),j=r(94),k=S(r(471)),N=T(r(250));function S(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var x={height:"100%",overflow:"hidden",position:"relative",width:"100%"},R={position:"relative"},_=0,I=function(e){c(r,e);var t=p(r);function r(e){var n;o(this,r),(n=t.call(this,e)).renderUtils=void 0,n.state={edges:[],layoutEdges:null,layoutGraph:null,layoutPhase:w.ELayoutPhase.NoData,layoutVertices:null,sizeVertices:null,vertices:[],zoomTransform:N.zoomIdentity},n.baseId="plexus--Digraph--".concat(_++),n.makeClassNameFactory=(0,m.default)(function(e){return function(t){return"".concat(e," ").concat(e,"-Digraph--").concat(t)}}),n.rootRef=h.createRef(),n.zoomManager=null,n.getGlobalId=function(e){return"".concat(n.baseId,"--").concat(e)},n.getZoomTransform=function(){return n.state.zoomTransform},n.setSizeVertices=function(e,t){var r=n.props,a=r.edges,o=r.layoutManager,i=r.measurableNodesKey;if(e!==i){var c="expected ".concat(JSON.stringify(i),", recieved ").concat(JSON.stringify(e));throw new Error("Key mismatch for measuring nodes; ".concat(c))}n.setState({sizeVertices:t}),o.getLayout(a,t).layout.then(n.onLayoutDone),n.setState({sizeVertices:t,layoutPhase:w.ELayoutPhase.CalcPositions})},n.onZoomUpdated=function(e){n.setState({zoomTransform:e})},n.onLayoutDone=function(e){if(!e.isCancelled){var t=e.edges,r=e.graph,a=e.vertices;n.setState({layoutEdges:t,layoutGraph:r,layoutVertices:a,layoutPhase:w.ELayoutPhase.Done}),n.zoomManager&&n.zoomManager.setContentSize(r)}};var a=e.edges,i=e.vertices,c=e.zoom;return Array.isArray(a)&&a.length&&Array.isArray(i)&&i.length&&(n.state.layoutPhase=w.ELayoutPhase.CalcSizes,n.state.edges=a,n.state.vertices=i),c&&(n.zoomManager=new N.default(n.onZoomUpdated)),n.renderUtils={getGlobalId:n.getGlobalId,getZoomTransform:n.getZoomTransform},n}return i(r,[{key:"componentDidMount",value:function(){var e=this.rootRef.current;e&&this.zoomManager&&this.zoomManager.setElement(e)}},{key:"renderLayers",value:function(){var e=this,t=this.props,r=t.classNamePrefix,n=t.layers,o=this.makeClassNameFactory(r||""),i=this.state,c=(i.sizeVertices,d(d({},a(i,u)),{},{renderUtils:this.renderUtils})),s=c.layoutPhase;return n.map(function(t){var r=t.layerType,n=t.key,a=t.setOnContainer;if(t.layers){if(t.layerType===w.ELayerType.Html)return h.createElement(v.default,{key:n,graphState:c,layers:t.layers,getClassName:o,setOnContainer:a,setSizeVertices:e.setSizeVertices});if(t.layerType===w.ELayerType.Svg)return h.createElement(O.default,{key:n,getClassName:o,defs:t.defs,graphState:c,layers:t.layers,setOnContainer:a})}if(t.edges){var i=t.defs,l=t.markerEndId,u=t.markerStartId,f=t.setOnEdge;return s===w.ELayoutPhase.Done?h.createElement(E.default,{key:n,standalone:!0,getClassName:o,defs:i,graphState:c,markerEndId:l,markerStartId:u,setOnContainer:a,setOnEdge:f}):null}if(t.measurable){var d=t.measureNode,p=t.renderNode,m=t.setOnNode;return h.createElement(g.default,{key:n,standalone:!0,getClassName:o,graphState:c,layerType:r,measureNode:d,renderNode:p,senderKey:n,setOnContainer:a,setOnNode:m,setSizeVertices:e.setSizeVertices})}var b=t.renderNode;if(void 0!==b)return h.createElement(y.default,{key:n,standalone:!0,getClassName:o,graphState:c,layerType:t.layerType,renderNode:b,setOnContainer:a,setOnNode:t.setOnNode});throw new Error("Unrecognized layer")})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.classNamePrefix,n=e.minimap,a=e.minimapClassName,o=e.setOnGraph,i=e.style,c=this.zoomManager?x:R,s=(0,j.assignMergeCss)({style:c,className:"".concat(r," ").concat(r,"-Digraph")},{className:t,style:i},(0,j.getProps)(o,d(d({},this.state),{},{renderUtils:this.renderUtils})));return h.createElement("div",s,h.createElement("div",{style:c,ref:this.rootRef},this.renderLayers()),n&&this.zoomManager&&h.createElement(k.default,Object.assign({className:a,classNamePrefix:r},this.zoomManager.getProps())))}}]),r}(h.PureComponent);t.default=I,I.propsFactories={classNameIsSmall:b.classNameIsSmall,scaleOpacity:b.scaleProperty.opacity,scaleStrokeOpacity:b.scaleProperty.strokeOpacity,scaleStrokeOpacityStrong:b.scaleProperty.strokeOpacityStrong,scaleStrokeOpacityStrongest:b.scaleProperty.strokeOpacityStrongest},I.scaleProperty=b.scaleProperty,I.defaultProps={className:"",classNamePrefix:"plexus",minimap:!1,minimapClassName:"",zoom:!1}},959:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=h(r(333)),f=h(r(469)),d=h(r(334)),p=r(149);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var v=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"renderLayers",value:function(){var e=this.props,t=e.getClassName,r=e.layers,n=e.graphState,a=e.setSizeVertices;return r.map(function(e){var r=e.key,o=e.setOnContainer;if(e.measurable){var i=e.renderNode,c=e.setOnNode;return l.createElement(f.default,{key:r,getClassName:t,graphState:n,layerType:p.ELayerType.Html,renderNode:i,senderKey:r,setOnContainer:o,setOnNode:c,setSizeVertices:a})}if(e.renderNode){var s=e.renderNode,u=e.setOnNode;return l.createElement(d.default,{key:r,getClassName:t,graphState:n,layerType:p.ELayerType.Html,renderNode:s,setOnContainer:o,setOnNode:u})}throw new Error("Not implemented")})}},{key:"render",value:function(){return l.createElement(u.default,Object.assign({topLayer:!0,classNamePart:"HtmlLayersGroup"},this.props),this.renderLayers())}}]),r}(l.PureComponent);t.default=v},963:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCALE_EXTENT=void 0,t.constrainZoom=function(e,t,r,a,o){var i=e.k,c=e.x,s=e.y,f=u(t,r,a,o),d=Math.max(i,f),p=l(-t*d+.5*a,.5*a,c),h=l(-r*d+.5*o,.5*o,s);if(d!==i||p!==c||h!==s)return n.zoomIdentity.translate(p,h).scale(d);return e},t.fitWithinContainer=function(e,t,r,a){var o=u(e,t,r,a),i=(r-o*e)/2,c=(a-o*t)/2;return n.zoomIdentity.translate(i,c).scale(o)},t.getScaleExtent=function(e,t,r,n){return[u(e,t,r,n),a]},t.getZoomAttr=function(e){if(!e)return;var t=e.x,r=e.y,n=e.k;return"translate(".concat(t.toFixed(),",").concat(r.toFixed(),") scale(").concat(n,")")},t.getZoomStyle=function(e){if(null==e)return c;var t=e.x,r=e.y,n=e.k;return{transform:"translate(".concat(t.toFixed(),"px, ").concat(r.toFixed(),"px) scale(").concat(n,")"),transformOrigin:"0 0"}};var n=r(513),a=1,o=.03,i=.05,c=Object.freeze({transform:"translate(0px, 0px) scale(1)",transformOrigin:"0 0"}),s=[o,a];function l(e,t,r){return r<e?e:r>t?t:r}function u(e,t,r,n){return Math.max(o,Math.min((1-i)*r/e,(1-i)*n/t,a))}t.DEFAULT_SCALE_EXTENT=s},964:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(965))&&l.__esModule?l:{default:l},d=r(94);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props;return t.renderNode!==e.renderNode||t.getClassName!==e.getClassName||t.layerType!==e.layerType||t.layoutVertices!==e.layoutVertices||t.nodeRefs!==e.nodeRefs||t.renderUtils!==e.renderUtils||t.vertices!==e.vertices||!(0,d.isSamePropSetter)(t.setOnNode,e.setOnNode)}},{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.nodeRefs,n=e.layoutVertices,a=e.renderUtils,o=e.vertices,i=e.layerType,c=e.renderNode,s=e.setOnNode;return o.map(function(e,o){return u.createElement(f.default,{key:e.key,getClassName:t,ref:r[o],hidden:!n,layerType:i,renderNode:c,renderUtils:a,vertex:e,layoutVertex:n&&n[o],setOnNode:s})})}}]),r}(u.Component);t.default=h},965:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(149),f=r(94);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p={visibility:"hidden"},h=function(e){o(r,e);var t=s(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments)).htmlRef=l.createRef(),e.svgRef=l.createRef(),e}return a(r,[{key:"measureHtml",value:function(){var e=this.htmlRef.current;return e?{height:e.offsetHeight,width:e.offsetWidth}:{height:0,width:0}}},{key:"measureSvg",value:function(){var e=this.svgRef.current;if(!e)return{height:0,width:0};var t=e.getBBox();return{height:t.height,width:t.width}}},{key:"renderHtml",value:function(){var e=this.props,t=e.getClassName,r=e.hidden,n=e.renderNode,a=e.renderUtils,o=e.setOnNode,i=e.vertex,c=e.layoutVertex,s=c||{},u=s.height,d=void 0===u?null:u,p=s.left,h=void 0===p?null:p,m=s.top,v=void 0===m?null:m,g=s.width,y=void 0===g?null:g,b=(0,f.assignMergeCss)({className:t("MeasurableHtmlNode"),style:{height:d,width:y,boxSizing:"border-box",position:"absolute",transform:null==h||null==v?void 0:"translate(".concat(h.toFixed(),"px,").concat(v.toFixed(),"px)"),visibility:r?"hidden":void 0}},(0,f.getProps)(o,i,a,c));return l.createElement("div",Object.assign({ref:this.htmlRef},b),n(i,a,c))}},{key:"renderSvg",value:function(){var e=this.props,t=e.getClassName,r=e.hidden,n=e.renderNode,a=e.renderUtils,o=e.setOnNode,i=e.vertex,c=e.layoutVertex,s=c||{},u=s.left,d=void 0===u?null:u,h=s.top,m=void 0===h?null:h,v=(0,f.assignMergeCss)({className:t("MeasurableSvgNode"),transform:null==d||null==m?void 0:"translate(".concat(d.toFixed(),", ").concat(m.toFixed(),")"),style:r?p:null},(0,f.getProps)(o,i,a,c));return l.createElement("g",Object.assign({ref:this.svgRef},v),n(i,a,c))}},{key:"getRef",value:function(){return this.props.layerType===u.ELayerType.Html?{htmlWrapper:this.htmlRef.current,svgWrapper:void 0}:{svgWrapper:this.svgRef.current,htmlWrapper:void 0}}},{key:"measure",value:function(){return this.props.layerType===u.ELayerType.Html?this.measureHtml():this.measureSvg()}},{key:"render",value:function(){return this.props.layerType===u.ELayerType.Html?this.renderHtml():this.renderSvg()}}]),r}(l.PureComponent);t.default=h},966:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(94);function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,u.getValueScaler)({factorMax:1,factorMin:.1,valueMax:2,valueMin:6});function p(e,t,r){var n=d(e.zoomTransform.k);return l.createElement("marker",Object.assign({id:r,markerHeight:8*n,markerUnits:"userSpaceOnUse",markerWidth:8*n,orient:"auto",refX:8*n,refY:3*n},t),l.createElement("path",{d:"M0,0 L0,".concat(6*n," L").concat(9*n,",").concat(3*n," z")}))}var h=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.localId,n=e.graphState,a=e.renderEntry,o=void 0===a?p:a,i=e.setOnEntry,c=n.renderUtils.getGlobalId(r);return o(n,(0,u.assignMergeCss)({className:t("DefEntry")},(0,u.getProps)(i,n)),c)}}]),r}(l.PureComponent);t.default=h},967:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(968))&&l.__esModule?l:{default:l},d=r(94);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props;return t.renderNode!==e.renderNode||t.getClassName!==e.getClassName||t.layerType!==e.layerType||t.layoutVertices!==e.layoutVertices||t.renderUtils!==e.renderUtils||!(0,d.isSamePropSetter)(t.setOnNode,e.setOnNode)}},{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.layoutVertices,n=e.renderUtils,a=e.layerType,o=e.renderNode,i=e.setOnNode;return r.map(function(e){return u.createElement(f.default,{key:e.vertex.key,getClassName:t,layerType:a,layoutVertex:e,renderNode:o,renderUtils:n,setOnNode:i})})}}]),r}(u.Component);t.default=h},968:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=r(149),f=r(94);function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e){var t=e.height,r=e.left,n=e.top;return{height:t,width:e.width,position:"absolute",transform:null==r||null==n?void 0:"translate(".concat(r.toFixed(),"px,").concat(n.toFixed(),"px)")}}var h=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.layerType,n=e.renderNode,a=e.renderUtils,o=e.setOnNode,i=e.layoutVertex,c=n(i,a);if(!c)return null;var s=i.left,d=i.top,h=(0,f.assignMergeCss)({className:t("Node"),style:r===u.ELayerType.Html?p(i):null,transform:r===u.ELayerType.Svg?"translate(".concat(s.toFixed(),",").concat(d.toFixed(),")"):null},(0,f.getProps)(o,i,a)),m=r===u.ELayerType.Html?"div":"g";return l.createElement(m,h,c)}}]),r}(l.PureComponent);t.default=h},969:function(e,t,r){"use strict";var n=r(104);Object.defineProperty(t,"__esModule",{value:!0}),t.scaleProperty=t.classNameIsSmall=void 0;var a=r(94),o=function(){var e=.29;return function(t){var r=(t.zoomTransform||{}).k;return(void 0===r?1:r)<=e?{className:"is-small"}:null}}();t.classNameIsSmall=o;var i=function(){var e=1,t=.3,r=.5;function o(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,l={style:n({},o,c)},u="scale_".concat(o),f=(0,a.getValueScaler)({valueMax:c,valueMin:i,expAdjuster:s});return n({},u,function(e){var t=e.zoomTransform;if(!t)return l;var r=f(t.k);return{style:n({},o,r)}})[u]}return o.opacity=o("opacity"),o.strokeOpacity=o("strokeOpacity"),o.strokeOpacityStrong=o("strokeOpacity",t,e,.75),o.strokeOpacityStrongest=o("strokeOpacity",t,e,1),o}();t.scaleProperty=i},970:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(971))&&l.__esModule?l:{default:l},d=r(94);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"shouldComponentUpdate",value:function(e){var t=this.props;return t.getClassName!==e.getClassName||t.layoutEdges!==e.layoutEdges||t.markerEndId!==e.markerEndId||t.markerStartId!==e.markerStartId||t.renderUtils!==e.renderUtils||!(0,d.isSamePropSetter)(t.setOnEdge,e.setOnEdge)}},{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.layoutEdges,n=e.markerEndId,a=e.markerStartId,o=e.renderUtils,i=e.setOnEdge;return r.map(function(e){return u.createElement(f.default,{key:"".concat(e.edge.from,"\v").concat(e.edge.to),getClassName:t,layoutEdge:e,markerEndId:n,markerStartId:a,renderUtils:o,setOnEdge:i})})}}]),r}(u.Component);t.default=h},971:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(32))&&l.__esModule?l:{default:l},d=r(94);function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e,t){return t?"url(#".concat(e.getGlobalId(t),")"):t}var m=["M","C"];function v(e){for(var t=[],r=m.length,n=0;n<e.length;n++){var a=e[n];n<r&&t.push(m[n]),t.push(a[0],a[1])}return t.join(" ")}var g=function(e){o(r,e);var t=s(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments)).makePathD=(0,f.default)(v),e}return a(r,[{key:"render",value:function(){var e=this.props,t=e.getClassName,r=e.layoutEdge,n=e.markerEndId,a=e.markerStartId,o=e.renderUtils,i=e.setOnEdge,c=v(r.pathPoints),s=h(o,n),l=h(o,a),f=(0,d.assignMergeCss)({className:t("SvgEdge")},(0,d.getProps)(i,r,o));return u.createElement("path",Object.assign({d:c,fill:"none",vectorEffect:"non-scaling-stroke",markerEnd:s,markerStart:l},f))}}]),r}(u.PureComponent);t.default=g},972:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),u=h(r(334)),f=h(r(470)),d=h(r(251)),p=r(149);function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var v=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"renderLayers",value:function(){var e=this.props,t=e.getClassName,r=e.layers,n=e.graphState;return r.map(function(e){var r=e.key,a=e.setOnContainer;if(e.edges)return l.createElement(f.default,{key:r,getClassName:t,graphState:n,markerEndId:e.markerEndId,markerStartId:e.markerStartId,setOnContainer:a,setOnEdge:e.setOnEdge});if(e.measurable)throw new Error("Not implemented");return l.createElement(u.default,{key:r,getClassName:t,graphState:n,layerType:p.ELayerType.Svg,renderNode:e.renderNode,setOnContainer:a,setOnNode:e.setOnNode})})}},{key:"render",value:function(){return l.createElement(d.default,Object.assign({topLayer:!0},this.props,{classNamePart:"SvgLayersGroup"}),this.renderLayers())}}]),r}(l.PureComponent);t.default=v},973:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0));function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}var o=n.createElement("svg",{fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:"1em",width:"1em",viewBox:"0 0 40 40"},n.createElement("g",null,n.createElement("path",{d:"m35 25v10h-10l3.8-3.8-4.8-4.8 2.4-2.4 4.8 4.8z m-20 10h-10v-10l3.8 3.8 4.8-4.8 2.4 2.4-4.8 4.8z m-10-20v-10h10l-3.8 3.8 4.8 4.8-2.4 2.4-4.8-4.8z m20-10h10v10l-3.8-3.8-4.8 4.8-2.4-2.4 4.8-4.8z"})));t.default=o},974:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=((n=r(975))&&n.__esModule?n:{default:n}).default;t.default=a},975:function(e,t,r){"use strict";var n=r(104),a=r(44),o=r(45),i=r(53),c=r(54),s=r(51);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=k(r(0)),p=w(r(976)),h=w(r(977)),m=w(r(978)),v=w(r(980)),g=w(r(982)),y=k(r(983)),b=w(r(984)),E=w(r(471)),O=k(r(250));function w(e){return e&&e.__esModule?e:{default:e}}function j(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var N=0,S=1,D=3,T=4,x={height:"100%",overflow:"hidden",position:"relative",width:"100%"},R={position:"relative"},_=0;function I(e){for(var t=[],r=0;r<e;r++)t.push(d.createRef());return t}var P=function(e){i(r,e);var t=f(r);function r(e){var n;a(this,r),(n=t.call(this,e)).arrowId=void 0,n.arrowIriRef=void 0,n.rootRef=void 0,n.rootSelection=void 0,n.zoomManager=void 0,n.state={edges:[],layoutPhase:N,sizeVertices:null,layoutEdges:null,layoutGraph:null,layoutVertices:null,vertexRefs:[],vertices:[],zoomEnabled:!1,zoomTransform:O.zoomIdentity},n._onPositionsDone=function(e){if(!e.isCancelled){var t=e.graph,r=e.vertices;n.setState({layoutGraph:t,layoutVertices:r,layoutPhase:D})}},n._onLayoutDone=function(e){var t=n.rootRef.current;if(!e.isCancelled&&t){var r=e.edges,a=e.graph,o=e.vertices;n.setState({layoutEdges:r,layoutGraph:a,layoutVertices:o,layoutPhase:T}),n.zoomManager&&n.zoomManager.setContentSize(a)}},n._onZoomUpdated=function(e){n.setState({zoomTransform:e})};var o=e.edges,i=e.vertices,c=e.zoom;Array.isArray(o)&&o.length&&Array.isArray(i)&&i.length&&(n.state.layoutPhase=S,n.state.edges=o,n.state.vertices=i,n.state.vertexRefs=I(i.length)),n.state.zoomEnabled=c;var s="plexus--DirectedGraph--".concat(_);return _+=1,n.arrowId=p.default.getId(s),n.arrowIriRef=p.default.getIriRef(s),n.rootRef=d.createRef(),n.zoomManager=c?new O.default(n._onZoomUpdated):null,n}return o(r,[{key:"componentDidMount",value:function(){this._setSizeVertices();var e=this.rootRef.current;e&&this.zoomManager&&this.zoomManager.setElement(e)}},{key:"componentDidUpdate",value:function(){this.state.layoutPhase===S&&this._setSizeVertices()}},{key:"_setSizeVertices",value:function(){var e=this.props,t=e.edges,r=e.layoutManager,n=e.vertices,a=[];this.state.vertexRefs.forEach(function(e,t){var r=e.current;r&&a.push({height:r.offsetHeight,vertex:n[t],width:r.offsetWidth})});var o=r.getLayout(t,a),i=o.positions,c=o.layout;i.then(this._onPositionsDone),c.then(this._onLayoutDone),this.setState({sizeVertices:a,layoutPhase:2})}},{key:"_renderVertices",value:function(){var e=this.props,t=e.classNamePrefix,r=e.getNodeLabel,n=e.setOnNode,a=e.vertices,o=this.state,i=o.layoutVertices,c=o.vertexRefs;return d.createElement(v.default,{classNamePrefix:t,getNodeLabel:r||String,layoutVertices:i,setOnNode:n,vertexRefs:c,vertices:a})}},{key:"_renderEdges",value:function(){var e=this.props.setOnEdgePath,t=this.state.layoutEdges;return t&&d.createElement(m.default,{setOnEdgePath:e,layoutEdges:t,arrowIriRef:this.arrowIriRef})}},{key:"render",value:function(){var e=this.props,t=e.arrowScaleDampener,r=e.className,n=e.classNamePrefix,a=e.minimap,o=e.minimapClassName,i=e.setOnEdgesContainer,c=e.setOnNodesContainer,s=e.setOnRoot,l=this.state,f=l.layoutPhase,m=l.layoutGraph,v=l.zoomEnabled,g=l.zoomTransform,b=m||{},w=b.height,j=void 0===w?0:w,k=b.width,N=void 0===k?0:k,S=f===T,D=(0,y.assignMergeCss)(c&&c(this.state)||{},{style:u(u({},v?O.default.getZoomStyle(g):null),{},{position:"absolute",top:0,left:0}),className:"".concat(n,"-DirectedGraph--nodeContainer")}),_=(0,y.assignMergeCss)(i&&i(this.state)||{},{style:{minHeight:"100%",minWidth:"100%"},className:"".concat(n,"-DirectedGraph--nodeContainer")}),I=(0,y.assignMergeCss)(s&&s(this.state)||{},{style:v?x:R,className:"".concat(n,"-DirectedGraph ").concat(r)});return d.createElement("div",Object.assign({},I,{ref:this.rootRef}),m&&S&&d.createElement(h.default,Object.assign({},_,{height:j,width:N}),d.createElement(p.default,{id:this.arrowId,scaleDampener:t,zoomScale:v&&g?g.k:null}),d.createElement("g",{transform:v?O.default.getZoomAttr(g):void 0},this._renderEdges())),d.createElement("div",D,this._renderVertices()),v&&a&&this.zoomManager&&d.createElement(E.default,Object.assign({className:o,classNamePrefix:n},this.zoomManager.getProps())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.edges,n=e.vertices,a=e.zoom,o=t.edges,i=t.vertices;if(a!==t.zoomEnabled)throw new Error("Zoom cannot be toggled");return r===o&&n===i?null:{edges:r,vertices:n,layoutPhase:S,vertexRefs:I(n.length),sizeVertices:null,layoutEdges:null,layoutGraph:null,layoutVertices:null}}}]),r}(d.PureComponent);t.default=P,P.propsFactories={classNameIsSmall:g.default,mergePropSetters:y.default,scaledStrokeWidth:b.default},P.defaultProps={arrowScaleDampener:void 0,className:"",classNamePrefix:"plexus",minimap:!1,minimapClassName:"",zoom:!1}},976:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0));function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var f=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.id,r=e.scaleDampener,n=e.zoomScale,a=void 0===n?null:n,o=null!=a?Math.max(r/a,1):1;return l.createElement("defs",null,l.createElement("marker",{id:t,markerHeight:8*o,markerUnits:"strokeWidth",markerWidth:8*o,orient:"auto",refX:8*o,refY:3*o},l.createElement("path",{d:"M0,0 L0,".concat(6*o," L").concat(9*o,",").concat(3*o," z"),fill:"#000"})))}}],[{key:"getId",value:function(e){return"".concat(e,"--edgeArrow")}},{key:"getIriRef",value:function(e){return"url(#".concat(r.getId(e),")")}}]),r}(l.PureComponent);t.default=f,f.defaultProps={zoomScale:null,scaleDampener:.6}},977:function(e,t,r){"use strict";var n=r(148),a=["children","height","width"];Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,r=e.height,i=e.width,c=n(e,a);return o.createElement("svg",Object.assign({height:r,width:i,xmlns:"http://www.w3.org/2000/svg"},c),t)};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var c=a?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}},978:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(979))&&l.__esModule?l:{default:l};function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"render",value:function(){var e=this.props,t=e.arrowIriRef,r=e.layoutEdges,n=e.setOnEdgePath;return r.map(function(e){return u.createElement(f.default,Object.assign({key:"".concat(e.edge.from,"\v").concat(e.edge.to),pathPoints:e.pathPoints,markerEnd:t},n&&n(e.edge)))})}}]),r}(u.PureComponent);t.default=p},979:function(e,t,r){"use strict";var n=r(148),a=r(44),o=r(45),i=r(53),c=r(54),s=r(51),l=["markerEnd","pathPoints"];function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0));function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=["M","C"],h=function(e){i(r,e);var t=u(r);function r(){return a(this,r),t.apply(this,arguments)}return o(r,[{key:"render",value:function(){var e=this.props,t=e.markerEnd,r=e.pathPoints,a=n(e,l),o=r.map(function(e,t){return"".concat(p[t]||"").concat(e.join(","))}).join(" ");return f.createElement("path",Object.assign({d:o,fill:"none",stroke:"#000",vectorEffect:"non-scaling-stroke",markerEnd:t},a))}}]),r}(f.PureComponent);t.default=h},980:function(e,t,r){"use strict";var n=r(44),a=r(45),o=r(53),i=r(54),c=r(51);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=(l=r(981))&&l.__esModule?l:{default:l};function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var p=function(e){o(r,e);var t=s(r);function r(){return n(this,r),t.apply(this,arguments)}return a(r,[{key:"_renderVertices",value:function(){var e=this.props,t=e.classNamePrefix,r=e.getNodeLabel,n=e.setOnNode,a=e.vertices,o=e.vertexRefs;return a.map(function(e,a){return u.createElement(f.default,Object.assign({key:e.key,ref:o[a],hidden:!0,classNamePrefix:t,labelFactory:r,vertex:e},n&&n(e)))})}},{key:"_renderLayoutVertices",value:function(){var e=this.props,t=e.classNamePrefix,r=e.getNodeLabel,n=e.setOnNode,a=e.layoutVertices,o=e.vertexRefs;return a?a.map(function(e,a){return u.createElement(f.default,Object.assign({key:e.vertex.key,ref:o[a],classNamePrefix:t,labelFactory:r,vertex:e.vertex,left:e.left,top:e.top},n&&n(e.vertex)))}):null}},{key:"render",value:function(){return this.props.layoutVertices?this._renderLayoutVertices():this._renderVertices()}}]),r}(u.PureComponent);t.default=p},981:function(e,t,r){"use strict";var n=r(104),a=r(148),o=r(44),i=r(45),c=r(53),s=r(54),l=r(51),u=["classNamePrefix","hidden","labelFactory","vertex","left","top","forwardedRef"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(0));function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var v=function(e){c(r,e);var t=p(r);function r(){return o(this,r),t.apply(this,arguments)}return i(r,[{key:"render",value:function(){var e=this.props,t=e.classNamePrefix,r=e.hidden,n=e.labelFactory,o=e.vertex,i=e.left,c=e.top,s=e.forwardedRef,l=a(e,u);return l.style=d(d({},l.style),{},{position:"absolute",transform:null==i||null==c?void 0:"translate(".concat(i,"px,").concat(c,"px)"),visibility:r?"hidden":void 0}),l.className="".concat(t,"-Node ").concat(l.className||""),h.createElement("div",Object.assign({ref:s},l),n(o))}}]),r}(h.PureComponent);v.defaultProps={hidden:!1,left:null,top:null};var g=h.forwardRef(function(e,t){return h.createElement(v,Object.assign({},e,{forwardedRef:t}))});t.default=g},982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(e.zoomTransform||{}).k;if((void 0===t?1:t)<=n)return{className:"is-small"};return null};var n=.29},983:function(e,t,r){"use strict";var n=r(104),a=r(148),o=["className","style"],i=["className","style"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t){var r=e.className,n=e.style,c=a(e,o),l=t.className,u=t.style,f=a(t,i);return l&&(r=r?"".concat(r," ").concat(l):l),u&&"object"===typeof u&&(n=n?s(s({},n),u):u),s(s({className:r,style:n},c),f)}Object.defineProperty(t,"__esModule",{value:!0}),t.assignMergeCss=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(l)},t.default=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=[],n=0;n<t.length;n++){var a=t[n](e);a&&r.push(a)}return r.reduce(l)}}},984:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(e.zoomTransform||{}).k,r=void 0===t?1:t;if(r===f)return d;var p=d;if(r>s)p=i;else if(r<c)p=o;else{var h=(n+a*(s-r)/l).toFixed(1);p=u[h]||(u[h]={style:{strokeWidth:h}})}return f=r,d=p,p};var n=2,a=4.2-n,o={style:{strokeWidth:4.2.toFixed(1)}},i={style:{strokeWidth:n.toFixed(1)}},c=.1,s=.6,l=s-c,u={},f=-Number.MIN_VALUE,d=i},985:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=((n=r(986))&&n.__esModule?n:{default:n}).default;t.default=a},986:function(e,t,r){"use strict";var n=r(44),a=r(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(472),c=(o=r(987))&&o.__esModule?o:{default:o};var s=function(){function e(t){var r=this;n(this,e),this.layoutId=void 0,this.coordinator=void 0,this.pendingResult=void 0,this.options=void 0,this._handleUpdate=function(e){var t=r.pendingResult;if(t&&e.layoutId===t.id)if(e.type===i.ECoordinatorPhase.Positions){var n=t.isPositionsResolved,a=t.resolvePositions;if(n)return void console.warn("Duplicate positiosn update",e);var o=e.graph,c=e.vertices;if(!c||!a)throw new Error("Invalid state");t.isPositionsResolved=!0,a({graph:o,vertices:c,isCancelled:!1})}else{if(e.type!==i.ECoordinatorPhase.Done)throw new Error("Unrecognized update type");var s=t.resolveLayout,l=e.edges,u=e.graph,f=e.vertices;if(!l||!f||!s)throw new Error("Invalid state");r.pendingResult=null,s({edges:l,graph:u,vertices:f,isCancelled:!1})}},this.options=t,this.layoutId=0,this.coordinator=new c.default(this._handleUpdate),this.pendingResult=null}return a(e,[{key:"getLayout",value:function(e,t){var r=this;this._cancelPending(),this.layoutId++;var n=this.layoutId;this.coordinator.getLayout(n,e,t,this.options),this.pendingResult={id:n,isPositionsResolved:!1};var a=new Promise(function(e){r.pendingResult&&n===r.pendingResult.id&&(r.pendingResult.resolvePositions=e)});return{layout:new Promise(function(e){r.pendingResult&&n===r.pendingResult.id&&(r.pendingResult.resolveLayout=e)}),positions:a}}},{key:"stopAndRelease",value:function(){this._cancelPending(),this.coordinator.stopAndRelease()}},{key:"_cancelPending",value:function(){var e=this.pendingResult;e&&(!e.isPositionsResolved&&e.resolvePositions&&(e.resolvePositions({isCancelled:!0}),e.isPositionsResolved=!0),e.resolveLayout&&e.resolveLayout({isCancelled:!0}),this.pendingResult=null)}}]),e}();t.default=s},987:function(e,t,r){"use strict";var n=r(44),a=r(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(988)),i=l(r(989)),c=l(r(990)),s=r(472);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function f(e){var t=e,r=function(){};t.onmessage=r,t.onmessageerror=r,t.onerror=r,t.terminate()}function d(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=n.indexOf(t);if(a>=0)return n.splice(a,1),{ok:!0,list:n}}return{ok:!1}}var p=function(){function e(t){var r=this;n(this,e),this.currentLayout=void 0,this.nextWorkerId=void 0,this.idleWorkers=void 0,this.busyWorkers=void 0,this.callback=void 0,this._handleVizWorkerError=function(e){var t=e.target;d([r.busyWorkers,r.idleWorkers],t).ok?(console.error("Viz worker onerror"),console.error(e),f(t)):(console.error("Viz worker onerror from unknown viz worker"),console.error(e))},this._handleVizWorkerMessageError=function(e){var t={event:e,currentLayout:r.currentLayout,errorType:"_handleVizWorkerMessageError"};console.error(t)},this._handleVizWorkerMessage=function(e){var t=e.target,n=e.data,a=n.type;r._makeWorkerIdle(t);var o=!r.currentLayout||Boolean(n.meta&&n.meta.layoutId!==r.currentLayout.id);a!==s.EWorkerErrorType.Error?o||(a!==s.EWorkerErrorType.LayoutError?n.type!==s.EWorkerPhase.Positions&&n.type!==s.EWorkerPhase.Edges&&n.type!==s.EWorkerPhase.DotOnly?console.error("Unknown worker message type: ".concat(a),e):r._processResult(a,n):console.error("layout-error",e)):console.error("".concat(o?"(stale) ":"","Error from viz.worker"),e)},this.callback=t,this.currentLayout=null,this.nextWorkerId=0,this.idleWorkers=[],this.busyWorkers=[]}return a(e,[{key:"getLayout",value:function(e,t,r,n){this.busyWorkers.forEach(f),this.busyWorkers.length=0;var a=(0,i.default)(t,r),c=a.edges,l=a.unmapEdges,u=a.unmapVertices,d=a.vertices.map(o.vertexToDot);this.currentLayout={id:e,cleaned:{edges:c,vertices:d},options:n||null,input:{edges:t,unmapEdges:l,unmapVertices:u,vertices:r},status:{phase:s.ECoordinatorPhase.NotStarted}};var p=Boolean(n&&n.useDotEdges)?s.EWorkerPhase.DotOnly:s.EWorkerPhase.Positions;this._postWork(p,c,d)}},{key:"stopAndRelease",value:function(){this.idleWorkers.forEach(f),this.idleWorkers.length=0,this.busyWorkers.forEach(f),this.busyWorkers.length=0,this.currentLayout=null}},{key:"_initWorker",value:function(){var e=new c.default;return e.id=this.nextWorkerId,this.nextWorkerId++,e.onerror=this._handleVizWorkerError,e.onmessageerror=this._handleVizWorkerMessageError,e.onmessage=this._handleVizWorkerMessage,e}},{key:"_makeWorkerIdle",value:function(e){d([this.busyWorkers,this.idleWorkers],e).ok?this.idleWorkers.push(e):f(e)}},{key:"_postWork",value:function(e,t,r){if(!this.currentLayout)throw new Error("_startWork called without a current layout");var n=this.currentLayout,a=n.id,o=n.options,i=n.status,c=this.idleWorkers.pop()||this._initWorker();this.busyWorkers.push(c),i.phase=e,i.workerId=c.id;var s={options:o,edges:t,vertices:r,meta:{phase:e,layoutId:a,workerId:c.id}};c.postMessage(s)}},{key:"_processResult",value:function(e,t){var r=this.currentLayout;if(r){var n=t.edges,a=t.graph,i=t.meta,c=t.vertices,l=i.workerId,u=r.cleaned,f=r.input,d=r.status,p=d.phase,h=d.workerId;if(e===p&&l===h)if(c&&a&&(e===s.EWorkerPhase.Positions||n)){var m=o.vertexToPixels.bind(null,a),v=c.map(m),g=f.unmapVertices(v),y=o.graphToPixels(a);if(e!==s.EWorkerPhase.Positions&&e!==s.EWorkerPhase.DotOnly||this.callback({type:s.ECoordinatorPhase.Positions,layoutId:r.id,graph:y,vertices:g}),n){var b=n.map(function(e){return o.edgeToPixels(a,e)}),E=f.unmapEdges(b);this.callback({type:s.ECoordinatorPhase.Done,layoutId:r.id,graph:y,edges:E,vertices:g})}e===s.EWorkerPhase.Positions&&this._postWork(s.EWorkerPhase.Edges,u.edges,c)}else console.error("Have work results, but recieved invalid result data");else console.error("Have work results, but in an invalid state")}}}]),e}();t.default=p},988:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edgeToPixels=function(e,t){var r=e.height,o=t.edge,i=t.pathPoints;return{edge:o,pathPoints:i&&i.map(function(e){return[n(e[0]*a),n((r-e[1])*a)]})}},t.graphToPixels=function(e){var t=e.height,r=e.scale,n=e.width;return{scale:r,height:t*a,width:n*a}},t.vertexToDot=function(e){var t=e.vertex,r=e.height,n=e.width;return{vertex:t,height:r/a,width:n/a}},t.vertexToPixels=function(e,t){var r=e.height,o=t.vertex,i=t.height,c=t.left,s=t.top,l=t.width;return{vertex:o,height:n(i*a),left:null!=c?n((c-.5*l)*a):c,top:null!=s?n((r-s-.5*i)*a):s,width:n(l*a)}};var n=Math.round,a=72},989:function(e,t,r){"use strict";var n=r(148),a=r(104),o=["vertex"];function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new Map,a=new Map,i=new Map,f=t.map(function(e){var t=e.vertex.key,i=n(e,o);if(r.has(t))throw new Error("Non-unique vertex key: ".concat(t));var s=String(r.size);return r.set(t,s),a.set(s,e),c({vertex:{key:s}},i)});return{edges:e.map(function(e){var t=e.from,n=e.to,a=e.isBidirectional,o=r.get(t),c=r.get(n);if(null==o)throw new Error("Unrecognized key on edge, from: ".concat(t));if(null==c)throw new Error("Unrecognized key on edge, to: ".concat(n));var l={isBidirectional:a,from:o,to:c};return i.set(s(l),e),l}),vertices:f,unmapEdges:u.bind(null,i),unmapVertices:l.bind(null,a)}};var s=function(e){return"".concat(e.from,"\v").concat(e.to)};function l(e,t){return t.map(function(t){var r=e.get(t.vertex.key);if(!r)throw new Error("Unable to find Vertex for ".concat(t.vertex.key));return c(c({},t),{},{vertex:r.vertex})})}function u(e,t){return t.map(function(t){var r=s(t.edge),n=e.get(r);if(!n)throw new Error("Unable to find edge for ".concat(r));return c(c({},t),{},{edge:n})})}},990:function(e,t,r){"use strict";window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=1)}([function(e,t,r){e.exports=function(e,t,r,n){var a=self||window;try{try{var o;try{o=new a.Blob([e])}catch(t){(o=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),o=o.getBlob()}var i=a.URL||a.webkitURL,c=i.createObjectURL(o),s=new a[t](c,r);return i.revokeObjectURL(c),s}catch(n){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new a[t](n,r)}}},function(e,t,r){r.r(t),r.d(t,"default",function(){return o});var n=r(0),a=r.n(n);function o(){return a()('!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=1)}([function(e,n,t){e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(t){var r=this;n(this,e),this.worker=t,this.listeners=[],this.nextId=0,this.worker.addEventListener("message",(function(e){var n=e.data.id,t=e.data.error,o=e.data.result;r.listeners[n](t,o),delete r.listeners[n]}))}return t(e,[{key:"render",value:function(e,n){var t=this;return new Promise((function(r,o){var i=t.nextId++;t.listeners[i]=function(e,n){e?o(new Error(e.message,e.fileName,e.lineNumber)):r(n)},t.worker.postMessage({id:i,src:e,options:n})}))}}]),e}(),i=function e(t,r){n(this,e);var o=t();this.render=function(e,n){return new Promise((function(t,i){try{t(r(o,e,n))}catch(e){i(e)}}))}};function a(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,n){return String.fromCharCode("0x"+n)})))}function s(){return"devicePixelRatio"in window&&window.devicePixelRatio>1?window.devicePixelRatio:1}function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.scale,r=void 0===t?s():t,o=n.mimeType,i=void 0===o?"image/png":o,l=n.quality,u=void 0===l?1:l;return new Promise((function(n,t){var o=new Image;o.onload=function(){var e=document.createElement("canvas");e.width=o.width*r,e.height=o.height*r,e.getContext("2d").drawImage(o,0,0,e.width,e.height),e.toBlob((function(e){var t=new Image;t.src=URL.createObjectURL(e),t.width=o.width,t.height=o.height,n(t)}),i,u)},o.onerror=function(e){var n;n="error"in e?e.error:new Error("Error loading SVG"),t(n)},o.src="data:image/svg+xml;base64,"+a(e)}))}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.scale,r=void 0===t?s():t,o=n.mimeType,i=void 0===o?"image/png":o,a=n.quality,l=void 0===a?1:a,u=r,d=void 0;return"image/jpeg"==i?d="jpeg":"image/png"==i&&(d="png"),new Promise((function(n,t){fabric.loadSVGFromString(e,(function(e,r){0==e.length&&t(new Error("Error loading SVG with Fabric"));var o=document.createElement("canvas");o.width=r.width,o.height=r.height;var i=new fabric.Canvas(o,{enableRetinaScaling:!1}),a=fabric.util.groupSVGElements(e,r);i.add(a).renderAll();var s=new Image;s.src=i.toDataURL({format:d,multiplier:u,quality:l}),s.width=r.width,s.height=r.height,n(s)}))}))}return function(){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workerURL,r=e.worker,s=e.Module,l=e.render;if(n(this,a),void 0!==t)this.wrapper=new o(new Worker(t));else if(void 0!==r)this.wrapper=new o(r);else if(void 0!==s&&void 0!==l)this.wrapper=new i(s,l);else{if(void 0===a.Module||void 0===a.render)throw new Error("Must specify workerURL or worker option, Module and render options, or include one of full.render.js or lite.render.js after viz.js.");this.wrapper=new i(a.Module,a.render)}}return t(a,[{key:"renderString",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.format,r=void 0===t?"svg":t,o=n.engine,i=void 0===o?"dot":o,a=n.files,s=void 0===a?[]:a,l=n.images,u=void 0===l?[]:l,d=n.yInvert,c=void 0!==d&&d,f=n.nop,g=void 0===f?0:f,h=0;h<u.length;h++)s.push({path:u[h].path,data:\'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\\n<svg width="\'+u[h].width+\'" height="\'+u[h].height+\'"></svg>\'});return this.wrapper.render(e,{format:r,engine:i,files:s,images:u,yInvert:c,nop:g})}},{key:"renderSVGElement",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderString(e,r({},n,{format:"svg"})).then((function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").documentElement}))}},{key:"renderImageElement",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.scale,i=t.mimeType,a=t.quality;return this.renderString(n,r({},t,{format:"svg"})).then((function(n){return"object"===("undefined"==typeof fabric?"undefined":e(fabric))&&fabric.loadSVGFromString?u(n,{scale:o,mimeType:i,quality:a}):l(n,{scale:o,mimeType:i,quality:a})}))}},{key:"renderJSONObject",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.format;return"json"===t&&"json0"===t||(t="json"),this.renderString(e,r({},n,{format:t})).then((function(e){return JSON.parse(e)}))}}]),a}()}()},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r);const i={bidir:"isBidirectional"};function a(e,n){throw new Error("Malformed plain output: "+e.slice(n-100,n+100))}function s(e,n){const t=\'"\'===e[n],r=n+Number(t),o=e.indexOf(t?\'"\':" ",r);return{value:e.slice(r,o),end:o+Number(t)}}function l(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";const r=e.indexOf(t,n);return r<n&&a(e,n),{value:Number(e.slice(n,r)),end:r}}function u(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";const o=[];let i=t,a=e;for(;a--;){" "===n[i]&&i++;const{value:e,end:t}=l(n,i,r);o.push(e),i=t}return{values:o,end:i}}function d(e,n){const t=n+6,{values:[r,o],end:i}=u(2,e,t),{value:a,end:s}=l(e,i+1,"\\n");return{end:s,graph:{height:a,scale:r,width:o}}}function c(e,n){const t=n+5,{value:r,end:o}=s(e,t),{values:i,end:a}=u(4,e,o+1),[l,d,c,f]=i;return{vertex:{vertex:{key:r},height:f,left:l,top:d,width:c},end:e.indexOf("\\n",a+1)}}function f(e,n){const t=n+5,{value:r,end:o}=s(e,t),{value:a,end:d}=s(e,o+1),{value:c,end:f}=l(e,d+1),{values:g,end:h}=u(2*c,e,f+1),{value:p,end:v}=s(e,h+1),m=[];for(let e=0;e<g.length;e+=2)m.push([g[e],g[e+1]]);const y={};return p.split(",").forEach(e=>{const n=i[e];n&&(y[n]=!0)}),{edge:{edge:{from:r,to:a,...y},pathPoints:m},end:e.indexOf("\\n",v+1)}}const g="}",h={nodesep:1.5,rankdir:"LR",ranksep:5,sep:.5,shape:"box",splines:"true"};function p(e){const{nodesep:n,rankdir:t,ranksep:r,sep:o,shape:i,splines:a}={...h,...e};return`digraph G {\\n  graph[nodesep=${n.toFixed(3)}, rankdir=${t}, ranksep=${r.toFixed(3)}, sep=${o.toFixed(3)}, splines=${a}];\\n  node [shape=${i}, fixedsize=true, label="", color="_", fillcolor="_"];\\n  edge [arrowhead=none, arrowtail=none];`}function v(e){const{vertex:n,height:t,width:r}=e;let o="";if("left"in e&&"top"in e){const{left:n,top:t}=e;o=`,pos="${n.toFixed(5)},${t.toFixed(5)}!"`}return`"${n.key}" [height=${t.toFixed(5)},width=${r.toFixed(5)}${o}];`}function m(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t?\' [style="bidir",dir=both]\':"";if(!Array.isArray(n))return`"${e}"->"${n}"${r};`;const o=n.map(e=>`"${e}"`);return`"${e}"->{ ${o.join(" ")} };`}let y,w,b;var E;!function(e){e.Error="Error",e.LayoutError="LayoutError"}(y||(y={})),function(e){e.Done="Done",e.DotOnly="DotOnly",e.Edges="Edges",e.NotStarted="NotStarted",e.Positions="Positions"}(w||(w={})),function(e){e[e.DotOnly=w.DotOnly]="DotOnly",e[e.Edges=w.Edges]="Edges",e[e.Positions=w.Positions]="Positions"}(b||(b={})),function(e){e.Ok="Ok",e.Warn="Warn",e.Error="Error"}(E||(E={}));function x(e,n){return Math.abs(e-n)/n<.015}function S(e,n,t,r){const i=function(e,n,t){const r=[],o=new Map;e.forEach(e=>{if(e.isBidirectional)return void r.push(e);const n=o.get(e.from)||[];n.push(e.to),o.set(e.from,n)});const i=n.map(v),a=r.map(e=>m(e.from,e.to,!0)),s=[];return o.forEach((e,n)=>{s.push(m(n,e))}),[p(t),"  ",i.join("\\n  "),"  ",a.join("\\n  "),"  ",s.join("\\n  "),g].join("\\n  ")}(n,t,r),{totalMemory:s}=r||{},l={totalMemory:s,engine:e===b.Edges?"neato":"dot",format:"plain"},u=o()(i,l),{edges:h,graph:y,vertices:w}=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=[],r=[];let o=0;const{end:i,graph:s}=d(e,o);for(o=i+1;"s"!==e[o];)if("n"!==e[o])if("e"!==e[o])a(e,o);else{if(!n){o=e.indexOf("\\n",o)+1;continue}const{end:r,edge:i}=f(e,o);t.push(i),o=r+1}else{const{end:n,vertex:t}=c(e,o);r.push(t),o=n+1}return{graph:s,vertices:r,edges:n?t:null}}(u,e!==b.Positions),S=function(e,n){const t={};let r;e.forEach(e=>{t[String(e.vertex.key)]=e});for(let e=0;e<n.length;e++){const{vertex:{key:o},height:i,left:a,top:s,width:l}=n[e],u=t[String(o)];if(!u)return{validity:E.Error,message:"Extra vertex found: "+o};if(!x(u.height,i)||!x(u.width,l))return{validity:E.Error,message:`Vertex ${o} failed size threshhold check (0.015)`};if("left"in u&&"top"in u){const{left:e,top:n}=u;x(e,a)&&x(n,s)||(r={validity:E.Warn,message:`Vertex ${o} failed position threshhold check (0.015)`})}delete t[String(o)]}const o=Object.keys(t);if(0!==o.length){const e=o.length>1?"vertices":"vertex";return{validity:E.Error,message:`Missing ${e}: ${o.join(", ")}`}}return r||{validity:E.Ok,message:null}}(t,w);if(S.validity===E.Error){return{graph:y,edges:h,vertices:w,layoutError:!0,layoutErrorMessage:S.message}}return S.validity===E.Warn?{graph:y,edges:h,vertices:w,layoutErrorMessage:S.message}:{edges:h,graph:y,vertices:w}}const O=self;let k;function j(e,n){const{colno:t,error:r,filename:o,lineno:i,message:a}=n,s={type:y.Error,meta:k,errorMessage:{colno:t,error:r,errorType:e,filename:o,lineno:i,message:a}};O.postMessage(s)}O.onmessage=function(e){const{edges:n,meta:t,options:r,vertices:o}=e.data;k=t;const{layoutError:i,...a}=S(t.phase,n,o,r),s={meta:t,type:i?y.LayoutError:t.phase,...a};O.postMessage(s),k=null},O.onerror=j.bind(null,"error"),O.onmessageerror=j.bind(O,"messageerror")}]);',"Worker",void 0,void 0)}}])},995:function(e,t,r){},997:function(e,t,r){},999:function(e,t,r){}},[[602,2,1]]]);
//# sourceMappingURL=main.0a1bd1d4.chunk.js.map